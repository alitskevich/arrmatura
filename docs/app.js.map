{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap","webpack:///./app/TodoStore.js","webpack:///./app/app.html","webpack:///./app/index.js","webpack:///./app/res.js","webpack:///./commons/Form.js","webpack:///./commons/NavigationService.js","webpack:///./commons/Service.js","webpack:///./commons/ServiceWorker.js","webpack:///./commons/dates.js","webpack:///./commons/elements.html","webpack:///./commons/fields.html","webpack:///./commons/index.js","webpack:///./commons/inputs.html","webpack:///./commons/layouts.html","webpack:///./commons/pipes.js","webpack:///./commons/support.js","webpack:///./commons/table.html","webpack:///./commons/url.js","webpack:///./commons/utils.js","webpack:///./commons/viewport.html","webpack:///./lib/compile.js","webpack:///./lib/component.js","webpack:///./lib/dom.js","webpack:///./lib/fragment.js","webpack:///./lib/index.js","webpack:///./lib/register.js","webpack:///./lib/render.js","webpack:///./lib/resolve.js","webpack:///./lib/xml.js"],"names":["FILTERS","id","values","ACTIONS","inverse","items","map","e","completed","save","value","filter","name","rm","st","filterId","find","purge","toggle","add","nextId","concat","TodoStore","data","JSON","parse","localStorage","getItem","Object","entries","forEach","key","fn","String","capitalize","payload","assign","setItem","stringify","$","onhash","window","onhashchange","emit","location","hash","slice","includes","length","getItemsLeft","getShownItems","types","commonTypes","loadTemplates","templates","launch","template","resources","then","cond","left","right","upper","s","toUpperCase","sitemap","title","items_left","clear_completed","hint","new_todo_hint","commonPipes","FIELD_TYPES","bool","FormField","form","field","change","type","error","fields","disabled","undefined","caption","Form","keys","NavigationService","prevHash","hashchange","addEventListener","setTimeout","removeEventListener","d","urlParse","target","path","params","state","reset","urlStringify","update","Service","props","ref","lookupService","app","up","args","console","log","message","code","handler","handleError","source","p","def","ServiceWorker","Function","assert","api","scope","push","register","registration","registered","ready","ev","onMessage","subscribe","fallback","pushManager","withPushManager","getSubscription","ss","unsubscribe","saveSubscription","urlBase64ToUint8Array","base64String","padding","repeat","base64","replace","rawData","atob","Uint8Array","from","char","charCodeAt","Notification","permission","applicationServerKey","vapidPublicKey","userVisibleOnly","subscription","toJSON","err","navigator","serviceWorker","pad","x","dateLocales","ru","monthNames","monthNamesShort","dayNames","dayNamesShort","daysInMonth","Date","month","year","getDate","monthName","m","mode","dateFractions","fractions","getFullYear","getMonth","getHours","getMinutes","getSeconds","getMilliseconds","parseISO8601String","Error","timebits","exec","utcdate","UTC","parseInt","parseFloat","offsetMinutes","narrow","getTime","toDate","seconds","nanoseconds","format","date","day","formatTime","tz","withTimezone","adjustTimeZone","minutes","formatTimezone","trim","firstOfWeek","getDay","getTimeZoneDiffMinutes","Number","getTimezoneOffset","tzOffset","toNumber","diff","getIsoFormattedDate","adjastedDate","R","_","templ","NAME","TEMPLATE","$pipes","supportTypes","formTypes","elements","table","viewport","layouts","inputs","pre","track","y","ID","debug","equals","greater","n","not","or","alt","plus","minus","multiply","str","arr","Array","orNow","time","Delay","isDone","action","period","Invoke","Loader","reload","val","trigger","into","callback","result","ErrorHandlingService","show","ToastService","top","close","closeAfter","r","indexOf","decodeValue","split","param","decodeURIComponent","shift","isArray","encodeURIComponent","join","encodeValue","VALUE_MAP","num","isNaN","EMPTY","freeze","isEmpty","Map","size","dig","o","steps","reduce","camelize","sep","t","i","tail","pos","lastIndexOf","lastTail","head","fill","mirror","c","snakeCase","proper","b","groupBy","list","fieldFn","iter","v","entry","slot","count","subs","sortBy","property","order","substr","compare","a","aa","bb","sort","toHash","idKey","valKey","isKeyFn","next","COUNTER","ErrorType","errorType","compose","ff","x0","reduceRight","f","swap","curry","_curry","args0","lengthLimit","fx","guid","s4","Math","floor","random","toString","substring","h","VALUES","RE_SINGLE_PLACEHOLDER","RE_PLACEHOLDER","res","deep","k","pipe","call","apply","impl","prop","ex","expression","placeholder","match","stringInterpolation","fnx","pattern","expr","idx","pipes","initGettr","pipec","withPipes","initialValue","pk","assignKeyValue","acc","makeApplicator","get","hasSlot","content","tag","filterMapKey","src","set","compileFor","attrs","uid","nodes","itemId","$spec","inits","connect","rr","$data","owner","updates","$nodes","emptyNode","compileNode","loadingNode","itemNode","compileIf","aIf","iff","neg","applicator","gttr","$then","ifElse","ifThen","compileTag","compile","has","aProps","getter","v2","ekey","emitter","cb","initials","node","fnId","applyValue","methodName","bindFn","$boundFnMap","bound","bind","upAsync","promise","racer","raceCondition","akey","propGetter","$propFnMap","gettr","extractor1","$$","Component","Ctor","options","parent","ctx","elt","hidden","defer","cursor","prevElt","render","resolveTemplate","constructor","$TEMPLATE","isInited","init","all","hotValue","cancel","Promise","done","children","nextElt","defered","Î”","changed","notify","their","setter","propId","listeners","notifying","uuid","refId","event","warn","method","ReferenceError","COUNTERS","$weak","counter","jn","DOM_SETTERS","textContent","cl","fl","eq","className","selected","checked","$dataset","dataset","click","setAttribute","$attributes","blur","dblclick","scroll","getAttribute","keypress","keyCode","focus","enter","DOM_VALUE_COMPARATORS","mine","Element","document","createTextNode","createElement","applyAttributes","lstnrs","$listeners","parentElement","removeChild","delta","before","nextSibling","firstChild","appendChild","insertBefore","theirs","mines","prototype","hasOwnProperty","fnValue","removeAttribute","WebClientApp","rootElement","body","App","registerTypes","requestAnimationFrame","Fragment","FragmentSlot","ocontent","otag","vv","FragmentFor","index","$ownerImpl","create","$owner","FragmentIf","FragmentTag","ANY","fnName","ctor","REGISTRY","reg","ctr","text","T","parseXML","getByTag","$content","cc","ch","tmpl","RE_XML_ENTITY","RE_XML_COMMENT","RE_ATTRS","RE_ESCAPE_XML_ENTITY","RE_XML_TAG","SINGLE_TAGS","SUBST_XML_ENTITY","amp","gt","lt","quot","nbsp","ESCAPE_XML_ENTITY","RE_EMPTY","FN_ESCAPE_XML_ENTITY","FN_XML_ENTITY","fromCharCode","decodeXmlEntities","escapeXml","skipQoutes","UID","parseAttrs","stringifyAttrs","Node","tab","sattrs","ssubs","stext","_s","lastIndex","addChild","setText","input","max","min","unshift","getChild"],"mappings":"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","file":"app.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse {\n\t\tvar a = factory();\n\t\tfor(var i in a) (typeof exports === 'object' ? exports : root)[i] = a[i];\n\t}\n})(this, function() {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 1);\n","const FILTERS = [\n    { id: 'all', values: [true, false] },\n    { id: 'active', values: [false] },\n    { id: 'completed', values: [true] }\n]\n//pure actions:\nconst ACTIONS = {\n    inverse: ({ items }, { id }) => ({ items: items.map(e => { if (e.id === id) { e.completed = !e.completed } return e }) }),\n    save: ({ items }, { id, value }) => ({ items: (!value) ? items.filter(e => e.id !== id) : items.map(e => { if (e.id === id) { e.name = value } return e }) }),\n    rm: ({ items }, { id }) => ({ items: items.filter(e => e.id !== id) }),\n    filter: (st, { filterId }) => ({ filterId: FILTERS.find(e => e.id === filterId) ? filterId : 'all' }),\n    purge: ({ items }) => ({ items: items.filter(e => !e.completed) }),\n    toggle: ({ items }, { value }) => ({ items: items.map(e => { e.completed = value; return e }) }),\n    add: ({ items, nextId }, { value }) => !value ? null : { nextId: nextId + 1, items: [].concat({ id: nextId, name: value, completed: false }, items) }\n}\n\n// service component\nexport class TodoStore {\n    constructor() {\n        //load data from storage\n        this.data = JSON.parse(localStorage.getItem('TODO:1') || 'null') || { items: [], nextId: 1 }\n        // generate action handlers\n        Object.entries(ACTIONS).forEach(([key, fn]) => {\n            this['on' + String.capitalize(key)] = ({ data: payload }) => {\n                const data = Object.assign({}, this.data, fn(this.data, payload))\n                localStorage.setItem('TODO:1', JSON.stringify(data))\n                return { data }\n            }\n        })\n    }\n    // hook on init\n    init($) {\n        // use hash as a filter key. invoke immediately.\n        (onhash => { window.onhashchange = onhash; return onhash })(() => $.emit('this.filter', { filterId: window.location.hash.slice(1) || FILTERS[0].id }))()\n    }\n    getShownItems() {\n        const { filterId, items } = this.data\n        const values = !filterId ? [] : FILTERS.find(e => e.id === filterId).values\n        return items.filter(e => values.includes(!!e.completed))\n    }\n    getNotEmpty() {\n        return this.data.items.length > 0\n    }\n    getFilterId() {\n        return this.data.filterId\n    }\n    getItemsLeft() {\n        return this.data.items.filter(e => !e.completed).length\n    }\n    getHasCompleted() {\n        return this.data.items.length - this.getItemsLeft()\n    }\n    getShownItemsCount() {\n        return this.getShownItems().length\n    }\n}","export default \"<body>\\n    <template id=\\\"App\\\">\\n        <NavigationService ui:ref=\\\"nav\\\" />\\n        <ViewPort caption=\\\"Arrmatura\\\">\\n            <ViewPort:aside>\\n                <NavTree data=\\\":sitemap\\\" />\\n            </ViewPort:aside>\\n            <PageRouter ui:props=\\\"<-nav.route\\\" />\\n        </ViewPort>\\n    </template>\\n\\n    <template id=\\\"Navbar\\\">\\n        <header class=\\\"navbar bg-primary\\\" style=\\\"min-height:48px\\\">\\n            <section class=\\\"navbar-section mx-2\\\">\\n                <h4 class=\\\"m-1\\\" style=\\\"vertical-align: middle;\\\" ui:if={caption}>{caption}</h4>\\n                <ui:slot />\\n            </section>\\n            <section class=\\\"navbar-center\\\" ui:if={logo}>\\n                <img src={logo} alt=\\\"\\\" height=\\\"40\\\" width=\\\"140\\\" />\\n            </section>\\n            <section class=\\\"navbar-section mx-2\\\">\\n                <ui:slot id=\\\"right\\\" />\\n                <UserAvatar ui:props={user} ui:if={user} />\\n            </section>\\n        </header>\\n    </template>\\n\\n    <template id=\\\"NavTree\\\">\\n        <ul class=\\\"nav\\\">\\n            <li class=\\\"nav-item {item.class}\\\" ui:for=\\\"item of data\\\">\\n                <NavLink href={item.id}>\\n                    <span>{item.name}</span>\\n                    <span ui:if={item.label} class=\\\"label label-error\\\">{item.label}</span>\\n                </NavLink>\\n                <NavTree ui:if={item.subs} data={item.subs} />\\n            </li>\\n        </ul>\\n    </template>\\n\\n    <template id=\\\"MainPage\\\">\\n        <Navbar caption=\\\"Gallery\\\" />\\n        <Panel caption=\\\"Icons\\\">\\n            <!-- <LoadingIndicator /> -->\\n            Using Font Awesome\\n            <Icon type=\\\"cog\\\" />\\n        </Panel>\\n        <Panel caption=\\\"Buttons\\\">\\n            <Button title=\\\"Default\\\" trackId=\\\"action1\\\" />\\n            <Button icon=\\\"cog\\\" title=\\\"Large primary with icon\\\" primary large />\\n            <Button icon=\\\"123\\\" title=\\\"Link\\\" link />\\n        </Panel>\\n        <Panel caption=\\\"Panel\\\" hint=\\\"with hint\\\">\\n            here...\\n        </Panel>\\n    </template>\\n\\n    <template id=\\\"TodoPage\\\">\\n        <Navbar caption={name|or:todo|upper} />\\n        <div>\\n            <TodoStore ui:ref=\\\"todo\\\" />\\n            <section class=\\\"todoapp\\\">\\n                <ui:fragment ui:if=\\\"<- todo.notEmpty\\\">\\n                    <Main />\\n                    <Filter current=\\\"<- todo.filterId\\\">\\n                        <span class=\\\"todo-count\\\">\\n                            <strong>\\n                                <- todo.itemsLeft</strong>\\n                                   <span>:items_left</span>\\n                        </span>\\n                        <Filter:right>\\n                            <button class=\\\"clear-completed\\\" ui:if=\\\"<- todo.hasCompleted\\\"\\n                                    click=\\\"-> todo.purge\\\">:clear_completed</button>\\n                        </Filter:right>\\n                    </Filter>\\n                </ui:fragment>\\n            </section>\\n            <Footer hasItems=\\\"<-todo.shownItemsCount\\\" />\\n        </div>\\n    </template>\\n\\n    <template id=\\\"Footer\\\">\\n        <ui:tag tag={hasItems|then:Hint:Attribution} />\\n    </template>\\n\\n    <template id=\\\"Caption\\\">\\n        <header class=\\\"header\\\">\\n            <h1>{title|upper}</h1>\\n            <input type=\\\"text\\\" class=\\\"new-todo\\\" placeholder=\\\":new_todo_hint\\\" autofocus=\\\"true\\\" enter=\\\"-> todo.add\\\" />\\n        </header>\\n    </template>\\n\\n    <template id=\\\"Main\\\">\\n        <section class=\\\"main\\\">\\n            <input id=\\\"toggle-all\\\" class=\\\"toggle-all\\\" type=\\\"checkbox\\\" toggle=\\\"-> todo.toggle\\\" />\\n            <label for=\\\"toggle-all\\\">Mark all as complete</label>\\n            <TodoList data=\\\"<- todo.shownItems\\\" />\\n        </section>\\n    </template>\\n\\n    <template id=\\\"TodoList\\\">\\n        <ul class=\\\"todo-list\\\">\\n            <TodoItem ui:props={item} ui:for=\\\"item of data\\\" />\\n        </ul>\\n    </template>\\n\\n    <template id=\\\"Filter\\\">\\n        <footer class=\\\"footer\\\">\\n            <ui:slot />\\n            <ul class=\\\"filters\\\">\\n                <li ui:for=\\\"filter of :filters\\\">\\n                    <a class=\\\"selected:{current}=={filter.id}\\\" id={filter.id}\\n                       href=\\\"#{filter.id}\\\">{filter.id|capitalize}</a>\\n                </li>\\n            </ul>\\n            <ui:slot id=\\\"right\\\" />\\n        </footer>\\n    </template>\\n\\n    <template id=\\\"Attribution\\\">\\n        <footer class=\\\"info\\\">\\n            <p>Created by <a href=\\\"https://github.com/alitskevich/dzi-todomvc\\\">alitskevich</a></p>\\n            <p>Part of <a href=\\\"http://todomvc.com\\\">TodoMVC</a></p>\\n        </footer>\\n    </template>\\n\\n    <template id=\\\"Hint\\\">\\n        <footer class=\\\"info\\\">\\n            <p>:hint</p>\\n        </footer>\\n    </template>\\n\\n    <template id=\\\"TodoItem\\\">\\n        <li class=\\\"{completed|then:completed} {editing|then:editing}\\\">\\n            <div class=\\\"view\\\">\\n                <input class=\\\"toggle\\\" type=\\\"checkbox\\\" checked={completed} data-id={id} click=\\\"-> todo.inverse\\\" />\\n                <label data-editing=\\\"true\\\" dblclick=\\\"->\\\">{name}</label>\\n                <button ui:if=\\\"completed\\\" class=\\\"destroy\\\" data-id={id} click=\\\"-> todo.rm\\\"></button>\\n            </div>\\n            <input type=\\\"text\\\" class=\\\"edit\\\" value={name} data-editing=\\\"false\\\" data-id={id} enter=\\\"-> todo.save\\\"\\n                   blur=\\\"->\\\" />\\n        </li>\\n    </template>\\n\\n</body>\";","import { launch } from '../lib';\nimport { loadTemplates } from '../commons';\nimport templates from './app.html';\nimport resources from './res';\nimport { TodoStore } from './TodoStore';\n\n\n// load components from templates\nconst types = [\n    ...window.commonTypes,\n    TodoStore,\n    ...loadTemplates(templates)\n]\n\n// launch with types and resources \nlaunch({ template: '<App/>', types, resources });","// filters metadata\nconst then = (cond, left = '', right = '') => cond ? left : right\nconst upper = s => ('' + s).toUpperCase()\nconst capitalize = s => !s ? '' : s[0].toUpperCase() + s.slice(1);\n\nexport default {\n    sitemap: [\n        { id: 'main', name: 'Main' },\n        { id: 'todo', name: 'To-Do' },\n    ],\n    title: 'todos',\n    items_left: ' item(s) left',\n    clear_completed: 'Clear completed',\n    hint: 'Double-click to edit a todo',\n    new_todo_hint: 'What needs to be done?',\n    // filters: FILTERS,\n    upper,\n    capitalize,\n    then,\n    ...window.commonPipes,\n};","\nconst FIELD_TYPES = {\n  bool: 'SwitchField',\n};\n\nexport class FormField {\n  get TEMPLATE() {\n    return /* html */ `\n    <ui:fragment>\n      <ui:tag tag={fieldType} ui:props={fieldProps} onChange={onChange}/>\n    </ui:fragment>`;\n  }\n\n  onChange({ value }) {\n    const form = this.form\n    const field = this.field\n    const id = field.id\n    form.data = { ...form.data, [id]: value }\n    form.change && form.change(form.data);\n  }\n\n  get fieldType() {\n    const type = this.field.type || 'text'\n    return FIELD_TYPES[type] || (String.capitalize(type) + 'Field')\n  }\n\n  get fieldProps() {\n    const field = this.field\n    const form = this.form\n    const id = field.id\n    const data = form.data || {};\n    const value = data[id];\n    return {\n      ...field,\n      error: (form.error && form.error.fields && form.error.fields[id]) || null,\n      get disabled() { return field.disabled && field.disabled(this.value, this.data) },\n      value: value === undefined ? null : value,\n      caption: field.caption || field.name,\n      data,\n    };\n  }\n}\n\nexport class Form {\n  get TEMPLATE() {\n    return /* html */ `\n    <div autocomplete=\"off\" class=\"form-horizontal\">\n        <FormField ui:for=\"field of fields\" field={field} form={form}/>\n    </div>`;\n  }\n  getForm() {\n    return this;\n  }\n  getFields() {\n    return this.fields || Object.keys(this.data).map(id => ({ id, caption: id }));\n  }\n}\n\n","import { Service } from './Service';\n\nexport class NavigationService extends Service {\n  init() {\n    this.prevHash = ''\n    this.hashchange = () => {\n      const hash = window.location.hash.slice(1);\n      if (hash[0] === '/' && hash !== this.prevHash) {\n        this.emit('this.hash', { value: hash.slice(1) });\n        this.prevHash = hash\n      } else if (!this.prevHash) {\n        this.emit('this.hash', { value: 'main' });\n        this.prevHash = '/main'\n      }\n    }\n    window.addEventListener('hashchange', this.hashchange);\n    setTimeout(() => this.hashchange(), 0);\n  }\n\n  done() {\n    window.removeEventListener('hashchange', this.hashchange)\n  }\n\n  update(d) {\n    const { target, path = ['*'], params } = Object.urlParse(d);\n    const state = {\n      target: (!target || target === '*' ? this.target : target) || 'main',\n      path: path[0] === '*' ? this.path : path,\n      params: params.reset ? { ...params, reset: null } : { ...this.params, ...params }\n    }\n    window.location.hash = this.prevHash = '/' + Object.urlStringify(state)\n    return state\n  }\n\n  getRoute() {\n    return {\n      target: this.target,\n      path: this.path,\n      params: this.params\n    };\n  }\n\n  onHash({ value }) { return this.update(value); }\n}\n\n","export class Service {\n    constructor(props, $) {\n        Object.assign(this, props, {\n            ref: $.ref,\n            lookupService: (ref) => $.app[ref],\n            up: (...args) => $.up(...args),\n            emit: (...args) => $.emit(...args),\n        });\n    }\n\n    log(...args) {\n        console.log(this.ref + ': ', ...args)\n    }\n\n    handleError({ message = '', code = '' }) {\n        // may  overriden from props\n        const handler = this.lookupService('errorHandler');\n        if (handler) {\n            handler.handleError({ message, code, source: this.ref });\n        } else {\n            console.error(this.ref + ': ERROR: ', message, code)\n        }\n    }\n\n    safe(p, def) {\n        return p.catch(error => {\n            this.handleError(error);\n            return def ? def(error) : { error };\n        })\n    }\n}","import { Service } from './Service';\n\nexport class ServiceWorker extends Service {\n\n    get api() {\n        return navigator.serviceWorker\n    }\n\n    init() {\n        try {\n\n            Function.assert(this.api, 'Service Workers are not supported')\n\n            const { source = '/service-worker.js', scope = '/', push } = this;\n\n            this.api.register(source, { scope })\n                .then((registration) => this.registered(registration))\n                .then(() => this.ready(() => this.log('Service Worker Ready')))\n\n            this.api.addEventListener('message', ev => this.onMessage(ev));\n\n            if (push) {\n                this.subscribe();\n            }\n\n        } catch (error) {\n            this.fallback(error)\n        }\n    }\n\n    // ensures that `fn` executed when api is ready\n    ready(fn) {\n        return this.api.ready.then(fn);\n    }\n\n    fallback(error) {\n        this.log(error);\n    }\n\n    // hook on registered\n    registered(registration) {\n        this.log('Service Worker Registered');\n        return registration\n    }\n    /**\n     * Push\n     */\n\n    withPushManager(fn) {\n        return this.ready(({ pushManager }) => pushManager).then(fn)\n    }\n\n    unsubscribe() {\n        this.withPushManager(pushManager => pushManager.getSubscription())\n            .then((ss) => ss && ss.unsubscribe())\n            .then(() => this.saveSubscription())\n            .catch(function (e) {\n                console.log('Error thrown while unsubscribing from  push messaging.', e);\n            })\n    }\n\n    subscribe() {\n        function urlBase64ToUint8Array(base64String) {\n            const padding = '='.repeat((4 - base64String.length % 4) % 4);\n            const base64 = (base64String + padding)\n                .replace(/-/g, '+')\n                .replace(/_/g, '/')\n                ;\n            const rawData = window.atob(base64);\n            return Uint8Array.from([...rawData].map((char) => char.charCodeAt(0)));\n        }\n        if (Notification.permission === \"granted\") {\n            /* do our magic */\n        } else if (Notification.permission === \"blocked\") {\n            /* the user has previously denied push. Can't reprompt. */\n        } else {\n            /* show a prompt to the user */\n        }\n        const applicationServerKey = urlBase64ToUint8Array(this.vapidPublicKey);\n        this.withPushManager(pushManager => pushManager.getSubscription()\n            // .then((ss) => ss && ss.unsubscribe())\n            .then(ss => ss || pushManager.subscribe({\n                userVisibleOnly: true,\n                applicationServerKey,\n            }))\n            .then((subscription) => this.saveSubscription(subscription.toJSON()))\n            .catch((err) => {\n                if (Notification.permission === 'denied') {\n                    this.log('The user has blocked notifications.');\n                }\n                this.handleError(err)\n            })\n        );\n    }\n\n    // to be overriden from props\n    saveSubscription(ss) {\n        this.subscription = ss;\n    }\n\n    /**\n     * Intercommunication between service worker.\n     */\n\n    // handles a message posted from Service worker.\n    onMessage(payload) {\n        this.log('onMessage', payload);\n    }\n}\n","const pad = (x, s = String(x)) => s.length === 1 ? '0' + s : s;\n\nexport const dateLocales = {\n    ru: {\n        monthNames: ['', 'Ð¯Ð½Ð²Ð°Ñ€ÑŒ', 'Ð¤ÐµÐ²Ñ€Ð°Ð»ÑŒ', 'ÐœÐ°Ñ€Ñ‚', 'ÐÐ¿Ñ€ÐµÐ»ÑŒ', 'ÐœÐ°Ð¹', 'Ð˜ÑŽÐ½ÑŒ', 'Ð˜ÑŽÐ»ÑŒ', 'ÐÐ²Ð³ÑƒÑÑ‚', 'Ð¡ÐµÐ½Ñ‚ÑÐ±Ñ€ÑŒ', 'ÐžÐºÑ‚ÑÐ±Ñ€ÑŒ', 'ÐÐ¾ÑÐ±Ñ€ÑŒ', 'Ð”ÐµÐºÐ°Ð±Ñ€ÑŒ'],\n        monthNamesShort: ['', 'Ð¯Ð½Ð²', 'Ð¤ÐµÐ²', 'ÐœÐ°Ñ€Ñ‚', 'ÐÐ¿Ñ€', 'ÐœÐ°Ð¹', 'Ð˜ÑŽÐ½', 'Ð˜ÑŽÐ»', 'ÐÐ²Ð³', 'Ð¡ÐµÐ½', 'ÐžÐºÑ‚', 'ÐÐ¾Ñ', 'Ð”ÐµÐº'],\n        dayNames: ['Ð’Ð¾ÑÐºÑ€ÐµÑÐµÐ½ÑŒÐµ', 'ÐŸÐ¾Ð½ÐµÐ´ÐµÐ»ÑŒÐ½Ð¸Ðº', 'Ð’Ñ‚Ð¾Ñ€Ð½Ð¸Ðº', 'Ð¡Ñ€ÐµÐ´Ð°', 'Ð§ÐµÑ‚Ð²ÐµÑ€Ð³', 'ÐŸÑÑ‚Ð½Ð¸Ñ†Ð°', 'Ð¡ÑƒÐ±Ð±Ð¾Ñ‚Ð°'],\n        dayNamesShort: ['Ð’Ð¡', 'ÐŸÐ', 'Ð’Ð¢', 'Ð¡Ð ', 'Ð§Ð¢', 'ÐŸÐ¢', 'Ð¡Ð‘'],\n    }\n};\n\nexport const daysInMonth = Date.daysInMonth = (month, year) => new Date(year, month + 1, 0).getDate();\n\nexport const monthName = Date.monthName = (m, mode = '') => (dateLocales.ru[`monthNames${mode}`] || dateLocales.ru.monthNames)[m];\n\nexport const dateFractions = Date.fractions = (x = new Date()) => [x.getFullYear(), x.getMonth(), x.getDate(), x.getHours(), x.getMinutes(), x.getSeconds(), x.getMilliseconds()];\n\n/* eslint-disable complexity, no-param-reassign */\n\nDate.parseISO8601String = function (x) {\n    if (typeof x !== 'string') {\n        throw new Error(`parseISO8601String: not a string: ${x}`);\n    }\n    if (x.length < 11) {\n        x += 'T12:00';\n    }\n    const timebits = /^([0-9]{4})-([0-9]{2})-([0-9]{2})[ T]([0-9]{2}):([0-9]{2})(?::([0-9]*)(\\.[0-9]*)?)?Z?(?:([+-])([0-9]{2})([0-9]{2}))?/;\n    const m = timebits.exec(`${x}`);\n    if (!m) {\n        return null;\n    }\n    // utcdate is milliseconds since the epoch\n    const utcdate = Date.UTC(\n        parseInt(m[1]),\n        parseInt(m[2]) - 1, // months are zero-offset (!)\n        parseInt(m[3]),\n        parseInt(m[4]), parseInt(m[5]), // hh:mm\n        ((m[6] && parseInt(m[6])) || 0), // optional seconds\n        ((m[7] && parseFloat(m[7]))) || 0\n    );\n    // optional timezone offset\n    if (m[9] && m[10]) {\n        let offsetMinutes = (parseInt(m[9]) * 60) + parseInt(m[10]);\n        return new Date(utcdate + ((m[8] === '+' ? -60000 : +60000) * offsetMinutes));\n    }\n    return new Date(utcdate);\n}\n/**\n * Universal all-weather converter to Date.\n *\n * @param {*} x any value to be converted to date\n * @returns Date instance or null\n */\nDate.narrow = (x) => {\n    const type = typeof x;\n    if (x == null) { return null; }\n    if (type === 'number') { return new Date(x); }\n    if (type === 'object') {\n        // Date already\n        if (x.getTime) { return x; }\n        // having a date re-presentation method\n        if (x.toDate) { return x.toDate(); }\n        // firestore timestamp for web\n        if (x.seconds && x.nanoseconds != null) { return new Date((x.seconds * 1000) + x.nanoseconds); }\n    }\n    return Date.parseISO8601String(x);\n};\n\n// return date in format dd.mm.yyyy\nDate.format = (x, format = 'dd.mm.yyyy') => {\n    if (!x) {\n        return '';\n    }\n    const date = Date.narrow(x);\n    if (!date) {\n        return '';\n    }\n    const day = date.getDate();\n    const month = date.getMonth() + 1;\n    const year = date.getFullYear();\n    return format\n        .replace(/[_]/g, '\\n')\n        .replace('hh', pad(date.getHours()))\n        .replace('ii', pad(date.getMinutes()))\n        .replace('dd', pad(day))\n        .replace('d', '' + day)\n        .replace('mmmm', monthName(month, ''))\n        .replace('mmm', monthName(month, 'Short'))\n        .replace('mm', pad(month))\n        .replace('yyyy', `${year}`);\n};\n\nDate.formatTime = (x, tz, withTimezone) => {\n    if (!x) { return ''; }\n    const date = adjustTimeZone(Date.narrow(x), tz);\n    const minutes = date.getMinutes();\n    return `${date.getHours()}:${pad(minutes)} ${withTimezone ? formatTimezone(tz) : ''}`.trim();\n};\nDate.firstOfWeek = (d, x = Date.narrow(d)) => (new Date(x.getFullYear(), x.getMonth(), x.getDate() - x.getDay()));\n\nexport const getTimeZoneDiffMinutes = tz => tz ? Number(tz) + new Date().getTimezoneOffset() : null;\n\nexport const formatTimezone = (tzOffset) => {\n    const toNumber = Number(tzOffset);\n    return toNumber ?\n        `(GMT ${toNumber >= 0 ?\n            `+${pad(toNumber / 60)}:${pad(toNumber % 60)}` :\n            `-${pad(-toNumber / 60)}:${pad(-toNumber % 60)}`})` :\n        null;\n};\n\nexport const adjustTimeZone = (d, tz) => {\n    const diff = tz + d.getTimezoneOffset();\n    if (diff) {\n        return new Date(d.getTime() + (diff * 60 * 1000));\n    }\n    return d;\n};\n\n// yyyy-mm-dd day with zero, toISOString works wrong in some cases\nexport const getIsoFormattedDate = (adjastedDate) => {\n    const day = adjastedDate.getDate() > 9 ? adjastedDate.getDate() : `0${adjastedDate.getDate()}`;\n    const month = (adjastedDate.getMonth() + 1) > 9 ? adjastedDate.getMonth() + 1 : `0${adjastedDate.getMonth() + 1}`;\n    return `${adjastedDate.getFullYear()}-${month}-${day}`;\n};\n\n\n\n","export default \"<body>\\n\\n\\n    <template id=\\\"Icon\\\">\\n        <i class=\\\"fas fa-{type} {class}\\\" data={data} click={click}></i>\\n    </template>\\n\\n    <template id=\\\"Img\\\">\\n        <img src={src|equals:*|then:@default:@src} alt={alt} class=\\\"img {class}\\\" style={style} />\\n    </template>\\n\\n    <template id=\\\"Avatar\\\">\\n        <figure class=\\\"avatar {large|then:avatar-lg}\\\">\\n            <Img src={src} alt={alt}\\n                 default=\\\"data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==\\\" />\\n        </figure>\\n    </template>\\n\\n    <template id=\\\"Button\\\">\\n        <button class=\\\"btn btn-{mode} {primary|then:btn-primary} {class} {large|then:btn-lg} {link|then:btn-link} c-hand\\\"\\n                style=\\\"white-space:nowrap;{style}\\\"\\n                data={data}\\n                click={action|track:@trackId:@title}>\\n            <Icon ui:if=\\\"icon\\\" type={icon} class=\\\"mx-1\\\" />\\n            <span ui:if=\\\"title\\\">{title}</span>\\n        </button>\\n    </template>\\n\\n    <template id=\\\"BigRedButton\\\">\\n        <button class=\\\"btn2 {tooltip|then:tooltip} tooltip-left fixed bg-primary circle c-hand {class}\\\"\\n                style=\\\"border:none; right:1.5rem; bottom:1.5rem; width: 2.5rem; height: 2.5rem; z-index:5;\\\"\\n                data={data} data-tooltip={tooltip|or:} click={action|track:@trackId:big}>\\n            <Icon type={icon|or:plus} />\\n        </button>\\n    </template>\\n\\n    <template id=\\\"NavLink\\\">\\n        <a data-value={href} click=\\\"-> nav.hash\\\" class=\\\"c-hand {class}\\\">\\n            <ui:slot />\\n        </a>\\n    </template>\\n\\n    <template id=\\\"Popover\\\">\\n        <div class=\\\"popover popover-right\\\">\\n            <ui:slot />\\n            <div class=\\\"popover-container\\\">\\n                <div class=\\\"card\\\">\\n                    <div class=\\\"card-header\\\">\\n                        <ui:slot id=\\\"body\\\" />\\n                    </div>\\n                </div>\\n            </div>\\n        </div>\\n    </template>\\n\\n    <template id=\\\"Modal\\\">\\n        <div class=\\\"modal modal active:{open}\\\">\\n            <a class=\\\"modal-overlay\\\" aria-label=\\\"Close\\\" data={data} click={close}></a>\\n            <div class=\\\"modal-container\\\">\\n                <div class=\\\"modal-header\\\">\\n                    <a class=\\\"btn btn-clear float-right\\\" aria-label=\\\":close\\\" data={data} click={close}></a>\\n                    <div class=\\\"modal-title h5\\\" ui:if={title}>{title}</div>\\n                    <ui:slot id=\\\"header\\\" />\\n                </div>\\n                <div class=\\\"modal-body\\\" style=\\\"max-height: 70vh;\\\">\\n                    <div class=\\\"content\\\">\\n                        <ui:slot />\\n                    </div>\\n                </div>\\n                <div class=\\\"modal-footer\\\">\\n                    <ui:slot id=\\\"footer\\\" />\\n                </div>\\n            </div>\\n        </div>\\n    </template>\\n\\n    <template id=\\\"EmptyData\\\">\\n        <div class=\\\"empty\\\">\\n            <div class=\\\"empty-icon\\\">\\n                <Icon type={icon|or:people} />\\n            </div>\\n            <p class=\\\"empty-title h5\\\">{title}</p>\\n            <p ui:if={subtitle} class=\\\"empty-subtitle\\\">{subtitle}</p>\\n            <div class=\\\"empty-action\\\">\\n                <ui:slot />\\n            </div>\\n        </div>\\n    </template>\\n\\n    <template id=\\\"Select\\\">\\n        <select class=\\\"{class}\\\" change={change} disabled={disabled} data={data}>\\n            <option selected={value|not} value=\\\"\\\" ui:if={value|not|or:@emptyCaption}>{emptyCaption}</option>\\n            <option ui:for=\\\"option of options\\\" selected={option.id|equals:@value} value={option.id}>\\n                {option.name}\\n            </option>\\n        </select>\\n    </template>\\n\\n    <template id=\\\"RadioGroup\\\">\\n        <div class=\\\"{class}\\\">\\n            <label class=\\\"form-radio\\\" ui:for=\\\"option of options\\\">\\n                <input type=\\\"radio\\\" name={id|or:rg}\\n                       value={option.id}\\n                       checked={option.id|equals:@value} change={change} data={data}\\n                       disabled={disabled}>\\n                <i class=\\\"form-icon\\\"></i>{option.name}\\n            </label>\\n        </div>\\n    </template>\\n</body>\";","export default \"<body id=\\\"app\\\">\\n    <template id=\\\"FieldItem\\\">\\n        <div class=\\\"columns form-group has-error:{error} {class}\\\">\\n            <div class=\\\" col-4 col-sm-12\\\">\\n                <label class=\\\"form-label\\\" for=\\\"input-example-1\\\">\\n                    {caption}\\n                    <sup ui:if={required}\\n                         class=\\\"text-error\\\">âœ±</sup>\\n                </label>\\n            </div>\\n            <div class=\\\"col-8 col-sm-12\\\">\\n                <ui:slot />\\n                <p class=\\\"form-input-hint\\\" ui:if={error}>{error}</p>\\n            </div>\\n        </div>\\n    </template>\\n\\n    <template id=\\\"TextField\\\">\\n        <FieldItem caption={caption} error={error} required={required}>\\n            <input class=\\\"form-input\\\"\\n                   type=\\\"text\\\"\\n                   disabled={disabled}\\n                   placeholder={caption}\\n                   value={value}\\n                   change={onChange}>\\n        </FieldItem>\\n    </template>\\n\\n    <template id=\\\"DateField\\\">\\n        <FieldItem caption={caption} error={error} required={required}>\\n            <input class=\\\"form-input\\\"\\n                   disabled={disabled}\\n                   type=\\\"date\\\"\\n                   placeholder={caption}\\n                   value={value}\\n                   change={onChange}>\\n        </FieldItem>\\n    </template>\\n\\n    <template id=\\\"DateTimeField\\\">\\n        <FieldItem caption=\\\"{caption}\\\" error={error} required={required}>\\n            <DateTimeInput disabled={disabled}\\n                           placeholder={caption}\\n                           value={value}\\n                           change={onChange} />\\n        </FieldItem>\\n    </template>\\n\\n    <template id=\\\"NumberField\\\">\\n        <FieldItem caption={caption} error={error} required={required}>\\n            <input class=\\\"form-input\\\"\\n                   disabled={disabled}\\n                   type=\\\"number\\\"\\n                   placeholder={caption}\\n                   value={value}\\n                   change={onChange}>\\n        </FieldItem>\\n    </template>\\n\\n    <template id=\\\"TextareaField\\\">\\n        <FieldItem caption={caption} error={error} required={required}>\\n            <textarea\\n                      class=\\\"form-input\\\"\\n                      style=\\\"min-height: 15vw\\\"\\n                      disabled={disabled} placeholder={caption} rows=\\\"3\\\" change={onChange} value={value}></textarea>\\n        </FieldItem>\\n    </template>\\n\\n    <template id=\\\"SwitchField\\\">\\n        <div class=\\\"form-group\\\">\\n            <div class=\\\"col-sm-12\\\">\\n                <label class=\\\"form-switch\\\">\\n                    <input type=\\\"checkbox\\\" toggle={onChange} data={data} checked={value|not|not}>\\n                    <i class=\\\"form-icon\\\"></i>\\n                    <span>{caption}</span>\\n                </label>\\n            </div>\\n        </div>\\n    </template>\\n\\n    <template id=\\\"EnumField\\\">\\n        <FieldItem caption={caption} class={class} error={error} required={required}>\\n            <Select class=\\\"form-select\\\"\\n                    change={onChange}\\n                    value={value|or:@defaultValue}\\n                    data={data}\\n                    options=\\\":enums.{typeSpec}\\\"\\n                    emptyCaption={emptyCaption}\\n                    disabled={disabled} />\\n        </FieldItem>\\n    </template>\\n\\n    <template id=\\\"SelectField\\\">\\n        <FieldItem caption={caption} class={class} error={error} required={required}>\\n            <Select class=\\\"form-select\\\"\\n                    change={onChange}\\n                    value={value|or:@defaultValue}\\n                    data={data}\\n                    options={options}\\n                    emptyCaption={emptyCaption}\\n                    disabled={disabled} />\\n        </FieldItem>\\n    </template>\\n\\n    <template id=\\\"RadioField\\\">\\n        <FieldItem caption={caption} error={error} required={required}>\\n            <RadioGroup change={onChange}\\n                        value={value} data={data} options=\\\":enums.{typeSpec}\\\"\\n                        disabled={disabled} />\\n        </FieldItem>\\n    </template>\\n\\n    <template id=\\\"ReferenceField\\\">\\n        <FieldItem caption={caption} error={error} required={required}>\\n            <Loader from=\\\"-> references.{typeSpec}Search\\\"\\n                    data-value={keyword.value|orDataPropValueByKey:keyword}\\n                    trigger={keyword.value}\\n                    into=\\\"->options\\\" />\\n            <Loader from=\\\"-> references.{typeSpec}Entry\\\" data-id={value} trigger={value} into=\\\"->entry\\\" />\\n            <ReferenceInput change={onChange}\\n                            value={value} entry={entry.data}\\n                            onKeyword=\\\"->keyword\\\" keyword={keyword.value|orDataPropValueByKey:keyword}\\n                            onSelectMenuItem=\\\"->entry\\\"\\n                            options={options.data}\\n                            disabled={disabled} />\\n        </FieldItem>\\n    </template>\\n\\n    <template id=\\\"RemoteEnumField\\\">\\n        <FieldItem caption={caption} error={error} required={required}>\\n            <Loader from=\\\"-> references.{typeSpec}Enum\\\" data={data} into=\\\"->options\\\" />\\n            <Select class=\\\"form-select\\\" change={onChange} value={value} data={options.data} disabled={disabled} />\\n        </FieldItem>\\n    </template>\\n\\n</body>\";","import './utils.js';\nimport './url.js';\nimport './dates.js';\n\nimport * as supportTypes from './support.js';\nimport $pipes from './pipes.js';\n\nimport elements from './elements.html';\nimport table from './table.html';\nimport inputs from './inputs.html';\nimport fields from './fields.html';\nimport layouts from './layouts.html';\nimport viewport from './viewport.html';\nimport { NavigationService } from './NavigationService';\nimport { ServiceWorker } from './ServiceWorker';\n\nimport * as formTypes from './Form';\n\nexport * from \"./Service\"\n\nexport const loadTemplates = (...args) => {\n    const R = [];\n    args.forEach(s => s.replace(/<template\\sid=\"(.+)\">([\\s\\S]*?)<\\/template>/gm,\n        (_, id, templ) => R.push({ NAME: id, TEMPLATE: `<ui:fragment>${templ.trim()}</ui:fragment>` })));\n    return R;\n}\n\nexport const commonPipes = $pipes;\n\nexport const commonTypes = [\n    ServiceWorker, NavigationService,\n    ...Object.values(supportTypes),\n    ...Object.values(formTypes),\n    ...loadTemplates(elements, table, fields, viewport, layouts, inputs)\n];\n\nif (typeof window === 'object') {\n    window.commonTypes = commonTypes;\n    window.loadTemplates = loadTemplates;\n    window.commonPipes = commonPipes;\n}","export default \"<body>\\n    <template id=\\\"Dropdown\\\">\\n        <div class=\\\"dropdown\\\">\\n            <a href=\\\"#\\\" class=\\\"btn btn-link dropdown-toggle\\\" tabindex=\\\"0\\\">\\n                {data|selectedName}<i class=\\\"icon icon-caret\\\"></i>\\n            </a>\\n            <!-- menu component -->\\n            <ul class=\\\"menu\\\" style=\\\"right:0;left:auto;\\\">\\n                <li ui:for=\\\"item of data|selectizedBy\\\" class=\\\"menu-item active:{item.selected}\\\"\\n                    data-id={item.id}\\n                    data-name={item.name}\\n                    click={change}>\\n                    <a>{item.name}</a>\\n                </li>\\n            </ul>\\n        </div>\\n    </template>\\n\\n    <template id=\\\"DateTimeInput\\\">\\n        <input class=\\\"form-input flatpickr-input\\\"\\n               init={:support.initFlatpickr}\\n               disabled={disabled}\\n               type=\\\"text\\\"\\n               placeholder={placeholder}\\n               value={value|support.setFlatpickrValue}\\n               change={change}>\\n    </template>\\n\\n    <template id=\\\"SearchBar\\\">\\n        <span class=\\\"ant-input-search ant-input-affix-wrapper\\\">\\n            <input placeholder=\\\"ÐŸÐ¾Ð¸ÑÐº...\\\" class=\\\"ant-input\\\" type=\\\"text\\\"\\n                   value={value} enter={action}\\n                   style=\\\"min-height:40px;\\\">\\n            <span class=\\\"ant-input-suffix\\\">\\n                <i class=\\\"anticon anticon-search ant-input-search-icon\\\" style=\\\"margin-top: 4px;\\\"></i>\\n            </span>\\n        </span>\\n    </template>\\n\\n    <template id=\\\"ReferenceInput\\\">\\n        <div class=\\\"form-autocomplete\\\">\\n            <div class=\\\"form-input has-icon-right\\\" data-showMenu={showMenu|not} click=\\\"->\\\">\\n                <div>{entry.fullNameRu}</div>\\n                <i class=\\\"form-icon icon icon-edit c-hand\\\"></i>\\n            </div>\\n            <Modal ui:if={showMenu} open=\\\"true\\\" title=\\\"Ð’Ñ‹Ð±Ð¾Ñ€ Ð¾Ð¿Ñ†Ð¸Ð¸ {title}\\\" data-showMenu=\\\"false\\\" close=\\\"->\\\">\\n                <div class=\\\"menu\\\" style=\\\"position:sticky;top:-20;z-index:101; border-bottom: none; box-shadow: unset\\\">\\n                    <div class=\\\"form-group has-icon-right\\\">\\n                        <input class=\\\"form-input\\\" type=\\\"text\\\"\\n                               value={keyword} placeholder=\\\"search...\\\" change={onKeyword}>\\n                        <i class=\\\"form-icon icon icon-cross c-hand\\\" data-value=\\\"\\\" click={onKeyword}></i>\\n                    </div>\\n                    <div ui:if={options} class=\\\"menu-item\\\">\\n                        <div class=\\\"tile tile-centered mx-1\\\">\\n                            <b class=\\\"tile-content\\\">ÐÐ°Ð¹Ð´ÐµÐ½Ð¾: {options.length}</b>\\n                        </div>\\n                    </div>\\n                </div>\\n                <ul class=\\\"menu\\\" style=\\\"position:unset; border-top: none; box-shadow: unset\\\">\\n                    <li class=\\\"menu-item\\\" ui:for=\\\"item of options\\\" data-showMenu=\\\"false\\\" click=\\\"->\\\">\\n                        <div click={change} data-value={item.id}>\\n                            <div class=\\\"tile tile-centered mx-1\\\">\\n                                <figure class=\\\"avatar avatar-xs bg-primary\\\" data-initial={item.fullNameRu|initials}>\\n                                </figure>\\n                                <div class=\\\"tile-content\\\">{item.fullNameRu}, {item.birthday|date}</div>\\n                            </div>\\n                        </div>\\n                    </li>\\n                </ul>\\n            </Modal>\\n        </div>\\n    </template>\\n</body>\";","export default \"<body>\\n\\n    <template id=\\\"Grid\\\">\\n        <div class=\\\"columns {class}\\\">\\n            <ui:slot />\\n        </div>\\n    </template>\\n\\n    <template id=\\\"Col\\\">\\n        <div class=\\\"col-{size|or:6} col-sm-12 {class}\\\">\\n            <ui:slot />\\n        </div>\\n    </template>\\n    <template id=\\\"Tile\\\">\\n        <div class=\\\"tile {centered|then:tile-centered} m-2 {class}\\\">\\n            <div class=\\\"tile-icon\\\" ui:if={image}>\\n                <Avatar src={image} />\\n            </div>\\n            <div class=\\\"tile-icon\\\" ui:if={icon}>\\n                <Icon type={icon} />\\n            </div>\\n            <div class=\\\"tile-content\\\">\\n                <div class=\\\"tile-title text-bold\\\" ui:if=\\\"title\\\">{title}</div>\\n                <div class=\\\"tile-subtitle\\\" ui:if=\\\"subtitle\\\">{subtitle}</div>\\n                <ui:slot />\\n            </div>\\n            <div class=\\\"tile-action btn-group\\\" ui:if=\\\"slot(actions)\\\">\\n                <ui:slot id=\\\"actions\\\" />\\n            </div>\\n        </div>\\n    </template>\\n    <template id=\\\"Panel\\\">\\n        <ui:fragment>\\n            <h6 class=\\\"mt-2 pt-2 px-2 mx-2 text-gray\\\" ui:if=\\\"caption\\\">{caption}</h6>\\n            <div class=\\\"panel mx-2 {class}\\\" style={style}>\\n                <small class=\\\"p-2 bg-secondary\\\" ui:if={hint}>{hint}</small>\\n                <div class=\\\"panel-header\\\" ui:if=\\\"slot(title)\\\">\\n                    <div class=\\\"panel-title\\\">\\n                        <ui:slot id=\\\"title\\\" />\\n                    </div>\\n                </div>\\n                <div class=\\\"panel-nav\\\" ui:if=\\\"slot(nav)\\\">\\n                    <ui:slot id=\\\"nav\\\" />\\n                </div>\\n                <div class=\\\"panel-body\\\">\\n                    <ui:slot />\\n                </div>\\n                <div class=\\\"panel-footer\\\" ui:if=\\\"slot(footer)\\\">\\n                    <ui:slot id=\\\"footer\\\" />\\n                </div>\\n            </div>\\n        </ui:fragment>\\n    </template>\\n\\n\\n</body>\";","\nexport default {\n  // system\n  log: (x, pre) => { console.log(pre || 'pipe', x); return x },\n  track: (fn, x, y) => (...args) => { console.log('track', x || y); return (fn || Function.ID)(...args) },\n  // eslint-disable-next-line no-debugger\n  debug: () => { debugger; },\n\n  // logical\n  equals: (x, p) => x == p,\n  greater: (x, p) => x > p,\n  includes: (x, p) => x.includes && x.includes(p),\n  then: (x, p = '', n = '') => x ? p : n,\n  not: x => !x,\n  or: (x, alt) => x || alt,\n  plus: (x, alt) => (+x) + (+alt),\n  minus: (x, alt) => (+x) - (+alt),\n  multiply: (x, alt) => (+x) * (+alt),\n\n  fn: Function,\n  str: String,\n  arr: Array,\n  date: Object.assign((s, format) => Date.format(s, format), Date, {\n    orNow: x => x || (new Date()),\n    firstOfWeek: Date.firstOfWeek,\n    time: Date.formatTime,\n  }),\n};\n","import { Service } from \"./Service\"\n\nexport class Delay {\n  init() {\n    setTimeout(() => { if (!this.isDone) { this.action(this.data) } }, (this.period || 5) * 1000)\n  }\n}\nexport class Invoke {\n  init() {\n    this.action(this.data)\n  }\n}\nexport class Loader {\n  init() {\n    this.reload()\n  }\n  setTrigger(val) {\n    this.trigger = val\n    this.reload()\n  }\n  reload() {\n    const { from, data, into } = this;\n    if (from && into) {\n      from({ ...data, callback: (error, result) => into({ error, ...result }) })\n    }\n  }\n}\n\nexport class ErrorHandlingService extends Service {\n\n  handleError({ message = '', code, source = {} }) {\n    this.show({ message: source + ': ' + message, code, mode: 'error' });\n  }\n  show({ message = '', code = '', source }) {\n    console.error(source + ': ERROR: ', code, message);\n  }\n}\n\nexport class ToastService extends Service {\n  onSend({ data }) {\n    return {\n      top: { ...data, close: () => this.emit('this.close'), closeAfter: 5 }\n    }\n  }\n  onClose() {\n    return {\n      top: null\n    }\n  }\n}","export default \"<body>\\n    <template id=\\\"LoadingIndicator\\\">\\n        <div class=\\\"loading {large|then:loading-lg} {class}\\\" />\\n    </template>\\n\\n    <template id=\\\"EmptyData\\\">\\n        <div class=\\\"empty\\\">\\n            <div class=\\\"empty-icon\\\">\\n                <Icon type={icon|or:people} />\\n            </div>\\n            <p class=\\\"empty-title h5\\\">{title}</p>\\n            <p ui:if={subtitle} class=\\\"empty-subtitle\\\">{subtitle}</p>\\n            <div class=\\\"empty-action\\\">\\n                <ui:slot />\\n            </div>\\n        </div>\\n    </template>\\n\\n    <template id=\\\"LoadableItems\\\">\\n        <LoadingIndicator class=\\\"empty\\\" ui:if=\\\"data|not\\\">\\n            <ui:else>\\n                <h5 class=\\\"error text-error\\\" ui:if=\\\"data.error\\\">{data.error.message|or:@data.error}</h5>\\n                <EmptyData title={emptyCaption|or:Empty} ui:if=\\\"data.length|not\\\">\\n                    <ui:else>\\n                        <div ui:for=\\\"item of data\\\">\\n                            <ui:tag tag={itemType} ui:props={item} item={item} context={context} action={action} />\\n                        </div>\\n                    </ui:else>\\n                </EmptyData>\\n            </ui:else>\\n        </LoadingIndicator>\\n    </template>\\n\\n    <template id=\\\"LoadableEntity\\\">\\n        <LoadingIndicator class=\\\"empty\\\" ui:if=\\\"data|not\\\">\\n            <ui:else>\\n                <h5 class=\\\"error text-error\\\" ui:if=\\\"data.error\\\">\\n                    <span>{data.error.message|or:@data.error}</span>\\n                    <ui:else>\\n                        <EmptyData title={emptyCaption|or:Empty} ui:if=\\\"data.id|not\\\">\\n                            <ui:else>\\n                                <ui:tag tag={type} data={data} context={context} action={action} />\\n                            </ui:else>\\n                        </EmptyData>\\n                    </ui:else>\\n                </h5>\\n            </ui:else>\\n        </LoadingIndicator>\\n    </template>\\n\\n    <template id=\\\"Cell\\\">\\n        <span class=\\\"\\\" style=\\\"padding-left: 0px;\\\">{value}</span>\\n    </template>\\n    <template id=\\\"EnumCell\\\">\\n        <span class=\\\"\\\"\\n              style=\\\"padding-left: 0px;\\\">:map.{typeSpec}.{value}</span>\\n    </template>\\n\\n    <template id=\\\"DateCell\\\">\\n        <span class=\\\"\\\" style=\\\"padding-left: 0px;\\\">{value|date}</span>\\n    </template>\\n\\n    <template id=\\\"Table\\\">\\n        <table style=\\\"position: relative;\\\">\\n            <thead class=\\\"table-thead\\\">\\n                <tr>\\n                    <th class=\\\"col-index\\\" style=\\\"position: sticky; top: -1;\\\"></th>\\n                    <th class=\\\"col-index\\\" style=\\\"position: sticky; top: -1;\\\" ui:for=\\\"item of columns\\\">\\n                        <span>{item.name}</span>\\n                        <div class=\\\"table-column-sorter\\\" ui:if=\\\"item.sortable\\\">\\n                            <span class=\\\"table-column-sorter-up off\\\" title=\\\"â†‘\\\" data-id=\\\"-{item.id}\\\"\\n                                  click={doSort}><i class=\\\"anticon anticon-caret-up\\\"></i></span>\\n                            <span class=\\\"table-column-sorter-down off\\\" title=\\\"â†“\\\" data-id={item.id} click={doSort}><i\\n                                   class=\\\"anticon anticon-caret-down\\\"></i></span>\\n                        </div>\\n                    </th>\\n                </tr>\\n            </thead>\\n            <TableRow ui:for=\\\"item of data\\\" data={item} selected={item.selected} columns={columns} kind={kind} />\\n        </table>\\n    </template>\\n\\n    <template id=\\\"TableRow\\\">\\n        <tbody class=\\\"table-tbody\\\">\\n            <tr class=\\\"table-row table-row-level-0\\\" style=\\\"position:sticky;\\\">\\n                <td class=\\\"col-index\\\" data-id={data.id} click={doItem}>\\n                    <div ui:if={expandable}\\n                         role=\\\"button\\\"\\n                         class=\\\"table-row-expand-icon table-row-expanded\\\"\\n                         aria-label=\\\"Collapse row\\\"\\n                         data-selected=\\\"false\\\" click=\\\"->\\\">\\n                        <ui:else>\\n                            <div role=\\\"button\\\"\\n                                 class=\\\"table-row-expand-icon table-row-collapsed\\\"\\n                                 aria-label=\\\"Expand row\\\"\\n                                 data-selected=\\\"true\\\" click=\\\"->\\\"></div>\\n                        </ui:else>\\n                    </div>\\n                </td>\\n                <td class=\\\"col-index\\\" ui:for=\\\"col of columns\\\">\\n                    <ui:tag tag=\\\"{col.type|str.capitalize}Cell\\\" ui:props={col} value={col.id|propObjectValueByKey}\\n                            data={data} />\\n                </td>\\n            </tr>\\n            <tr ui:if={expanded} class=\\\"table-expanded-row table-expanded-row-level-1\\\">\\n                <td class=\\\"\\\"></td>\\n                <td class=\\\"\\\" colspan=\\\"100\\\">\\n                    <ui:tag tag=\\\"{kind|str.capitalize}RowInsider\\\" data={data} />\\n                </td>\\n            </tr>\\n        </tbody>\\n    </template>\\n</body>\";","/**\n * Parses string into URL object.\n *\n * @param {string} s string in format: `type:target/path?params#data`\n * @param {object} r optional target object\n * @returns URL object like `{type, target, path, params, data }`\n */\nObject.urlParse = function (s, r = {}) {\n  if (!s) {\n    return { path: [], params: {}, target: '', ...r };\n  }\n  if (typeof s === 'object') {\n    return { path: [], params: {}, target: '', ...r, ...s };\n  }\n  let p;\n  // extract type:\n  p = s.indexOf(':');\n  if (p > -1) {\n    r.type = s.slice(0, p);\n    s = s.slice(p + 1);\n  }\n  // extract data:\n  p = s.indexOf('#');\n  if (p > -1) {\n    r.data = decodeValue(s.slice(p + 1));\n    s = s.slice(0, p);\n  }\n  // extract query params:\n  p = s.indexOf('?');\n  r.params = r.params || {};\n  if (p > -1) {\n    for (let param of s.slice(p + 1).split('&')) {\n      let [key, value] = param.split('=');\n      if (value) {\n        r.params[key] = decodeValue(value);\n      }\n    }\n    s = s.slice(0, p);\n  }\n  // target and path:\n  let path = r.path = s.split('/').map(decodeURIComponent);\n  while (path.length && !r.target) {\n    r.target = path.shift();\n  }\n  return r;\n}\n\n/**\n*  Represents an URL object as a string\n*\n* @param {object} r URL object like `{type, target, path, params, data }`\n* @returns string in format `type:target/path?params#data`\n*/\nObject.urlStringify = function (r) {\n  let result = '';\n  if (!r) {\n    return result;\n  }\n  if (typeof r === 'string') {\n    return r;\n  }\n  if (r.target) {\n    if (r.type) {\n      result += `${r.type}://`;\n    }\n    result += r.target;\n  }\n  if (r.path) {\n    result += `/${Array.isArray(r.path) ? r.path.map(encodeURIComponent).join('/') : r.path}`;\n  }\n  const params = r.params;\n  if (params) {\n    const keys = Object.keys(params).filter(key => (params[key] != null));\n    if (keys.length) {\n      result += `?${keys.map(key => (`${key}=${encodeValue(params[key])}`)).join('&')}`;\n    }\n  }\n  if (r.data) {\n    result += `#${encodeValue(r.data)}`;\n  }\n  return result;\n}\n\nconst VALUE_MAP = {\n  true: true,\n  false: false,\n  undefined\n};\n\nfunction decodeValue(val) {\n  const value = decodeURIComponent(val);\n  if ('{['.indexOf(value[0]) > -1) {\n    return JSON.parse(value);\n  }\n  const num = +value;\n  if (value.length <= 17 && !isNaN(num)) {\n    return num;\n  }\n  return VALUE_MAP[value] || value;\n}\n\nfunction encodeValue(value) {\n  return encodeURIComponent((typeof value === 'object') ? JSON.stringify(value) : `${value}`);\n}\n","\n/** ***********************\n * Objects.\n */\n/**\n * Checks if argument is empty .\n */\nObject.EMPTY = Object.freeze({});\nObject.isEmpty = (x) => {\n    if (!x) {\n        return true;\n    }\n    if (x instanceof Object) {\n        // (zero-length array)\n        if (Array.isArray(x)) {\n            return x.length === 0;\n        }\n        // (zero-size map)\n        if (x instanceof Map) {\n            return x.size === 0;\n        }\n        // (has no props)\n        return Object.keys(x).length === 0;\n    }\n    return false;\n};\n\n/**\n * Digs value in a given object structure by a given path.\n *\n * @param {*} o source object\n * @param {*} steps path\n * @param {*} def default value\n */\nObject.dig = (o, steps) => steps.split('.').reduce((r, e) => r ? r[e] : void 0, o);\n\n/**\n * Formats given string template with params.\n *\n * Template should contain placeholders like `{someKey}`,\n * which will be replaced with value by key from params.\n *\n * @param {string} template string template\n * @param {object} params hash with parameters\n */\nString.format = (template, params) => {\n    return `${template || ''}`.replace(/\\{([\\S]+)\\}/i, (_, key) => ((params && params[key]) != null) ? params[key] : '');\n};\n\nfunction capitalize(x) {\n    if (!x) {\n        return x;\n    }\n    const s = `${x}`;\n\n    return s[0].toUpperCase() + s.slice(1);\n}\nfunction camelize(s, sep = '_') {\n    return ((s && s.length && s.split(sep).map((t, i) => (i ? capitalize(t) : t)).join('')) || ``)\n}\nString.tail = (x, sep = '.') => {\n    if (!x) {\n        return '';\n    }\n    const pos = x.lastIndexOf(sep);\n\n    return pos === -1 ? x : x.slice(pos + sep.length);\n};\n\nString.lastTail = (key, sep = '.') => ('' + key).split(sep).slice(-1)[0];\n\nString.head = (x, sep = '.') => {\n    if (!x) {\n        return '';\n    }\n    const pos = x.indexOf(sep);\n\n    return pos === -1 ? x : x.slice(0, pos);\n};\n\n\nString.pad = (x, size = 2, fill = '0') => {\n    let s = String(x);\n    while (s.length < (size)) { s = `${fill}${s}`; }\n    return s;\n};\nString.capitalize = capitalize;\nString.camelize = camelize;\nString.mirror = (x) => (x || '').split('').reduce((r, c) => (c + r), '');\nString.snakeCase = (x) => (x || '').replace(/([a-z])([A-Z])/g, '$1_$2');\nString.proper = (s) => capitalize(camelize(s));\nString.upper = s => ('' + s).toUpperCase();\n\n/** ***********************\n * Arrays.\n */\n\nArray.EMPTY = Object.freeze([]);\nArray.slice = (x, b = 0, e) => x ? x.slice(b, e) : [];\n\n/**\n * Builds histogram on given field for given list.\n *\n * @param {*} list source\n * @param {*} field to be used as group key\n */\nArray.groupBy = function (list, field = 'id') {\n    const result = {};\n    const fieldFn = typeof field === 'string' ? e => e[field] : field;\n    const iter = (v, entry) => {\n        const slot = result[v] || (result[v] = { id: v, count: 0, subs: [] });\n        slot.count++;\n        slot.subs.push(entry);\n    };\n    (list || []).forEach((e) => {\n        const value = fieldFn(e);\n        if (Array.isArray(value)) {\n            value.forEach(v => iter(v, e));\n        } else {\n            iter(value, e);\n        }\n    });\n    return result;\n}\n\n/**\n * Sorts array by element property.\n *\n * @param {*} arr source\n * @param {*} property element property to sort by\n * @param {*} order\n */\nArray.sortBy = function sortBy(arr, property = 'name', order = 1) {\n    let fn = property;\n    if (typeof property === 'string') {\n        if (property[0] === '-') {\n            /* eslint-disable */\n            order = -1;\n            property = property.substr(1);\n        }\n        fn = e => e[property];\n    }\n\n    function compare(a, b) {\n        const aa = fn(a);\n        const bb = fn(b);\n        /* eslint-disable */\n        return (aa < bb) ? -order : (aa > bb) ? order : 0;\n    }\n    return (arr || []).slice(0).sort(compare);\n}\n\n/**\n * Transforms array into hash object.\n * \n * @param {*} list source array\n * @param {*} idKey id key\n * @param {*} valKey value key\n */\nArray.toHash = (list, idKey = 'id', valKey) => {\n    const r = {};\n    if (list) {\n        const isKeyFn = typeof idKey === 'string' ? e => e[idKey] : idKey\n        list.forEach((e) => { r[isKeyFn(e)] = valKey ? e[valKey] : e; });\n    }\n    return r;\n};\n\n/** ***********************\n * Crypto.\n */\n/**\n * Functions\n */\n\nFunction.ID = x => x;\nFunction.next = (COUNTER => (p = '') => p + (COUNTER++))(1);\nFunction.throw = (error, ErrorType = Error) => {\n    throw typeof error === 'string' ? new ErrorType(error) : error;\n};\nFunction.assert = (b, error, errorType) => b || Function.throw(error, errorType);\nFunction.compose = (...ff) => x0 => ff.reduceRight((x, f) => f(x), x0);\nFunction.swap = f => (a, b) => f(b, a);\nFunction.curry = (() => {\n    const _curry = (fn, args0, lengthLimit) => {\n        const fx = (args) => args.length >= lengthLimit ?\n            fn(...args) :\n            _curry(fn, args, lengthLimit - args.length);\n\n        return (...args) => fx([...args0, ...args]);\n    };\n    return (f, ...args) => _curry(f, args, f.length);\n})();\n\n/* Simple GUID generator. */\nFunction.guid = function guid() {\n    function s4() {\n        return Math.floor((1 + Math.random()) * 0x10000)\n            .toString(16)\n            .substring(1);\n    }\n    return `${s4() + s4()}-${s4()}-${s4()}-${s4()}-${s4()}${s4()}${s4()}`;\n}\n\n/* eslint-disable */\n/* Simple hash function. */\nFunction.hash = function (s) {\n    let a = 1,\n        c = 0,\n        h,\n        o;\n    if (s) {\n        a = 0;\n        /* jshint plusplus:false bitwise:false */\n        for (h = s.length - 1; h >= 0; h--) {\n            o = s.charCodeAt(h);\n            a = (a << 6 & 268435455) + o + (o << 14);\n            c = a & 266338304;\n            a = c !== 0 ? a ^ c >> 21 : a;\n        }\n    }\n    return String(a);\n};","export default \"<body>\\n    <template id=\\\"ViewPort\\\">\\n        <ui:fragment>\\n            <ToastService ui:ref=\\\"toaster\\\" />\\n            <ErrorHandlingService ui:ref=\\\"errorHandler\\\" show=\\\"-> toaster.send\\\" />\\n            <ui:fragment ui:if=\\\"slot(aside)\\\">\\n                <Sidebar caption={caption}>\\n                    <Sidebar:aside>\\n                        <ui:slot id=\\\"aside\\\" />\\n                    </Sidebar:aside>\\n                    <div style=\\\"display: flex; flex-direction: column; height: 100vh;\\\">\\n                        <Toast event=\\\"<- toaster.top\\\" close=\\\"->toaster.close\\\"\\n                               style=\\\"position:absolute;top:0;right:0;\\\" />\\n                        <div class=\\\"bg-gray\\\" style=\\\"flex: 1;\\\">\\n                            <ui:slot />\\n                        </div>\\n                    </div>\\n                </Sidebar>\\n                <ui:else>\\n                    <div style=\\\"display: flex; flex-direction: column; height: 100vh;\\\">\\n                        <Toast event=\\\"<- toaster.top\\\" close=\\\"->toaster.close\\\"\\n                               style=\\\"position:absolute;top:0;right:0;\\\" />\\n                        <div class=\\\"bg-gray\\\" style=\\\"flex: 1;\\\">\\n                            <ui:slot />\\n                        </div>\\n                    </div>\\n                </ui:else>\\n            </ui:fragment>\\n        </ui:fragment>\\n    </template>\\n\\n    <template id=\\\"PageRouter\\\">\\n        <ui:tag tag=\\\"{target|str.capitalize|or:Main}Page\\\" ui:props={params} params={params} />\\n    </template>\\n\\n    <template id=\\\"Toast\\\">\\n        <div class=\\\"toast toast-{event.mode|or:@mode|or:primary}\\\" srtyle={style} ui:if=\\\"event\\\">\\n            <button class=\\\"btn btn-clear float-right\\\" click={event.close|or:@close}></button>\\n            <p>{event.message}</p>\\n            <Delay ui:if={event.closeAfter} action={event.close|or:@close} period={event.closeAfter} />\\n        </div>\\n    </template>\\n\\n    <template id=\\\"Sidebar\\\">\\n        <div class=\\\"off-canvas off-canvas-sidebar-show\\\">\\n            <a class=\\\"off-canvas-toggle btn btn-primary btn-action show-lg bg-red\\\"\\n               href=\\\"#sidebar\\\">\\n                <Icon type=\\\"bars\\\" />\\n            </a>\\n            <div id=\\\"sidebar\\\" class=\\\"off-canvas-sidebar\\\">\\n                <div class=\\\"fixed\\\">\\n                    <div class=\\\"bg-secondary\\\" style=\\\"height: 100vh; width:200px\\\">\\n                        <div class=\\\"text-center\\\" ui:if={caption}>\\n                            <a href=\\\"#/main\\\">\\n                                <h5 class=\\\"p-2\\\">{caption}</h5>\\n                            </a>\\n                        </div>\\n                        <div class=\\\"m-2\\\" style=\\\"overflow-y: auto;\\\">\\n                            <ui:slot id=\\\"aside\\\" />\\n                        </div>\\n                    </div>\\n                </div>\\n            </div>\\n            <a class=\\\"off-canvas-overlay\\\" href=\\\"#\\\"></a>\\n            <div class=\\\"off-canvas-content\\\">\\n                <ui:slot />\\n            </div>\\n        </div>\\n    </template>\\n\\n    <template id=\\\"Navbar\\\">\\n        <header class=\\\"navbar bg-success\\\" style=\\\"min-height:48px\\\">\\n            <section class=\\\"navbar-section mx-2\\\">\\n                <NavLink href={back} ui:if={back}>\\n                    <Button link class=\\\"text-primary\\\" icon=\\\"arrow-left\\\" title=\\\":action.back\\\" />\\n                </NavLink>\\n                <h4 class=\\\"m-1\\\" style=\\\"vertical-align: middle;\\\" ui:if={caption}>{caption}</h4>\\n                <ui:slot id=\\\"left\\\" />\\n            </section>\\n            <section class=\\\"navbar-center\\\" ui:if={logo}>\\n                <img src={logo} style=\\\"max-height:44px;\\\" />\\n            </section>\\n            <section class=\\\"navbar-section mx-2\\\">\\n                <ui:slot />\\n            </section>\\n        </header>\\n    </template>\\n\\n    <template id=\\\"NavTree\\\">\\n        <ul class=\\\"nav\\\">\\n            <li class=\\\"nav-item {item.class}\\\" ui:for=\\\"item of data\\\">\\n                <NavLink href={item.id}>\\n                    <span>{item.name}</span>\\n                    <span ui:if={item.label} class=\\\"label label-error\\\">{item.label}</span>\\n                </NavLink>\\n                <NavTree ui:if={item.subs} data={item.subs} />\\n            </li>\\n        </ul>\\n    </template>\\n</body>\";","\nconst VALUES = { true: true, false: false, null: null };\nconst RE_SINGLE_PLACEHOLDER = /^\\{([^}]+)\\}$/;\nconst RE_PLACEHOLDER = /\\{([^}]+)\\}/g;\n\nfunction res(key) {\n  const [id, ...deep] = key.split('.');\n  const target = id === 'app' ? this.app : this.app.resources[id];\n  if (!target || deep.length === 0) {\n    return target;\n  }\n  if (deep.length === 1) {\n    return target[deep[0]];\n  }\n  return deep.reduce((r, k) => r ? r[k] : null, target)\n}\n\nfunction pipe(value, key) {\n  const [id, ...args] = key.split(':')\n  try {\n    const fn = res.call(this, id);\n    let $ = this;\n    return fn.apply($.impl, [value, ...args.map(a => a[0] === '@' ? $.prop(a.slice(1)) : a)]);\n  } catch (ex) {\n    console.error('ERROR: Object.pipes.' + id, ex)\n    return value;\n  }\n}\n\n// Compilation\nexport function expression(v) {\n  if (v[0] === ':') { return placeholder(v); }\n  if (!v.includes('{')) { const r = v in VALUES ? VALUES[v] : v; return () => r; }\n  if (v.match(RE_SINGLE_PLACEHOLDER)) { return placeholder(v.slice(1, -1).trim()); }\n  return stringInterpolation(v);\n}\n\nexport function stringInterpolation(v, fnx = []) {\n  const pattern = v.replace(RE_PLACEHOLDER, (s, expr) => { fnx.push(placeholder(expr)); return '{{' + (fnx.length - 1) + '}}'; });\n  return c => !fnx.length ? pattern : pattern.replace(/\\{\\{(\\d+)\\}\\}/g, (s, idx) => {\n    const r = fnx[idx](c);\n    return !r && r !== 0 ? '' : r;\n  });\n}\n\nexport function placeholder(expr) {\n  const [key, ...pipes] = expr.split('|').map(s => s.trim());\n  const initGettr = (key[0] === ':')\n    ? (fn => c => res.call(c, fn(c)))(stringInterpolation(key.slice(1).trim()))\n    : c => c.prop(key)\n  const pipec = withPipes(pipes)\n  return c => pipec(c, initGettr(c))\n}\n\nexport function withPipes(pipes) {\n  return !pipes.length ? (c, v) => v : (c, initialValue) => pipes.reduce((r, pk) => pipe.call(c, r, pk), initialValue);\n}\n\nconst assignKeyValue = (acc, val, k) => {\n  if (k.slice(0, 5) === 'data-') {\n    acc['data'] = { ...acc['data'], [k.slice(5)]: val in VALUES ? VALUES[val] : val };\n  } else {\n    acc[k] = val;\n  }\n}\n\nconst makeApplicator = (get, k = '_') => (c, acc) => assignKeyValue(acc, get(c), k);\nconst hasSlot = (c, id) => {\n  let r = false;\n  if (id && id != 'default') {\n    c.content && c.content.forEach((e) => { r = r || (e.tag === c.tag + ':' + id) });\n  } else {\n    c.content && c.content.forEach((e) => { r = r || (e.tag.slice(0, c.tag.length + 1) !== c.tag + ':') });\n  }\n  return r\n}\n\nexport const filterMapKey = (src, key) => {\n  const r = new Map();\n  src.forEach((v, k) => { if (k !== key) { r.set(k, v); } });\n  return r;\n};\n\nexport function compileFor({ tag, attrs, uid, nodes }) {\n  const [itemId, , expr] = attrs.get('ui:for').split(' ');\n  const $spec = { itemId };\n  const r = { tag: 'ui:for', uid: 'for:' + expr + uid, $spec, key: attrs.get('key') };\n  if ((expr.slice(0, 2) === '<-')) {\n    const [key, ...pipes] = expr.slice(2).split('|').map(s => s.trim());\n    const pipec = withPipes(pipes);\n    (r.inits || (r.inits = [])).push(c => c.connect(key, rr => ({ $data: pipec(c.owner, rr) })));\n  } else {\n    (r.updates || (r.updates = [])).push(makeApplicator(expression('{:'.includes(expr[0]) ? expr : '{' + expr + '}'), '$data'));\n  }\n  let $nodes = nodes;\n  if (nodes && nodes.length) {\n    const emptyNode = $nodes.find(e => e.tag === 'ui:empty');\n    if (emptyNode) {\n      $spec.emptyNode = emptyNode.nodes.map(compileNode);\n      $nodes = $nodes.filter(e => e !== emptyNode);\n    }\n    const loadingNode = $nodes.find(e => e.tag === 'ui:loading');\n    if (loadingNode) {\n      $spec.loadingNode = loadingNode.nodes.map(compileNode);\n      $nodes = $nodes.filter(e => e !== loadingNode);\n    }\n  }\n  $spec.itemNode = compileNode({ tag, attrs: filterMapKey(attrs, 'ui:for'), uid, nodes: $nodes });\n  return r;\n}\n\nexport function compileIf({ tag, attrs, uid, nodes }) {\n  const aIf = attrs.get('ui:if')\n  const iff = {};\n  const r = { tag: 'ui:if', uid: 'if:' + aIf + uid, key: attrs.get('key'), $spec: iff, };\n  const neg = aIf[0] === '!';\n  const expr = neg ? aIf.slice(1) : aIf;\n\n  if ((expr.slice(0, 2) === '<-')) {\n    const [key, ...pipes] = expr.slice(2).split('|').map(s => s.trim());\n    const pipec = withPipes(pipes);\n    const applicator = neg ? (c => rr => ({ $data: !pipec(c, rr) })) : (c => rr => ({ $data: (!!pipec(c.owner, rr)) }));\n    (r.inits || (r.inits = [])).push(c => c.connect(key, applicator(c)));\n  } else if ((expr.slice(0, 5) === 'slot(')) {\n    const gttr = c => hasSlot(c, expr.slice(5, -1));\n    (r.updates || (r.updates = [])).push((c, acc) => { acc['$data'] = neg ? !gttr(c) : gttr(c); });\n  } else {\n    const gttr = expression(expr.includes('{') ? expr : '{' + expr + '}');\n    (r.updates || (r.updates = [])).push((c, acc) => { acc['$data'] = neg ? !gttr(c) : gttr(c); });\n  }\n  let $then = { tag, attrs: filterMapKey(attrs, 'ui:if'), uid, nodes };\n  if (nodes && nodes.length) {\n    const ifElse = nodes.find(e => e.tag === 'ui:else');\n    const ifThen = nodes.find(e => e.tag === 'ui:then');\n    if (ifElse) {\n      iff.else = ifElse.nodes.map(compileNode);\n      $then.nodes = ifThen ? ifThen.nodes : nodes.filter(e => e !== ifElse);\n    } else if (ifThen) {\n      $then.nodes = ifThen.nodes;\n    }\n  }\n  iff.then = [$then].map(compileNode);\n  return r;\n}\n\nexport function compileTag({ attrs, uid, nodes }) {\n  const expr = attrs.get('tag')\n  const r = {\n    tag: 'ui:tag',\n    uid: 'tag:' + expr + uid,\n    $spec: compile({ attrs: filterMapKey(attrs, 'tag'), nodes }),\n  };\n  if ((expr.slice(0, 2) === '<-')) {\n    (r.inits || (r.inits = [])).push(c => c.connect(expr.slice(2).trim(), (rr => ({ $data: rr }))));\n  } else {\n    const gttr = expression(expr);\n    (r.updates || (r.updates = [])).push((c, acc) => { acc['$data'] = gttr(c); });\n  }\n  return r;\n}\nexport function compile(r) {\n  const { attrs, nodes } = r;\n  if (attrs.has('id')) { r.id = attrs.get('id') }\n  if (attrs.has('ui:ref')) { r.ref = attrs.get('ui:ref') }\n  // ui:props\n  if (attrs.has('ui:props')) {\n    const aProps = attrs.get('ui:props');\n    if ((aProps.slice(0, 2) === '<-')) {\n      const [key, ...pipes] = aProps.slice(2).split('|').map(s => s.trim());\n      const pipec = withPipes(pipes);\n      (r.inits || (r.inits = [])).push(c => c.connect(key, rr => pipec(c.owner, rr)));\n    } else {\n      const getter = expression(aProps);\n      (r.updates || (r.updates = [])).push((c, acc) => Object.assign(acc, getter(c)));\n    }\n  }\n  // attrs\n  attrs.forEach((v, k) => {\n    if (k.slice(0, 3) !== 'ui:') {\n      const v2 = v.slice(0, 2)\n      if (v2 === '<-') {\n        const [key, ...pipes] = v.slice(2).split('|').map(s => s.trim());\n        const pipec = withPipes(pipes);\n        (r.inits || (r.inits = [])).push(c => c.connect(key, rr => ({ [k]: pipec(c.owner, rr) })));\n      } else if (v2 === '->') {\n        const [key, ...pipes] = v.slice(2).split('|').map(s => s.trim());\n        const expr = expression(key);\n        const pipec = withPipes(pipes);\n        const ekey = '$' + v + ':' + r.uid;\n        const emitter = c => c[ekey] || (c[ekey] = (data, cb) => c.emit(expr(c), pipec(c.owner, data), cb));\n        (r.updates || (r.updates = [])).push((c, acc) => assignKeyValue(acc, emitter(c), k));\n      } else {\n        if (!v.includes('{') && v[0] !== ':' && k.slice(0, 5) !== 'data-') {\n          assignKeyValue((r.initials || (r.initials = {})), v, k);\n        } else {\n          (r.updates || (r.updates = [])).push(makeApplicator(expression(v), k));\n        }\n      }\n    }\n  });\n\n  r.nodes = nodes.map(compileNode)\n\n  return r;\n}\n\nexport function compileNode(node) {\n  if (node.attrs.has('ui:for')) { return compileFor(node); }\n  if (node.attrs.has('ui:if')) { return compileIf(node); }\n  if (node.tag === 'ui:tag') { return compileTag(node); }\n  return compile(node);\n}\n\n","/* eslint-disable no-console */\nimport { render } from './render.js';\nimport { resolveTemplate } from './resolve.js';\n\nlet COUNTER = 1;\nconst fnId = e => e\nconst nextId = (p = '') => p + (COUNTER++);\nconst applyValue = (value, fn = fnId) => value && value.then ? value.then(fn) : fn(value);\n\nconst methodName = (x, pre = '') => {\n  if (!x) { return pre; }\n  const s = `${x}`;\n  return pre + s[0].toUpperCase() + s.slice(1);\n};\n\nfunction bindFn(f) {\n  const $ = this;\n  const map = $.$boundFnMap || ($.$boundFnMap = new Map());\n  let fn = map.get(f);\n  if (!fn) {\n    const bound = f.bind($.impl);\n    fn = (...args) => {\n      const r = bound(...args);\n      if (r) {\n        $.up(r)\n      }\n    }\n    map.set(f, fn);\n  }\n  return fn;\n}\n\nconst upAsync = ($, promise, key) => {\n  const racer = $.raceCondition('set:' + (key || 'up'));\n  const up = r => racer(() => $.up(r))\n  if (key && key !== '...') {\n    const akey = key.replace('Promise', '')\n    promise.then(val => up({ [akey + 'Error']: null, [akey]: val }), error => up({ [akey + 'Error']: error }));\n  } else {\n    promise.then(up, error => up({ error }));\n  }\n  return promise;\n}\nconst propGetter = ($, key) => {\n  const map = $.$propFnMap || ($.$propFnMap = {});\n  let fn = map[key];\n  if (fn) { return fn; }\n\n  const impl = $.impl\n  const [pk, ...path] = key.split('.')\n  const gettr = impl[methodName(pk, 'get')];\n\n  const extractor1 = gettr\n    ? () => gettr.call(impl)\n    : ($$ = impl.get ? impl.get(impl) : impl) =>\n      ((pk in $$) ? $$[pk] : void 0);\n\n  fn = !path.length\n    ? extractor1\n    : () => path.reduce((r, p) => (r && (p in r) ? r[p] : void 0), extractor1())\n\n  return map[key] = fn;\n}\n\n\nexport class Component {\n\n  constructor(Ctor, options) {\n    Object.assign(this, options);\n    const { ref, parent, props } = this;\n    if (parent) {\n      this.app = parent.app;\n      this.ctx = this.elt = parent.elt;\n      this.impl = new Ctor(props, this);\n      this.impl.$ = this;\n      this.impl.app = this.app;\n      if (ref) {\n        const hidden = this.app[ref];\n        this.app[ref] = this.impl;\n        this.defer(() => { this.app[ref] = hidden })\n      }\n    } else {\n      this.app = this.impl = new Ctor(props, this);\n      this.impl.$ = this;\n    }\n  }\n\n  /**\n   * Rendering.\n   */\n\n  render() {\n    if (this.isDone) { return; }\n    this.ctx.cursor = this.prevElt;\n    this.impl.render ? this.impl.render(this, render) : render(this);\n  }\n\n  resolveTemplate() {\n    return this.impl.resolveTemplate\n      ? this.impl.resolveTemplate(this)\n      : resolveTemplate(this, this.impl.constructor.$TEMPLATE())\n  }\n\n  /**\n   * Life-cycle hooks.\n   */\n  init() {\n    if (this.isDone || this.isInited) { return; }\n    this.isInited = true;\n    if (this.inits) {\n      const initials = this.impl.init && this.impl.init(this) || {}\n      const all = []\n      this.inits.map(f => f(this)).forEach(r => {\n        if (!r) return;\n        const { hotValue, cancel } = r\n        this.defer(cancel);\n        if (hotValue && hotValue.then) {\n          all.push(hotValue)\n        } else {\n          Object.assign(initials, hotValue)\n        }\n      });\n      delete this.inits;\n      this.up(initials);\n      if (all.length) {\n        Promise.all(all).then((args) => this.up(args.reduce(Object.assign, {})));\n      }\n    } else {\n      if (this.impl.init) {\n        const d = this.impl.init(this)\n        if (d) { this.up(d); }\n      }\n    }\n  }\n\n  done() {\n    if (this.isDone) { return; }\n    this.isDone = true;\n    if (this.impl.done) {\n      this.impl.done(this);\n    }\n    if (this.children) {\n      this.children.forEach(c => { c.parent = null; c.done(); })\n    }\n    if (this.parent) {\n      this.parent.children.delete(this.uid);\n    }\n    if (this.prevElt) {\n      this.prevElt.nextElt = this.nextElt;\n    }\n    if (this.defered) {\n      this.defered.forEach(f => f(this));\n      delete this.defered;\n    }\n    ['parent', 'children', 'owner', 'impl', 'app', 'ctx'].forEach(k => { delete this[k]; });\n  }\n\n  /**\n   * State.\n   */\n  up(Î”) {\n    if (this.isDone) { return; }\n    let changed = this.set(Î”);\n    this.render();\n    if (this.ref && changed) { this.notify(); }\n  }\n\n  set(Î”) {\n    const $ = this;\n    const impl = $.impl;\n    let changed = false;\n    if (impl.set) {\n      changed = impl.set(Î”);\n    } else if (Î”) {\n      if (Î”.then) {\n        upAsync($, Î”);\n      } else {\n        Object.entries(Î”).forEach(([k, their]) => {\n          if (their && their.then) {\n            upAsync($, their, k);\n          } else if (k && typeof their !== 'undefined' && their !== impl[k]) {\n            const setter = impl['set' + k[0].toUpperCase() + k.slice(1)];\n            if (setter) { setter.call(impl, their); } else { impl[k] = their; }\n            changed = true;\n          }\n        });\n      }\n    }\n    return changed;\n  }\n\n  prop(propId) {\n    const value = propGetter(this, propId)();\n    return (typeof value === 'function') ? bindFn.call(this, value) : value;\n  }\n\n  /**\n   *  Left Arrow.\n   */\n  notify() {\n    if (this.listeners && !this.notifying) {\n      this.notifying = true\n      this.listeners.forEach(e => e())\n      this.notifying = false\n    }\n  }\n\n  subscribe(target, fn) {\n    const uuid = nextId();\n    const listeners = (this.listeners || (this.listeners = new Map()))\n    listeners.set(uuid, () => {\n      try {\n        target.up(fn(this))\n      } catch (ex) {\n        console.error(this.tag + this.uid + ' notify ', ex)\n      }\n    });\n    return { hotValue: fn(this), cancel: () => listeners.delete(uuid) };\n  }\n\n  connect(key, applicator) {\n    const [refId, propId] = key.split('.');\n    const ref = refId === 'this' ? this.impl : this.app[refId];\n    if (!ref) { return console.error('connect: No such ref ' + refId, key) }\n    return ref.$.subscribe(this, ($) => applyValue($.prop(propId), applicator));\n  }\n\n  /**\n   *  Right Arrow.\n   */\n  emit(key, data) {\n    const $ = this;\n\n    if (!key || !key.includes('.')) {\n      return $.up(key ? { [key]: data } : data)\n    }\n\n    const [type, target] = key.split('.');\n    const event = { data, ...data };\n\n    const ref = type === 'this' ? $.impl : $.app[type];\n    if (!ref) {\n      console.warn('emit: No such ref ' + type);\n      return;\n    }\n    try {\n\n      const method = ref[methodName(target, 'on')];\n      if (!method) { throw new ReferenceError('emit ' + type + ': No such method ' + methodName(target, 'on')) }\n\n      const result = method.call(ref, event, ref, ref.$);\n      this.log(type + ':' + methodName(target, 'on'), result, event, ref)\n      if (result) { ref.$.up(result) }\n\n    } catch (ex) {\n      console.error('emit ' + key + ':', ex)\n    }\n  }\n\n  /**\n   * Routines.\n   */\n\n  raceCondition(key) {\n    const COUNTERS = this.$weak || (this.$weak = new Map())\n    let counter = 1 + (COUNTERS.get(key) || 0);\n    COUNTERS.set(key, counter)\n    return (fn) => {\n      if (counter === COUNTERS.get(key)) {\n        counter = 0;\n        fn()\n      }\n    }\n  }\n\n  defer(fn) { if (fn && typeof fn === 'function') { (this.defered || (this.defered = [])).push(fn); } }\n\n  log(...args) {\n    console.log(this.tag + this.uid, ...args)\n  }\n}\n","import { render } from './render.js';\nimport { Component } from './component.js';\nimport { registerTypes } from './register.js';\n\nconst camelize = (key, sep = '_', jn = ' ') => ('' + key).split(sep).map((s, i) => i ? s[0].toUpperCase() + s.slice(1) : s).join(jn);\n\n// DOM\nconst DOM_SETTERS = {\n  '#text': (e, v) => (e.textContent = v == null ? '' : v),\n  disabled: (e, v) => (e.disabled = v ? true : null),\n  class: (e, v) => {\n    if (v.includes(':')) {\n      v = ('' + v).split(' ').map(s => {\n        const [cl, expr] = s.split(':')\n        if (expr === undefined) return cl;\n        const [fl, eq] = expr.split('==');\n        const disabled = eq ? fl !== eq : ['', '0', 'false', null].indexOf(fl) > -1;\n        return disabled ? '' : cl;\n      }).join(' ')\n    }\n    e.className = v;\n  },\n  selected: (e, v) => (e.selected = v ? true : null),\n  value: (e, v) => (e.value = v == null ? '' : v),\n  checked: (e, v) => (e.checked = !!v),\n  init: function (e, v) {\n    this.init = () => v(e, this)\n  },\n  data: function (e, v) {\n    if (v && e.$dataset) {\n      Object.keys(e.$dataset).forEach(k => { if (!v[k]) { e.dataset[camelize(k, '-', '')] = null } });\n    }\n    e.$dataset = { ...v };\n    if (v) {\n      Object.keys(v).forEach(k => { e.dataset[camelize(k, '-', '')] = v[k]; });\n    }\n  },\n  click: function (e, v) {\n    this.setAttribute('click:click', !v ? null : (ev) => {\n      this.$attributes.click({ ...e.$dataset }, ev);\n      return false;\n    });\n  },\n  'bubble-click': function (e, v) {\n    this.setAttribute('bubbled-click:click', !v ? null : (ev) => {\n      this.$attributes['bubble-click']({ ...e.$dataset }, ev);\n      return true;\n    });\n  },\n  blur: function (e, v) {\n    this.setAttribute('blur:blur', !v ? null : (ev) => {\n      this.$attributes.blur({ ...e.$dataset }, ev);\n      return false;\n    });\n  },\n  dblclick: function (e, v) {\n    this.setAttribute('dblclick:dblclick', !v ? null : (ev) => {\n      this.$attributes.dblclick({ ...e.$dataset }, ev);\n      return false;\n    });\n  },\n  scroll: function (e, v) {\n    this.setAttribute('scroll:scroll', !v ? null : (ev) => {\n      this.$attributes.scroll({ ...e.$dataset }, ev);\n      return false;\n    });\n  },\n  error: function (e, v) {\n    this.setAttribute('error:error', !v ? null : (ev) => {\n      const fn = this.getAttribute('error');\n      fn && fn({ ...e.$dataset }, ev);\n      return false;\n    });\n  },\n  keypress: function (e, v) {\n    this.setAttribute('keypress:keyup', !v ? null : (ev) => {\n      if (ev.keyCode !== 13 && ev.keyCode !== 27) {\n        const fn = this.$attributes.keypress;\n        fn && fn({ value: e.value, ...e.$dataset }, ev);\n        setTimeout(() => e.focus(), 0)\n      }\n      return false;\n    });\n  },\n  enter: function (e, v) {\n    this.setAttribute('enter:keyup', !v ? null : (ev) => {\n      if (ev.keyCode === 13) {\n        this.$attributes.enter({ value: e.value, ...e.$dataset }, ev);\n      }\n      if (ev.keyCode === 13 || ev.keyCode === 27) {\n        e.blur();\n      }\n      return false;\n    });\n  },\n  change: function (e, v) {\n    this.setAttribute('change:change', !v ? null : (ev) => {\n      this.$attributes.change({ value: e.value, ...e.$dataset }, ev);\n      return false;\n    });\n  },\n  toggle: function (e, v) {\n    this.setAttribute('toggle:change', !v ? null : (ev) => {\n      this.$attributes.toggle({ value: e.checked, ...e.$dataset }, ev);\n      return false;\n    });\n  }\n};\n\nconst DOM_VALUE_COMPARATORS = {\n  value: (e, their) => (e.value === their),\n  _: (_, their, mine) => their === mine\n};\n\nclass Element {\n\n  constructor(attrs = {}, $) {\n    this.elt = $.elt = $.tag === '#text' ? document.createTextNode('') : document.createElement($.tag);\n    this.$attributes = {}\n    this.$ = this.elt.$ = $;\n    this.applyAttributes(attrs);\n  }\n  done() {\n    const e = this.elt;\n    const lstnrs = this.$listeners;\n    if (lstnrs) {\n      Object.keys(lstnrs).forEach(k => e.removeEventListener(k, lstnrs[k]));\n      this.$listeners = null;\n    }\n    const p = e.parentElement;\n    if (p) {\n      p.removeChild(e);\n    }\n    this.elt = this.$attributes = null;\n  }\n  set(delta) {\n    this.delta = this.delta ? Object.assign(this.delta, delta) : delta;\n    return this.$.nodes || delta && Object.keys(delta).length;\n  }\n  render($) {\n    const e = this.elt;\n    const p = $.ctx;\n    if ($.content) {\n      e.cursor = null;\n      render($, $.content);\n      e.cursor = null;\n    }\n    if (this.delta) {\n      this.applyAttributes(this.delta);\n      this.delta = null;\n    }\n    const before = p.cursor ? p.cursor.nextSibling : p.firstChild;\n    if (!before) {\n      if (p !== e.parentElement) {\n        p.appendChild(e);\n      }\n    } else if (e !== before) {\n      p.insertBefore(e, before);\n    }\n    p.cursor = e;\n  }\n  applyAttributes(theirs) {\n    const e = this.elt;\n    const mines = this.$attributes;\n    for (let key in theirs) {\n      if (Object.prototype.hasOwnProperty.call(theirs, key) && !(DOM_VALUE_COMPARATORS[key] || DOM_VALUE_COMPARATORS._)(e, theirs[key], mines[key])) {\n        const value = theirs[key];\n        const setter = DOM_SETTERS[key];\n        // console.log('setAttribute' + this.$.tag, key, value)\n        if (setter) {\n          setter.call(this, e, value);\n        } else {\n          this.setAttribute(key, value);\n        }\n      }\n    }\n    this.$attributes = theirs;\n  }\n  getAttribute(key, def) {\n    return (this.$attributes && this.$attributes[key]) || def\n  }\n  setAttribute(key, value) {\n    if (value != null) {\n      if (typeof value === 'function') {\n        const fnValue = (...args) => { if (!this.isDone) { value(...args) } }\n        if (!this.listeners) {\n          this.listeners = new Map();\n        }\n        if (!this.listeners.has(key)) {\n          const [akey, ekey = akey] = key.split(':')\n          this.elt.addEventListener(ekey, fnValue, false);\n          this.listeners.set(key, fnValue);\n        }\n      } else {\n        this.elt.setAttribute(key, value);\n      }\n    } else {\n      if (this.listeners && this.listeners.has(key)) {\n        const [akey, ekey = akey] = key.split(':')\n        this.elt.removeEventListener(ekey, this.listeners.get(key));\n        this.listeners.delete(key);\n      } else {\n        this.elt.removeAttribute(key);\n      }\n    }\n  }\n}\n\nclass WebClientApp {\n  constructor(props, $) {\n    Object.assign(this, props);\n    $.elt = $.ctx = props.rootElement || document.body;\n  }\n}\nWebClientApp.Element = Element;\n\nexport function launch({ types, template, App = WebClientApp, ...props } = {}) {\n  App.template = template || App.template || `<${types[0].name || types[0].NAME}/>`;\n  registerTypes([App, App.Element].concat(types))\n  const a = new Component(App, { props });\n\n  const fn = () => { render(a); a.init(); }\n  if (typeof window === 'object') {\n    window.requestAnimationFrame(fn);\n  } else {\n    fn()\n  }\n\n  return a.impl;\n}\n\nif (typeof window === 'object') {\n  window.launch = launch;\n}","import { resolveTemplate } from './resolve.js';\n\nexport class Fragment {\n    resolveTemplate($) {\n        return $.content;\n    }\n}\n\nexport class FragmentSlot {\n    resolveTemplate($) {\n        const ocontent = $.owner.content;\n        if (!ocontent) return null;\n        const otag = $.owner.tag;\n        const acc = new Map();\n        ocontent.forEach((v) => {\n            if ($.id) {\n                if ((v.tag === otag + ':' + $.id) && v.content) {\n                    v.content.forEach(vv => acc.set(vv.uid, vv));\n                }\n            } else if (v.tag.slice(0, otag.length + 1) !== otag + ':') {\n                acc.set(v.uid, v);\n            }\n        });\n        return acc;\n    }\n}\n\nexport class FragmentFor {\n    resolveTemplate($) {\n        const acc = new Map();\n        const { $data: data } = $.impl;\n        const { itemId, itemNode, emptyNode, loadingNode } = $.$spec;\n        const { tag, updates, initials = {}, nodes, uid } = itemNode;\n        if (data && data.length) {\n            if (!data.forEach) {\n                throw new Error('wrong ui:for data', data)\n            }\n            data.forEach((d, index) => {\n                const id = `${uid}-$${d.id || index}`;\n                const $ownerImpl = Object.assign(Object.create($.owner.impl), { [itemId]: d, [itemId + 'Index']: index })\n                const up = Î” => $.owner.up(Î”)\n                const $owner = Object.assign(Object.create($.owner), { impl: $ownerImpl, $propFnMap: {}, up })\n                resolveTemplate($owner, { tag, initials, updates, nodes, uid: id }, acc);\n            });\n        } else if (!data) {\n            if (loadingNode) { resolveTemplate($.owner, loadingNode, acc); }\n        } else if (!data.length) {\n            if (emptyNode) { resolveTemplate($.owner, emptyNode, acc); }\n        }\n        return acc;\n    }\n}\n\nexport class FragmentIf {\n\n    resolveTemplate($) {\n        const { $data } = $.impl;\n        const node = $data ? $.$spec.then : $.$spec.else;\n        return resolveTemplate($.owner, node);\n    }\n}\n\nexport class FragmentTag {\n    resolveTemplate($) {\n        const acc = new Map();\n        const tag = $.impl.$data;\n        if (tag) {\n            resolveTemplate($.owner, { ...$.$spec, tag, uid: tag + ':' + $.uid }, acc);\n        }\n        return acc;\n    }\n}\n\n","export * from './dom.js';\n","import { parseXML } from './xml.js';\nimport { compileNode } from './compile.js';\nimport { Fragment, FragmentFor, FragmentIf, FragmentTag, FragmentSlot } from './fragment.js';\n\nlet COUNTER = 1;\n\nlet ANY;\n\nconst nextId = (p = '') => p + (COUNTER++);\n\nconst fnName = ctor => (/^function\\s+([\\w$]+)\\s*\\(/.exec(ctor.toString()) || [])[1] || nextId('$C');\n\nconst REGISTRY = new Map([\n    ['ui:fragment', Fragment],\n    ['ui:for', FragmentFor],\n    ['ui:if', FragmentIf],\n    ['ui:tag', FragmentTag],\n    ['ui:slot', FragmentSlot],\n]);\n\nconst reg = ctr => {\n    const ctor = typeof ctr === 'function' ? ctr : Object.assign(function () { }, ctr);\n    const name = ctor.NAME || ctor.name || fnName(ctor);\n    const text = ctor.TEMPLATE || ctor.template || ctor.prototype.TEMPLATE;\n    ctor.$TEMPLATE = () => {\n        try {\n            const T = text ? compileNode(parseXML(typeof text === 'function' ? text() : text, name)) : [];\n            ctor.$TEMPLATE = () => T;\n            return T;\n        } catch (ex) {\n            // eslint-disable-next-line no-console\n            console.error('compile ' + name, ex)\n        }\n        return []\n    }\n    if (name === 'Element') {\n        ANY = ctor\n    } else {\n        REGISTRY.set(name, ctor);\n    }\n};\n\nexport const registerTypes = types => types.forEach(reg);\n\nexport const getByTag = tag => REGISTRY.get(tag) || ANY;","import { getByTag } from './register.js';\nimport { Component } from './component.js';\n\nexport const render = (c, $content = c.resolveTemplate()) => {\n    if (!$content || !$content.size) {\n        if (c.children) { c.children.forEach(cc => cc.done()); }\n        return;\n    }\n    if (c.children) { c.children.forEach(cc => !$content.has(cc.uid) ? cc.done() : 0); }\n    const ch = c.children || (c.children = new Map());\n    $content.forEach(({ tag, content, owner, props, inits, initials, ref, $spec, id }, uid) => {\n        let cc = ch.get(uid);\n        if (!cc) {\n            if (initials) {\n                props = props && props.data && initials.data\n                    ? { ...props, ...initials, data: { ...initials.data, ...props.data } }\n                    : { ...props, ...initials }\n            }\n            cc = new Component(\n                getByTag(tag),\n                { props, tag, ref, $spec, id, uid, owner, inits, parent: c }\n            );\n            ch.set(uid, cc);\n        }\n        cc.owner = owner;\n        cc.content = content;\n        cc.prevElt = c.elt.cursor;\n        cc.up(props);\n    });\n    if (c.children) { c.children.forEach(cc => !cc.isInited ? cc.init() : 0); }\n};\n","\nexport function resolveTemplate(owner, tmpl, acc = new Map()) {\n    if (!tmpl) { return acc; }\n    if (tmpl.reduce) { return tmpl.length ? tmpl.reduce((m, t) => resolveTemplate(owner, t, m), acc) : acc; }\n    const { tag, updates, initials, inits, nodes, uid, id, ref, $spec } = tmpl;\n    return acc.set(uid, {\n        tag, id, uid, ref,\n        owner, initials, inits,\n        $spec,\n        props: updates && updates.length ? updates.reduce((acc, fn) => { fn(owner, acc); return acc; }, {}) : null,\n        content: nodes && nodes.length ? nodes.reduce((m, t) => resolveTemplate(owner, t, m), new Map()) : null\n    });\n}\n","// ==========\n// XML Parse for templates. XML -> NodeTree\n// ----------\nconst RE_XML_ENTITY = /&#?[0-9a-z]{3,5};/g;\nconst RE_XML_COMMENT = /<!--((?!-->)[\\s\\S])*-->/g;\nconst RE_ATTRS = /([a-z][a-zA-Z0-9-:]+)(=\"[^\"]*\"|={[^}]*})?/g;\nconst RE_ESCAPE_XML_ENTITY = /[\"'&<>]/g;\nconst RE_XML_TAG = /(<)(\\/?)([a-zA-Z][a-zA-Z0-9-:]*)((?:\\s+[a-z][a-zA-Z0-9-:]+(?:=\"[^\"]*\"|={[^}]*})?)*)\\s*(\\/?)>/g;\nconst SINGLE_TAGS = 'img input br col'.split(' ').reduce((r, e) => { r[e] = 1; return r; }, {});\nconst SUBST_XML_ENTITY = {\n    amp: '&',\n    gt: '>',\n    lt: '<',\n    quot: `\"`,\n    nbsp: ' '\n};\nconst ESCAPE_XML_ENTITY = {\n    34: '&quot;',\n    38: '&amp;',\n    39: '&#39;',\n    60: '&lt;',\n    62: '&gt;'\n};\nconst RE_EMPTY = /^\\s*$/\nconst FN_ESCAPE_XML_ENTITY = m => ESCAPE_XML_ENTITY[m.charCodeAt(0)];\nconst FN_XML_ENTITY = function (_) {\n    const s = _.substring(1, _.length - 1);\n    return s[0] === '#' ? String.fromCharCode(+s.slice(1)) : (SUBST_XML_ENTITY[s] || ' ');\n};\nconst decodeXmlEntities = (s = '') => s.replace(RE_XML_ENTITY, FN_XML_ENTITY);\nconst escapeXml = (s) => !s ? '' : ('' + s).replace(RE_ESCAPE_XML_ENTITY, FN_ESCAPE_XML_ENTITY);\nconst skipQoutes = (s) => s[0] === '\"' && s[s.length - 1] === '\"' ? s.slice(1, -1) : s;\n\nlet UID = 1;\n\nconst parseAttrs = (s) => {\n    const r = new Map();\n    if (!s) { return r; }\n    for (let e = RE_ATTRS.exec(s); e; e = RE_ATTRS.exec(s)) {\n        if (!e[2]) {\n            r.set(e[1], \"true\");\n        } else {\n            r.set(e[1], decodeXmlEntities(skipQoutes(e[2].slice(1))));\n        }\n    }\n    return r;\n};\nconst stringifyAttrs = (attrs) => {\n    if (!attrs || !attrs.size) {\n        return '';\n    }\n    const r = [];\n    attrs.forEach((v, k) => {\n        if (v && k !== '#text') {\n            r.push(' ' + k + '=\"' + escapeXml(v) + '\"');\n        }\n    });\n    return r.join('');\n};\n\nclass Node {\n    constructor(tag, attrs = new Map()) {\n        this.uid = UID++;\n        this.tag = tag || '';\n        this.attrs = attrs;\n        this.nodes = [];\n    }\n    getChild(index) {\n        return this.nodes[index];\n    }\n    setText(text) {\n        this.attrs.set('#text', decodeXmlEntities(text));\n    }\n    addChild(tag, attrs) {\n        const e = new Node(tag, attrs);\n        this.nodes.push(e);\n        return e;\n    }\n    toString() {\n        return stringify(this);\n    }\n}\n\nexport function stringify({ tag, attrs, nodes = [] }, tab = '') {\n    const sattrs = stringifyAttrs(attrs);\n    const ssubs = nodes.map(c => stringify(c, `  ${tab}`)).join('\\n');\n    const text = attrs && attrs.get('#text');\n    const stext = text ? `  ${tab}${escapeXml(text)}` : '';\n    if (tag === '#text') {\n        return stext.trim()\n    }\n    return `${tab}<${tag}${sattrs}` + (!ssubs && !stext ? '/>' : `>\\n${ssubs}${stext}\\n${tab}</${tag}>`);\n}\n\nexport const parseXML = (_s, key) => {\n    const s = ('' + _s).trim().replace(RE_XML_COMMENT, '');\n    const ctx = [new Node()];\n    let lastIndex = 0;\n    // head text omitted\n    for (let e = RE_XML_TAG.exec(s); e; e = RE_XML_TAG.exec(s)) {\n        // preceding text\n        const text = e.index && s.slice(lastIndex, e.index);\n        if (text && !text.match(RE_EMPTY)) {\n            ctx[0].addChild('#text').setText(text);\n        }\n        // closing tag\n        if (e[2]) {\n            if (ctx[0].tag !== e[3]) {\n                throw new Error(\n                    (key || '') + ' XML Parse closing tag does not match at: ' + e.index +\n                    ' near ' +\n                    e.input.slice(Math.max(e.index - 150, 0), e.index) +\n                    '^^^^' +\n                    e.input.slice(e.index, Math.min(e.index + 150, e.input.length))\n                );\n            }\n            ctx.shift();\n        } else {\n            const elt = ctx[0].addChild(e[3], parseAttrs(e[4]));\n            // not single tag\n            if (!(e[5] || (e[3] in SINGLE_TAGS))) {\n                ctx.unshift(elt);\n                if (ctx.length === 1) {\n                    throw new Error('Parse error at: ' + e[0]);\n                }\n            }\n        }\n        // up past index\n        lastIndex = RE_XML_TAG.lastIndex;\n    }\n    // tail text omitted\n    return ctx[0].getChild(0);\n};\n"],"sourceRoot":""}