{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap","webpack:///./app/app.html","webpack:///./app/index.js","webpack:///./app/res.js","webpack:///./app/store.js","webpack:///./commons/Form.js","webpack:///./commons/NavigationService.js","webpack:///./commons/ServiceWorker.js","webpack:///./commons/effects.js","webpack:///./commons/elements.html","webpack:///./commons/fields.html","webpack:///./commons/index.js","webpack:///./commons/inputs.html","webpack:///./commons/layouts.html","webpack:///./commons/services.js","webpack:///./commons/table.html","webpack:///./commons/viewport.html","webpack:///./index.js","webpack:///./lib/compile.expr.js","webpack:///./lib/compile.js","webpack:///./lib/component.js","webpack:///./lib/component.utils.js","webpack:///./lib/dom.attrs.js","webpack:///./lib/element.js","webpack:///./lib/index.js","webpack:///./lib/node.js","webpack:///./lib/register.js","webpack:///./lib/utils.js","webpack:///./lib/xml.js","webpack:///./lib/xml.utils.js","webpack:///webpack:///webpack/universalModuleDefinition","webpack:///webpack:///webpack/bootstrap","webpack:///webpack:///src/arr.js","webpack:///webpack:///src/date.js","webpack:///webpack:///src/fn.js","webpack:///webpack:///src/index.js","webpack:///webpack:///src/obj.js","webpack:///webpack:///src/str.js","webpack:///(webpack)/buildin/module.js"],"names":["types","commons","templates","Store","pipes","launch","template","resources","top","title","sitemap","id","name","icon2","icon","value","key","FIELD_TYPES","bool","FormField","form","field","data","change","type","String","capitalize","error","fields","disabled","undefined","caption","Form","Object","keys","map","NavigationService","prevHash","hashchange","hash","window","location","slice","emit","addEventListener","setTimeout","removeEventListener","d","urlParse","target","path","params","state","reset","urlStringify","update","Service","ServiceWorker","Function","assert","api","source","scope","push","register","then","registration","registered","ready","log","ev","onMessage","subscribe","fallback","fn","pushManager","withPushManager","getSubscription","ss","unsubscribe","saveSubscription","e","console","urlBase64ToUint8Array","base64String","padding","repeat","length","base64","replace","rawData","atob","Uint8Array","from","char","charCodeAt","Notification","permission","applicationServerKey","vapidPublicKey","userVisibleOnly","subscription","toJSON","err","handleError","payload","navigator","serviceWorker","Delay","isDone","action","period","Invoke","Loader","reload","val","trigger","into","callback","result","values","effectsTypes","formTypes","services","elements","table","viewport","layouts","inputs","$","ref","app","impl","up","defer","args","message","code","handler","lookupService","p","def","ErrorHandlingService","show","mode","ToastService","close","closeAfter","RE_SINGLE_PLACEHOLDER","RE_PLACEHOLDER","pipe","split","apply","a","container","get","ex","withPipes","c","v","initialValue","reduce","r","pk","call","stringInterpolation","fnx","pattern","_","expr","placeholder","s","idx","resourceExpression","trim","intrpltn","res","pipec","compileExpression","includes","match","compiledNodeMap","nodes","compileNode","node","set","uid","Map","compileFor","extractAttr","itemName","prep","Node","compileIf","tag","filterMapKey","attrs","iff","ifNode","addPropertyConnector","condition","addPropertyResolver","slotId","hasSlot","$then","ifElse","find","ifThen","filter","assign","getNodes","compileTag","uid0","compileRegularNode","wrapNode","forEach","k","addInitialState","refId","ID","rr","addEmitter","nodeMap","has","compileTemplate","text","T","parseXML","Component","Ctor","parent","getInitialState","hidden","resolveProps","Î”","force","upAsync","changes","entries","isInited","stateChanged","notify","setter","methodName","recontent","propId","propGetter","listeners","notifying","uuid","nextId","cancel","applicator","applyValue","event","warn","method","initializers","initials","init","all","f","Promise","done","children","defered","COUNTERS","$weak","counter","stringifyComponent","content","arrangeElements","cursor","elt","first","appendElt","requireReflow","next","Array","EMPTY","last","size","snode","clone","filterSlotNodes","setNodeMap","FragmentComponent","getByTag","Registered","Ctors","ContainerComponent","ElementComponent","Element","reflow","constructor","getTemplate","ForComponent","items","itemNode","index","ItemComponent","COUNTER","fnId","x","pre","toUpperCase","promise","racer","raceCondition","akey","$propFnMap","instant","bound","bind","gettr","fn0","deep","camelize","sep","jn","i","join","ATTR_SETTERS","textContent","className","selected","checked","$dataset","dataset","click","setAttribute","$attributes","blur","dblclick","scroll","touchstart","h","pageX","changedTouches","screenX","y","pageY","screenY","touch","hs","active","stop","xx","yy","dx","dy","getAttribute","keypress","keyCode","focus","enter","toggle","applyAttributes","cleanupAttributes","fnValue","ekey","removeAttribute","document","createTextNode","createElement","parentElement","removeChild","rootElement","body","props","$AppContext","registerTypes","UID","obj","decodeXmlEntities","getter","propKey","$propertyResolvers","acc","setKeyVal","initialState","connect","isInitial","$initializers","stringifyNode","fnName","ctor","exec","toString","Fragment","REGISTRY","reg","ctr","NAME","TEMPLATE","prototype","$template","ErrorType","Error","n","before","nextSibling","firstChild","appendChild","insertBefore","src","stringifyAttrs","tab","sattrs","ssubs","stext","vv","RE_EMPTY","RE_XML_COMMENT","RE_XML_TAG","SINGLE_TAGS","_s","ctx","lastIndex","addChild","setText","input","Math","max","min","shift","sAttrs","parseAttrs","unshift","RE_ESCAPE_XML_ENTITY","ESCAPE_XML_ENTITY","FN_ESCAPE_XML_ENTITY","m","RE_XML_ENTITY","RE_ATTRS","SUBST_XML_ENTITY","amp","gt","lt","quot","nbsp","FN_XML_ENTITY","substring","fromCharCode","escapeXml","skipQoutes","parseValue","num","isNaN","b","fieldFn","iter","slot","count","subs","list","property","order","aa","bb","arr","idKey","isKeyFn","valKey","R","ru","monthNames","monthNamesShort","dayNames","dayNamesShort","en","Date","month","timebits","tz","parseInt","utcdate","parseFloat","tzOffset","toNumber","Number","DATE_FORMATTERS","hh","date","ii","hi","dd","w","ww","mmmm","mmm","mm","yyyy","ll","z","format","ms","throw","track","debugger","dot","not","isUndefined","isTrue","isFalse","or","and","equals","greater","less","plus","minus","multiply","compose","x0","ff","swap","curry","_curry","fx","lengthLimit","guid","s4","o","str","steps","VALUE_MAP","true","false","decodeURIComponent","JSON","encodeURIComponent","param","pos","fill","module","exports","webpackPolyfill","deprecate","paths","defineProperty","enumerable","l"],"mappings":"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","file":"app.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse {\n\t\tvar a = factory();\n\t\tfor(var i in a) (typeof exports === 'object' ? exports : root)[i] = a[i];\n\t}\n})(this, function() {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 1);\n","export default \"<component id=\\\"App\\\">\\n    <Store ui:ref=\\\"store\\\" />\\n    <NavigationService ui:ref=\\\"nav\\\" />\\n    <ViewPort caption=\\\":top.title\\\" sidebarWidth=\\\"300\\\">\\n        <ViewPort:aside>\\n            <NavTree data=\\\":top.sitemap\\\" />\\n        </ViewPort:aside>\\n        <PageRouter ui:props=\\\"<- nav.route\\\" />\\n    </ViewPort>\\n</component>\\n\\n<component id=\\\"Test1\\\">\\n    <Button primary caption=\\\"Test1\\\" icon=\\\"plus\\\" />\\n</component>\\n\\n<component id=\\\"Test2\\\">\\n    <SimpleList data=\\\":top.sitemap\\\" />\\n</component>\\n\\n<component id=\\\"Test3\\\">\\n    <Panel caption=\\\"Slots, for, if\\\" hint=\\\"level 3\\\">\\n        <NavTree data=\\\":top.sitemap\\\" />\\n    </Panel>\\n</component>\\n<component id=\\\"Test4\\\">\\n    <Store ui:ref=\\\"store\\\" />\\n    <Button caption=\\\"<- store.tab|or:None\\\" data-id=\\\"Some\\\" action=\\\"-> store.select\\\" />\\n</component>\\n\\n<component id=\\\"Test5\\\">\\n    <Panel caption=\\\"Slots into slot 1 - with title\\\" hint=\\\"level 1\\\">\\n        <Panel:title>\\n            <ui:slot />\\n        </Panel:title>\\n        <Panel caption=\\\"Slots into slot 2\\\" hint=\\\"level 2\\\">\\n            <Panel caption=\\\"Slots into slot 3 - should contain a button\\\" hint=\\\"level 3\\\">\\n                <Grid>\\n                    <Grid>\\n                        <Test1 />\\n                    </Grid>\\n                </Grid>\\n            </Panel>\\n        </Panel>\\n    </Panel>\\n</component>\\n\\n<component id=\\\"Test6\\\">\\n    <Test5 code=\\\"5\\\">\\n        <h2>Title slot 1</h2>\\n    </Test5>\\n</component>\\n\\n<component id=\\\"Navbar\\\">\\n    <header class=\\\"navbar bg-primary\\\" style=\\\"min-height:48px\\\">\\n        <section class=\\\"navbar-section mx-2\\\">\\n            <h4 class=\\\"m-1\\\" style=\\\"vertical-align: middle;\\\" ui:if={caption}>{caption}</h4>\\n            <ui:slot />\\n        </section>\\n        <section class=\\\"navbar-center\\\" ui:if={logo}>\\n            <img src={logo} alt=\\\"\\\" height=\\\"40\\\" width=\\\"140\\\" />\\n        </section>\\n        <section class=\\\"navbar-section mx-2\\\">\\n            <ui:slot id=\\\"right\\\" />\\n            <UserAvatar ui:props={user} ui:if={user} />\\n        </section>\\n    </header>\\n</component>\\n\\n<component id=\\\"SimpleList\\\">\\n    <ul class=\\\"nav\\\">\\n        <li class=\\\"nav-item {item.class}\\\" ui:for=\\\"item of data\\\">\\n            <span>{item.name}</span>\\n        </li>\\n    </ul>\\n</component>\\n\\n<component id=\\\"NavTree\\\">\\n    <ul class=\\\"nav\\\">\\n        <li class=\\\"nav-item {item.class}\\\" ui:for=\\\"item of data\\\">\\n            <NavLink href={item.id}>\\n                <span>{item.name}</span>\\n                <span ui:if={item.label} class=\\\"label label-error\\\">{item.label}</span>\\n            </NavLink>\\n            <NavTree ui:if={item.subs} data={item.subs} />\\n        </li>\\n    </ul>\\n</component>\\n\\n<component id=\\\"MainPage\\\">\\n    <Navbar caption=\\\"Gallery\\\" />\\n    <Panel caption=\\\"Icons\\\">\\n        <!-- <LoadingIndicator /> -->\\n        Using Font Awesome\\n        <Icon type=\\\"cog\\\" />\\n    </Panel>\\n    <Panel caption=\\\"Buttons\\\">\\n        <Button caption=\\\"Default\\\" trackId=\\\"action1\\\" />\\n        <Button icon=\\\"cog\\\" caption=\\\"Large primary with icon\\\" primary large class=\\\"m-2\\\" />\\n        <Button icon=\\\"123\\\" caption=\\\"Link\\\" link />\\n    </Panel>\\n    <Panel caption=\\\"Panel\\\" hint=\\\"with hint\\\">\\n        here...\\n    </Panel>\\n</component>\\n\\n<component id=\\\"ArrowsPage\\\">\\n    <Navbar caption=\\\"Arrows\\\" />\\n    <Panel caption=\\\"Subscribe and Action\\\">\\n        <Tabs value=\\\"<- store.tab\\\" items=\\\":top.sitemap\\\" action=\\\"-> store.select\\\" />\\n        <Button caption=\\\"<- store.tab|or:none|str.capitalize\\\" data-id=\\\"other\\\" action=\\\"-> store.select\\\" />\\n    </Panel>\\n</component>\";","import { launch, commons } from '../index.js'\nimport templates from './app.html'\nimport resources from './res'\nimport { Store } from './store.js'\n\nconst types = [\n  ...commons.types,\n  templates,\n  Store\n]\n\nconst pipes = {\n  ...commons.pipes\n}\n\nlaunch({ template: '<App />', types, resources, pipes })\n","export default {\n  top: {\n    title: 'The Sample',\n    sitemap: [\n      { id: 'main', name: 'Main', icon2: 'home' },\n      { id: 'arrows', name: 'Arrows', icon: 'work' }\n    ]\n  }\n}\n","export class Store {\n  onSelect ({ id, value, key = 'tab' }) {\n    return {\n      [key]: value || id\n    }\n  }\n}\n","\nconst FIELD_TYPES = {\n  bool: 'SwitchField'\n}\n\nexport class FormField {\n  get TEMPLATE () {\n    return /* html */ `\n    <ui:fragment>\n      <ui:tag tag={fieldType} ui:props={fieldProps} onChange={onChange}/>\n    </ui:fragment>`\n  }\n\n  onChange ({ value }) {\n    const form = this.form\n    const field = this.field\n    const id = field.id\n    form.data = { ...form.data, [id]: value }\n    form.change && form.change(form.data)\n  }\n\n  get fieldType () {\n    const type = this.field.type || 'text'\n    return FIELD_TYPES[type] || (String.capitalize(type) + 'Field')\n  }\n\n  get fieldProps () {\n    const field = this.field\n    const form = this.form\n    const id = field.id\n    const data = form.data || {}\n    const value = data[id]\n    return {\n      ...field,\n      error: (form.error && form.error.fields && form.error.fields[id]) || null,\n      get disabled () { return field.disabled && field.disabled(this.value, this.data) },\n      value: value === undefined ? null : value,\n      caption: field.caption || field.name,\n      data\n    }\n  }\n}\n\nexport class Form {\n  get TEMPLATE () {\n    return /* html */ `\n    <div autocomplete=\"off\" class=\"form-horizontal\">\n        <FormField ui:for=\"field of fields\" field={field} form={form}/>\n    </div>`\n  }\n\n  getForm () {\n    return this\n  }\n\n  getFields () {\n    return this.fields || Object.keys(this.data).map(id => ({ id, caption: id }))\n  }\n}\n","import { Service } from './services'\n\nexport class NavigationService extends Service {\n  init () {\n    this.prevHash = ''\n    this.hashchange = () => {\n      const hash = window.location.hash.slice(1)\n      if (hash[0] === '/' && hash !== this.prevHash) {\n        this.emit('this.hash', { value: hash.slice(1) })\n        this.prevHash = hash\n      } else if (!this.prevHash) {\n        this.emit('this.hash', { value: 'main' })\n        this.prevHash = '/main'\n      }\n    }\n    window.addEventListener('hashchange', this.hashchange)\n    setTimeout(() => this.hashchange(), 0)\n  }\n\n  done () {\n    window.removeEventListener('hashchange', this.hashchange)\n  }\n\n  update (d) {\n    const { target, path = ['*'], params } = Object.urlParse(d)\n    const state = {\n      target: (!target || target === '*' ? this.target : target) || 'main',\n      path: path[0] === '*' ? this.path : path,\n      params: params.reset ? { ...params, reset: null } : { ...this.params, ...params }\n    }\n    window.location.hash = this.prevHash = '/' + Object.urlStringify(state)\n    return state\n  }\n\n  getRoute () {\n    return {\n      target: this.target,\n      path: this.path,\n      params: this.params\n    }\n  }\n\n  onHash ({ value }) { return this.update(value) }\n  onParams (params) { return this.update({ params: { ...params, data: null } }) }\n}\n","import { Service } from './services'\n\nexport class ServiceWorker extends Service {\n  get api () {\n    return navigator.serviceWorker\n  }\n\n  init () {\n    try {\n      Function.assert(this.api, 'Service Workers are not supported')\n\n      const { source = '/service-worker.js', scope = '/', push } = this\n\n      this.api.register(source, { scope })\n        .then((registration) => this.registered(registration))\n        .then(() => this.ready(() => this.log('Service Worker Ready')))\n\n      this.api.addEventListener('message', ev => this.onMessage(ev))\n\n      if (push) {\n        this.subscribe()\n      }\n    } catch (error) {\n      this.fallback(error)\n    }\n  }\n\n  // ensures that `fn` executed when api is ready\n  ready (fn) {\n    return this.api.ready.then(fn)\n  }\n\n  fallback (error) {\n    this.log(error)\n  }\n\n  // hook on registered\n  registered (registration) {\n    this.log('Service Worker Registered')\n    return registration\n  }\n  /**\n     * Push\n     */\n\n  withPushManager (fn) {\n    return this.ready(({ pushManager }) => pushManager).then(fn)\n  }\n\n  unsubscribe () {\n    this.withPushManager(pushManager => pushManager.getSubscription())\n      .then((ss) => ss && ss.unsubscribe())\n      .then(() => this.saveSubscription())\n      .catch(function (e) {\n        console.log('Error thrown while unsubscribing from  push messaging.', e)\n      })\n  }\n\n  subscribe () {\n    function urlBase64ToUint8Array (base64String) {\n      const padding = '='.repeat((4 - base64String.length % 4) % 4)\n      const base64 = (base64String + padding)\n        .replace(/-/g, '+')\n        .replace(/_/g, '/')\n\n      const rawData = window.atob(base64)\n      return Uint8Array.from([...rawData].map((char) => char.charCodeAt(0)))\n    }\n    if (Notification.permission === 'granted') {\n      /* do our magic */\n    } else if (Notification.permission === 'blocked') {\n      /* the user has previously denied push. Can't reprompt. */\n    } else {\n      /* show a prompt to the user */\n    }\n    const applicationServerKey = urlBase64ToUint8Array(this.vapidPublicKey)\n    this.withPushManager(pushManager => pushManager.getSubscription()\n    // .then((ss) => ss && ss.unsubscribe())\n      .then(ss => ss || pushManager.subscribe({\n        userVisibleOnly: true,\n        applicationServerKey\n      }))\n      .then((subscription) => this.saveSubscription(subscription.toJSON()))\n      .catch((err) => {\n        if (Notification.permission === 'denied') {\n          this.log('The user has blocked notifications.')\n        }\n        this.handleError(err)\n      })\n    )\n  }\n\n  // to be overriden from props\n  saveSubscription (ss) {\n    this.subscription = ss\n  }\n\n  /**\n     * Intercommunication between service worker.\n     */\n\n  // handles a message posted from Service worker.\n  onMessage (payload) {\n    this.log('onMessage', payload)\n  }\n}\n","export class Delay {\n  init () {\n    setTimeout(() => { if (!this.isDone) { this.action(this.data) } }, (this.period || 5) * 1000)\n  }\n}\n\nexport class Invoke {\n  init () {\n    this.action(this.data)\n  }\n}\n\nexport class Loader {\n  init () {\n    this.reload()\n  }\n\n  setTrigger (val) {\n    this.trigger = val\n    this.reload()\n  }\n\n  reload () {\n    const { from, data, into } = this\n    if (from && into) {\n      from({ ...data, callback: (error, result) => into({ error, ...result }) })\n    }\n  }\n}\n","export default \"<component id=\\\"Icon\\\">\\n    <i class=\\\"fa{bundle|or:s} fa-{type} {class}\\\" style={style} data={data} click={click}></i>\\n</component>\\n\\n<component id=\\\"Img\\\">\\n    <img src={src|or:@default} alt={alt} class=\\\"img {class}\\\" style={style} />\\n</component>\\n\\n<component id=\\\"Avatar\\\">\\n    <figure class=\\\"avatar {large|then:avatar-lg}\\\">\\n        <Img src={src}\\n             alt={alt}\\n             default=\\\"data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==\\\" />\\n    </figure>\\n</component>\\n\\n<component id=\\\"Button\\\">\\n    <button class=\\\"btn btn-{mode} {primary|then:btn-primary} {disabled|or:@busy|then:disabled} {class} {large|then:btn-lg} {link|then:btn-link} c-hand\\\"\\n            style={style}\\n            data={data}\\n            click={action|track:@trackId:@caption}>\\n        <i ui:if={busy} class=\\\"loading mx-2\\\"></i>\\n        <Icon ui:if={icon} bundle={iconBundle} type={icon} class=\\\"mx-2\\\" />\\n        <span ui:if={caption} style=\\\"white-space:nowrap; overflow: hidden; text-overflow: ellipsis;\\\">{caption}</span>\\n    </button>\\n</component>\\n\\n<component id=\\\"FAB\\\">\\n    <button class=\\\"btn2 {tooltip|then:tooltip} tooltip-left fixed bg-primary circle c-hand {class}\\\"\\n            style=\\\"position: fixed;border:none; right:1.5rem; bottom:1.5rem; width: 2.5rem; height: 2.5rem; z-index:5;\\\"\\n            data={data} data-tooltip={tooltip|or:} click={action|track:@trackId:big}>\\n        <Icon type={icon|or:plus} />\\n    </button>\\n</component>\\n\\n<component id=\\\"Modal\\\">\\n    <div class=\\\"modal modal {open|then:active}\\\">\\n        <a class=\\\"modal-overlay\\\" aria-label=\\\"Close\\\" data={data} click={close}></a>\\n        <div class=\\\"modal-container\\\">\\n            <div class=\\\"modal-header\\\">\\n                <a class=\\\"btn btn-clear float-right\\\" aria-label=\\\":close\\\" data={data} click={close}></a>\\n                <div class=\\\"modal-title h5\\\" ui:if={title}>{title}</div>\\n                <ui:slot id=\\\"header\\\" />\\n            </div>\\n            <div class=\\\"modal-body\\\" style=\\\"max-height: 70vh;\\\">\\n                <div class=\\\"content\\\">\\n                    <ui:slot />\\n                </div>\\n            </div>\\n            <div class=\\\"modal-footer\\\">\\n                <ui:slot id=\\\"footer\\\" />\\n            </div>\\n        </div>\\n    </div>\\n</component>\\n\\n<component id=\\\"Tabs\\\">\\n    <ul class=\\\"tab tab-block\\\">\\n        <li class=\\\"tab-item {item.id|equals:@value|then:active} c-hand\\\" ui:for=\\\"item of items\\\">\\n            <a data={data} data-id={item.id} click={action}>\\n                <Icon ui:if={item.icon} type={item.icon} bundle={item.iconBundle} class=\\\"mx-2\\\" />\\n                {item.name}\\n            </a>\\n        </li>\\n    </ul>\\n</component>\";","export default \"<component id=\\\"FieldItem\\\">\\n    <div class=\\\"columns form-group {error|then:has-error} {class}\\\">\\n        <div class=\\\" col-4 col-sm-12\\\">\\n            <label class=\\\"form-label\\\" for=\\\"input-example-1\\\">\\n                {caption}\\n                <sup ui:if={required}\\n                     class=\\\"text-error\\\">âœ±</sup>\\n            </label>\\n        </div>\\n        <div class=\\\"col-8 col-sm-12\\\">\\n            <ui:slot />\\n            <p class=\\\"form-input-hint\\\" ui:if={error}>{error}</p>\\n        </div>\\n    </div>\\n</component>\\n\\n<component id=\\\"TextField\\\">\\n    <FieldItem caption={caption} error={error} required={required}>\\n        <input class=\\\"form-input\\\"\\n               type=\\\"text\\\"\\n               disabled={disabled}\\n               placeholder={placeholder|or:@caption}\\n               value={value}\\n               change={onChange}>\\n    </FieldItem>\\n</component>\\n\\n<component id=\\\"DateField\\\">\\n    <FieldItem caption={caption} error={error} required={required}>\\n        <input class=\\\"form-input\\\"\\n               disabled={disabled}\\n               type=\\\"date\\\"\\n               placeholder={caption}\\n               value={value}\\n               change={onChange}>\\n    </FieldItem>\\n</component>\\n\\n<component id=\\\"DateTimeField\\\">\\n    <FieldItem caption=\\\"{caption}\\\" error={error} required={required}>\\n        <input class=\\\"form-input\\\"\\n               disabled={disabled}\\n               type=\\\"datetime-local\\\"\\n               placeholder={caption}\\n               value={value|date:yyyy-mm-ddTt}\\n               change={onChange}>\\n    </FieldItem>\\n</component>\\n\\n<component id=\\\"NumberField\\\">\\n    <FieldItem caption={caption} error={error} required={required}>\\n        <input class=\\\"form-input\\\"\\n               disabled={disabled}\\n               type=\\\"number\\\"\\n               placeholder={caption}\\n               value={value}\\n               change={onChange}>\\n    </FieldItem>\\n</component>\\n\\n<component id=\\\"TextareaField\\\">\\n    <FieldItem caption={caption} error={error} required={required}>\\n        <textarea\\n                  class=\\\"form-input\\\"\\n                  style=\\\"min-height: 15vw\\\"\\n                  disabled={disabled} placeholder={caption} rows=\\\"3\\\" change={onChange} value={value}></textarea>\\n    </FieldItem>\\n</component>\\n\\n<component id=\\\"SwitchField\\\">\\n    <div class=\\\"form-group\\\">\\n        <div class=\\\"col-sm-12\\\">\\n            <label class=\\\"form-switch\\\">\\n                <span>{caption}</span>\\n                <input type=\\\"checkbox\\\" toggle={onChange} data={data} checked={value|not|not}>\\n                <i class=\\\"form-icon\\\"></i>\\n            </label>\\n        </div>\\n    </div>\\n</component>\\n\\n<component id=\\\"EnumField\\\">\\n    <FieldItem caption={caption} class={class} error={error} required={required}>\\n        <Select class=\\\"form-select\\\"\\n                change={onChange}\\n                value={value|or:@defaultValue}\\n                data={data}\\n                options=\\\":enums.{typeSpec}\\\"\\n                emptyCaption={emptyCaption}\\n                disabled={disabled} />\\n    </FieldItem>\\n</component>\\n\\n<component id=\\\"SelectField\\\">\\n    <FieldItem caption={caption} class={class} error={error} required={required}>\\n        <Select class=\\\"form-select\\\"\\n                change={onChange}\\n                value={value|or:@defaultValue}\\n                data={data}\\n                options={options}\\n                emptyCaption={emptyCaption}\\n                disabled={disabled} />\\n    </FieldItem>\\n</component>\\n\\n<component id=\\\"RadioField\\\">\\n    <FieldItem caption={caption} error={error} required={required}>\\n        <RadioGroup change={onChange}\\n                    value={value} data={data} options=\\\":enums.{typeSpec}\\\"\\n                    disabled={disabled} />\\n    </FieldItem>\\n</component>\\n\\n<component id=\\\"ReferenceField\\\">\\n    <FieldItem caption={caption} error={error} required={required}>\\n        <Loader from=\\\"-> references.{typeSpec}Search\\\"\\n                data-value={keyword.value|orDataPropValueByKey:keyword}\\n                trigger={keyword.value}\\n                into=\\\"->options\\\" />\\n        <Loader from=\\\"-> references.{typeSpec}Entry\\\" data-id={value} trigger={value} into=\\\"->entry\\\" />\\n        <ReferenceInput change={onChange}\\n                        value={value} entry={entry.data}\\n                        onKeyword=\\\"->keyword\\\" keyword={keyword.value|orDataPropValueByKey:keyword}\\n                        onSelectMenuItem=\\\"->entry\\\"\\n                        options={options.data}\\n                        disabled={disabled} />\\n    </FieldItem>\\n</component>\\n\\n<component id=\\\"RemoteEnumField\\\">\\n    <FieldItem caption={caption} error={error} required={required}>\\n        <Loader from=\\\"-> references.{typeSpec}Enum\\\" data={data} into=\\\"->options\\\" />\\n        <Select class=\\\"form-select\\\" change={onChange} value={value} data={options.data} disabled={disabled} />\\n    </FieldItem>\\n</component>\";","import * as effectsTypes from './effects.js'\n\nimport elements from './elements.html'\nimport table from './table.html'\nimport inputs from './inputs.html'\nimport fields from './fields.html'\nimport layouts from './layouts.html'\nimport viewport from './viewport.html'\nimport { NavigationService } from './NavigationService'\nimport { ServiceWorker } from './ServiceWorker'\nimport { pipes } from 'ultimus'\nimport * as formTypes from './Form'\n\nimport * as services from './services'\n\nexport const commons = {\n  pipes,\n  types: [\n    ServiceWorker,\n    NavigationService,\n    ...Object.values(effectsTypes),\n    ...Object.values(formTypes),\n    ...Object.values(services),\n    elements, table, fields, viewport, layouts, inputs\n  ]\n}\n\nif (typeof window === 'object') {\n  window.commons = commons\n}\n","export default \"<component id=\\\"Select\\\">\\n    <select class=\\\"{class}\\\" change={change} disabled={disabled} data={data}>\\n        <option selected={value|not} value=\\\"\\\" ui:if={value|not|or:@emptyCaption}>{emptyCaption}</option>\\n        <option ui:for=\\\"option of options\\\" selected={option.id|equals:@value} value={option.id}>\\n            {option.name}\\n        </option>\\n    </select>\\n</component>\\n\\n<component id=\\\"RadioGroup\\\">\\n    <div class=\\\"{class}\\\">\\n        <label class=\\\"form-radio\\\" ui:for=\\\"option of options\\\">\\n            <input type=\\\"radio\\\" name={id|or:rg}\\n                   value={option.id}\\n                   checked={option.id|equals:@value} change={change} data={data}\\n                   disabled={disabled}>\\n            <i class=\\\"form-icon\\\"></i>{option.name}\\n        </label>\\n    </div>\\n</component>\\n\\n<component id=\\\"Dropdown\\\">\\n    <div class=\\\"dropdown\\\">\\n        <a href=\\\"#\\\" class=\\\"btn btn-link dropdown-toggle\\\" tabindex=\\\"0\\\">\\n            {data|selectedName}<i class=\\\"icon icon-caret\\\"></i>\\n        </a>\\n        <!-- menu component -->\\n        <ul class=\\\"menu\\\" style=\\\"right:0;left:auto;\\\">\\n            <li ui:for=\\\"item of data\\\" class=\\\"menu-item {item.id|equals:@value|then:active}\\\"\\n                data-id={item.id}\\n                data-name={item.name}\\n                click={change}>\\n                <a>{item.name}</a>\\n            </li>\\n        </ul>\\n    </div>\\n</component>\\n\\n<component id=\\\"DateTimeInput\\\">\\n    <input class=\\\"form-input flatpickr-input\\\"\\n           init={:support.initFlatpickr}\\n           disabled={disabled}\\n           type=\\\"text\\\"\\n           placeholder={placeholder}\\n           value={value|support.setFlatpickrValue}\\n           change={change}>\\n</component>\\n\\n<component id=\\\"SearchBar\\\">\\n    <span class=\\\"ant-input-search ant-input-affix-wrapper\\\">\\n        <input placeholder=\\\"ÐŸÐ¾Ð¸ÑÐº...\\\" class=\\\"ant-input\\\" type=\\\"text\\\"\\n               value={value} enter={action}\\n               style=\\\"min-height:40px;\\\">\\n        <span class=\\\"ant-input-suffix\\\">\\n            <i class=\\\"anticon anticon-search ant-input-search-icon\\\" style=\\\"margin-top: 4px;\\\"></i>\\n        </span>\\n    </span>\\n</component>\\n\\n<component id=\\\"ReferenceInput\\\">\\n    <div class=\\\"form-autocomplete\\\">\\n        <div class=\\\"form-input has-icon-right\\\" data-showMenu={showMenu|not} click=\\\"->\\\">\\n            <div>{entry.fullNameRu}</div>\\n            <i class=\\\"form-icon icon icon-edit c-hand\\\"></i>\\n        </div>\\n        <Modal ui:if={showMenu} open=\\\"true\\\" title=\\\"Ð’Ñ‹Ð±Ð¾Ñ€ Ð¾Ð¿Ñ†Ð¸Ð¸ {title}\\\" data-showMenu=\\\"false\\\" close=\\\"->\\\">\\n            <div class=\\\"menu\\\" style=\\\"position:sticky;top:-20;z-index:101; border-bottom: none; box-shadow: unset\\\">\\n                <div class=\\\"form-group has-icon-right\\\">\\n                    <input class=\\\"form-input\\\" type=\\\"text\\\"\\n                           value={keyword} placeholder=\\\"search...\\\" change={onKeyword}>\\n                    <i class=\\\"form-icon icon icon-cross c-hand\\\" data-value=\\\"\\\" click={onKeyword}></i>\\n                </div>\\n                <div ui:if={options} class=\\\"menu-item\\\">\\n                    <div class=\\\"tile tile-centered mx-1\\\">\\n                        <b class=\\\"tile-content\\\">ÐÐ°Ð¹Ð´ÐµÐ½Ð¾: {options.length}</b>\\n                    </div>\\n                </div>\\n            </div>\\n            <ul class=\\\"menu\\\" style=\\\"position:unset; border-top: none; box-shadow: unset\\\">\\n                <li class=\\\"menu-item\\\" ui:for=\\\"item of options\\\" data-showMenu=\\\"false\\\" click=\\\"->\\\">\\n                    <div click={change} data-value={item.id}>\\n                        <div class=\\\"tile tile-centered mx-1\\\">\\n                            <figure class=\\\"avatar avatar-xs bg-primary\\\" data-initial={item.fullNameRu|initials}>\\n                            </figure>\\n                            <div class=\\\"tile-content\\\">{item.fullNameRu}, {item.birthday|date}</div>\\n                        </div>\\n                    </div>\\n                </li>\\n            </ul>\\n        </Modal>\\n    </div>\\n</component>\";","export default \"<component id=\\\"Panel\\\">\\n    <h6 class=\\\"mt-2 pt-2 px-2 text-gray\\\" ui:if=\\\"caption\\\">{caption}</h6>\\n    <div class=\\\"panel {class}\\\" style={style}>\\n        <small class=\\\"p-2 bg-secondary\\\" ui:if={hint}>{hint}</small>\\n        <div class=\\\"panel-header\\\" ui:if=\\\"slot(title)\\\">\\n            <div class=\\\"panel-title\\\">\\n                <ui:slot id=\\\"title\\\" key=\\\"panel-title\\\" />\\n            </div>\\n        </div>\\n        <div class=\\\"panel-nav\\\" ui:if=\\\"slot(nav)\\\">\\n            <ui:slot id=\\\"nav\\\" />\\n        </div>\\n        <div class=\\\"panel-body p-2\\\">\\n            <ui:slot />\\n        </div>\\n        <div class=\\\"panel-footer\\\" ui:if=\\\"slot(footer)\\\">\\n            <ui:slot id=\\\"footer\\\" />\\n        </div>\\n    </div>\\n</component>\\n\\n<component id=\\\"Grid\\\">\\n    <div class=\\\"columns {class}\\\">\\n        <ui:slot />\\n    </div>\\n</component>\\n\\n<component id=\\\"Col\\\">\\n    <div class=\\\"col-{size|or:6} col-sm-12 {class}\\\">\\n        <ui:slot />\\n    </div>\\n</component>\\n<component id=\\\"Centroid\\\">\\n    <div class=\\\"{class}\\\" style=\\\"display: flex;align-items: center;justify-content: center;{style}\\\">\\n        <ui:slot />\\n    </div>\\n</component>\\n\\n<component id=\\\"FlexBox\\\">\\n    <div class=\\\"{class}\\\" style=\\\"display: flex;align-items: stretch;justify-content:space-around;{style}\\\">\\n        <ui:slot />\\n    </div>\\n</component>\\n\\n<component id=\\\"Tile\\\">\\n    <div class=\\\"tile {centered|then:tile-centered} m-2 {class}\\\">\\n        <div class=\\\"tile-icon\\\" ui:if={image}>\\n            <Avatar src={image} />\\n        </div>\\n        <div class=\\\"tile-icon\\\" ui:if={icon}>\\n            <Icon type={icon} />\\n        </div>\\n        <div class=\\\"tile-content\\\">\\n            <div class=\\\"tile-title text-bold\\\" ui:if={title}>{title}</div>\\n            <div class=\\\"tile-subtitle\\\" ui:if={subtitle}>{subtitle}</div>\\n            <ui:slot />\\n        </div>\\n        <div class=\\\"tile-action btn-group\\\" ui:if=\\\"slot(actions)\\\">\\n            <ui:slot id=\\\"actions\\\" />\\n        </div>\\n    </div>\\n</component>\\n\\n\\n<component id=\\\"Card\\\">\\n    <div class=\\\"card\\\" style={style}>\\n        <div class=\\\"card-image\\\" ui:if={image}>\\n            <img src={image} class=\\\"img-responsive\\\" />\\n        </div>\\n        <div class=\\\"card-header\\\">\\n            <a ui:if={title} href={link}>\\n                <h5 class=\\\"card-title\\\">{title}</h5>\\n            </a>\\n            <div ui:if={subtitle} class=\\\"card-subtitle text-gray\\\">{subtitle}</div>\\n            <ui:slot id=\\\"header\\\" />\\n        </div>\\n        <div class=\\\"card-body\\\">\\n            <ui:slot />\\n        </div>\\n        <div class=\\\"card-footer\\\">\\n            <ui:slot id=\\\"footer\\\" />\\n        </div>\\n    </div>\\n</component>\\n\\n<component id=\\\"Popover\\\">\\n    <div class=\\\"popover popover-right\\\">\\n        <ui:slot />\\n        <div class=\\\"popover-container\\\">\\n            <div class=\\\"card\\\">\\n                <div class=\\\"card-header\\\">\\n                    <ui:slot id=\\\"body\\\" />\\n                </div>\\n            </div>\\n        </div>\\n    </div>\\n</component>\";","export class Service {\n  constructor (state, $) {\n    this.state = state\n    this.$ = $\n  }\n\n  /**\n   * Framework\n   */\n  lookupService (ref) {\n    return this.$.app && this.$.app[ref] ? this.$.app[ref].impl : null\n  }\n\n  up (...args) {\n    return this.$.up(...args)\n  }\n\n  defer (...args) {\n    return this.$.defer(...args)\n  }\n\n  emit (...args) {\n    return this.$.emit(...args)\n  }\n\n  log (...args) {\n    console.log(this.$.ref + ': ', ...args)\n    return args[0]\n  }\n\n  /**\n   * Error handling\n   */\n\n  handleError ({ message = '', code = '' }) {\n    // may  overriden from props\n    const handler = this.lookupService('errorHandler')\n    if (handler) {\n      handler.handleError({ message, code, source: this.$.ref })\n    } else {\n      console.error(this.$.ref + ': ERROR: ', message, code)\n    }\n  }\n\n  safe (p, def) {\n    return p.catch(error => {\n      this.handleError(error)\n      return def ? def(error) : { error }\n    })\n  }\n\n  onClearError () {\n    return { error: null }\n  }\n}\n\nexport class ErrorHandlingService extends Service {\n  handleError ({ message = '', code, source = {} }) {\n    this.show({ message: source + ': ' + message, code, mode: 'error' })\n  }\n\n  show ({ message = '', code = '', source }) {\n    console.error(source + ': ERROR: ', code, message)\n  }\n}\n\nexport class ToastService extends Service {\n  onSend ({ data }) {\n    return {\n      top: { ...data, close: () => this.emit('this.close'), closeAfter: 5 }\n    }\n  }\n\n  onClose () {\n    return {\n      top: null\n    }\n  }\n}\n","export default \"<component id=\\\"LoadingIndicator\\\">\\n    <div class=\\\"loading {large|then:loading-lg} {class}\\\" />\\n</component>\\n\\n<component id=\\\"EmptyData\\\">\\n    <div class=\\\"empty {class}\\\">\\n        <div class=\\\"empty-icon\\\">\\n            <Icon type={icon|or:people} />\\n        </div>\\n        <p class=\\\"empty-title h5\\\">{title}</p>\\n        <p ui:if={subtitle} class=\\\"empty-subtitle\\\">{subtitle}</p>\\n        <div class=\\\"empty-action\\\">\\n            <ui:slot />\\n        </div>\\n    </div>\\n</component>\\n\\n<component id=\\\"LoadableItems\\\">\\n    <LoadingIndicator class=\\\"empty\\\" ui:if=\\\"data|not\\\">\\n        <ui:else>\\n            <h5 class=\\\"error text-error\\\" ui:if=\\\"data.error\\\">{data.error.message|or:@data.error}</h5>\\n            <EmptyData title={emptyCaption|or:Empty} ui:if=\\\"data.length|not\\\">\\n                <ui:else>\\n                    <div style={style} ui:for=\\\"item of data\\\">\\n                        <ui:tag tag={itemType} ui:props={item} item={item} context={context} action={action} />\\n                    </div>\\n                </ui:else>\\n            </EmptyData>\\n        </ui:else>\\n    </LoadingIndicator>\\n</component>\\n\\n<component id=\\\"LoadableEntity\\\">\\n    <LoadingIndicator class=\\\"empty\\\" ui:if=\\\"data|not\\\">\\n        <ui:else>\\n            <h5 class=\\\"error text-error\\\" ui:if=\\\"data.error\\\">\\n                <span>{data.error.message|or:@data.error}</span>\\n                <ui:else>\\n                    <EmptyData title={emptyCaption|or:Empty} ui:if=\\\"data.id|not\\\">\\n                        <ui:else>\\n                            <ui:tag tag={type} data={data} context={context} action={action} />\\n                        </ui:else>\\n                    </EmptyData>\\n                </ui:else>\\n            </h5>\\n        </ui:else>\\n    </LoadingIndicator>\\n</component>\\n\\n<component id=\\\"Cell\\\">\\n    <span class=\\\"\\\" style=\\\"padding-left: 0px;\\\">{value}</span>\\n</component>\\n\\n<component id=\\\"EnumCell\\\">\\n    <span class=\\\"\\\"\\n          style=\\\"padding-left: 0px;\\\">:map.{typeSpec}.{value}</span>\\n</component>\\n\\n<component id=\\\"DateCell\\\">\\n    <span class=\\\"\\\" style=\\\"padding-left: 0px;\\\">{value|date}</span>\\n</component>\\n\\n<component id=\\\"Table\\\">\\n    <table style=\\\"position: relative;\\\">\\n        <thead class=\\\"table-thead\\\">\\n            <tr>\\n                <th class=\\\"col-index\\\" style=\\\"position: sticky; top: -1;\\\"></th>\\n                <th class=\\\"col-index\\\" style=\\\"position: sticky; top: -1;\\\" ui:for=\\\"item of columns\\\">\\n                    <span>{item.name}</span>\\n                    <div class=\\\"table-column-sorter\\\" ui:if=\\\"item.sortable\\\">\\n                        <span class=\\\"table-column-sorter-up off\\\" title=\\\"â†‘\\\" data-id=\\\"-{item.id}\\\"\\n                              click={doSort}><i class=\\\"anticon anticon-caret-up\\\"></i></span>\\n                        <span class=\\\"table-column-sorter-down off\\\" title=\\\"â†“\\\" data-id={item.id} click={doSort}><i\\n                               class=\\\"anticon anticon-caret-down\\\"></i></span>\\n                    </div>\\n                </th>\\n            </tr>\\n        </thead>\\n        <TableRow ui:for=\\\"item of data\\\" data={item} selected={item.selected} columns={columns} kind={kind} />\\n    </table>\\n</component>\\n\\n<component id=\\\"TableRow\\\">\\n    <tbody class=\\\"table-tbody\\\">\\n        <tr class=\\\"table-row table-row-level-0\\\" style=\\\"position:sticky;\\\">\\n            <td class=\\\"col-index\\\" data-id={data.id} click={doItem}>\\n                <div ui:if={expandable}\\n                     role=\\\"button\\\"\\n                     class=\\\"table-row-expand-icon table-row-expanded\\\"\\n                     aria-label=\\\"Collapse row\\\"\\n                     data-selected=\\\"false\\\" click=\\\"->\\\">\\n                    <ui:else>\\n                        <div role=\\\"button\\\"\\n                             class=\\\"table-row-expand-icon table-row-collapsed\\\"\\n                             aria-label=\\\"Expand row\\\"\\n                             data-selected=\\\"true\\\" click=\\\"->\\\"></div>\\n                    </ui:else>\\n                </div>\\n            </td>\\n            <td class=\\\"col-index\\\" ui:for=\\\"col of columns\\\">\\n                <ui:tag tag=\\\"{col.type|str.capitalize}Cell\\\" ui:props={col} value={col.id|propObjectValueByKey}\\n                        data={data} />\\n            </td>\\n        </tr>\\n        <tr ui:if={expanded} class=\\\"table-expanded-row table-expanded-row-level-1\\\">\\n            <td class=\\\"\\\"></td>\\n            <td class=\\\"\\\" colspan=\\\"100\\\">\\n                <ui:tag tag=\\\"{kind|str.capitalize}RowInsider\\\" data={data} />\\n            </td>\\n        </tr>\\n    </tbody>\\n</component>\";","export default \"<component id=\\\"ViewPort\\\">\\n    <ToastService ui:ref=\\\"toaster\\\" />\\n    <ErrorHandlingService ui:ref=\\\"errorHandler\\\" show=\\\"-> toaster.send\\\" />\\n    <ui:fragment ui:if=\\\"slot(aside)\\\">\\n        <Sidebar caption={caption} size={sidebarWidth}>\\n            <Sidebar:aside>\\n                <ui:slot id=\\\"aside\\\" />\\n            </Sidebar:aside>\\n            <main>\\n                <Toast event=\\\"<- toaster.top\\\" />\\n                <ui:slot />\\n            </main>\\n        </Sidebar>\\n        <ui:else>\\n            <main>\\n                <Toast event=\\\"<- toaster.top\\\" />\\n                <ui:slot />\\n            </main>\\n        </ui:else>\\n    </ui:fragment>\\n</component>\\n\\n<component id=\\\"Sidebar\\\">\\n    <div class=\\\"off-canvas off-canvas-sidebar-show\\\">\\n        <a class=\\\"off-canvas-toggle btn btn-primary btn-action show-lg bg-red\\\"\\n           href=\\\"#sidebar\\\">\\n            <Icon type=\\\"bars\\\" />\\n        </a>\\n        <div id=\\\"sidebar\\\" class=\\\"off-canvas-sidebar\\\">\\n            <Aside caption={caption}>\\n                <ui:slot id=\\\"aside\\\" />\\n            </Aside>\\n        </div>\\n        <a class=\\\"off-canvas-overlay\\\" href=\\\"#\\\"></a>\\n        <div class=\\\"off-canvas-content\\\">\\n            <ui:slot />\\n        </div>\\n    </div>\\n</component>\\n\\n<component id=\\\"Aside\\\">\\n    <aside style=\\\"display:flex; flex-direction: column; height: 100vh; width:{size|or:300}px\\\">\\n        <div class=\\\"text-center\\\" ui:if={caption}>\\n            <a href=\\\"#/main\\\">\\n                <h5 class=\\\"p-2\\\">{caption}</h5>\\n            </a>\\n        </div>\\n        <div class=\\\"m-2\\\" style=\\\"flex:1; overflow-y: auto;\\\">\\n            <ui:slot />\\n        </div>\\n    </aside>\\n</component>\\n\\n<component id=\\\"Navbar\\\">\\n    <header class=\\\"navbar {class}\\\" style=\\\"min-height:48px\\\">\\n        <section class=\\\"navbar-section\\\">\\n            <div class=\\\"mx-2\\\">\\n                <NavLink href={back} ui:if={back}>\\n                    <Button link class=\\\"text-primary\\\" icon=\\\"arrow-left\\\" title=\\\":action.back\\\" />\\n                </NavLink>\\n                <h4 class=\\\"m-1\\\" style=\\\"vertical-align: middle;\\\" ui:if={caption}>{caption}</h4>\\n                <ui:slot id=\\\"left\\\" />\\n            </div>\\n        </section>\\n        <section class=\\\"navbar-center\\\" ui:if={logo}>\\n            <img src={logo} style=\\\"max-height:44px;\\\" />\\n        </section>\\n        <section class=\\\"navbar-section\\\">\\n            <div class=\\\"mx-2\\\">\\n\\n                <ui:slot />\\n            </div>\\n\\n        </section>\\n    </header>\\n</component>\\n\\n<component id=\\\"NavTree\\\">\\n    <ul class=\\\"nav\\\">\\n        <li class=\\\"nav-item {item.class}\\\" ui:for=\\\"item of data\\\">\\n            <NavLink href={item.id}>\\n                <span>{item.name}</span>\\n                <span ui:if={item.label} class=\\\"label label-error\\\">{item.label}</span>\\n            </NavLink>\\n            <NavTree ui:if={item.subs} data={item.subs} />\\n        </li>\\n    </ul>\\n</component>\\n\\n<component id=\\\"NavLink\\\">\\n    <a data-value={href} click=\\\"-> nav.hash\\\" class=\\\"c-hand {class}\\\">\\n        <ui:slot />\\n    </a>\\n</component>\\n\\n<component id=\\\"PageRouter\\\">\\n    <ui:tag tag=\\\"{target|str.capitalize|or:Main}Page\\\" ui:props={params} params={params} />\\n</component>\\n\\n<component id=\\\"Toast\\\">\\n    <div class=\\\"toast toast-{event.mode|or:@mode|or:primary}\\\"\\n         style=\\\"position:absolute;top:1rem;right:1rem;left:1rem;{style}\\\"\\n         ui:if=\\\"event\\\">\\n        <button class=\\\"btn btn-clear float-right\\\" click={event.close}></button>\\n        <p>{event.message}</p>\\n        <Delay ui:if={event.closeAfter} action={event.close} period={event.closeAfter} />\\n    </div>\\n</component>\";","export * from './lib'\nexport * from './commons'\n","const RE_SINGLE_PLACEHOLDER = /^\\{([^}]+)\\}$/\nconst RE_PLACEHOLDER = /\\{([^}]+)\\}/g\n\nfunction pipe (value, key) {\n  const [id, ...args] = key.split(':')\n  try {\n    const fn = this.pipes(id)\n    const $ = this\n    return fn.apply($.impl, [value, ...args.map(a => a[0] === '@' ? $.container.get(a.slice(1)) : a)])\n  } catch (ex) {\n    console.error('ERROR: pipe ' + id, ex)\n    return value\n  }\n}\n\nexport function withPipes (pipes) {\n  return !pipes.length ? (c, v) => v : (c, initialValue) => pipes.reduce((r, pk) => pipe.call(c, r, pk), initialValue)\n}\n\nfunction stringInterpolation (v, fnx = []) {\n  const pattern = v.replace(RE_PLACEHOLDER, (_, expr) => { fnx.push(placeholder(expr)); return '{{' + (fnx.length - 1) + '}}' })\n  return c => !fnx.length ? pattern : pattern.replace(/\\{\\{(\\d+)\\}\\}/g, (s, idx) => {\n    const r = fnx[idx](c)\n    return !r && r !== 0 ? '' : r\n  })\n}\n\nfunction resourceExpression (expr) {\n  const [key, ...pipes] = expr.split('|').map(s => s.trim())\n  const intrpltn = stringInterpolation(key)\n  return !pipes.length ? c => c.res(intrpltn(c)) : (pipec => c => pipec(c, c.res(intrpltn(c))))(withPipes(pipes))\n}\n\nfunction placeholder (expr) {\n  const [key, ...pipes] = expr.split('|').map(s => s.trim())\n  if (!pipes.length) return key[0] === ':' ? c => c.res(key.slice(1)) : c => c.container.get(key)\n  return c => pipes.reduce((r, pk) => pipe.call(c, r, pk), c.container.get(key))\n}\n\nexport function compileExpression (v) {\n  if (typeof v !== 'string') { return () => v }\n  if (v[0] === ':') { return resourceExpression(v.slice(1).trim()) }\n  if (!v.includes('{')) { return () => v }\n  if (v.match(RE_SINGLE_PLACEHOLDER)) { return placeholder(v.slice(1, -1).trim()) }\n  return stringInterpolation(v)\n}\n","import { Node } from './node'\nimport { compileExpression } from './compile.expr'\nimport { parseXML } from './xml.js'\nimport { filterMapKey, hasSlot, wrapNode } from './utils'\n\nexport const compiledNodeMap = nodes => nodes ? nodes.map(compileNode).reduce((map, node) => map.set(node.uid, node), new Map()) : null\n\nexport function compileFor (r) {\n  const [itemName, prep, expr = prep] = r.extractAttr('ui:for').split(' ')\n  return compileNode(new Node(\n    'ui:for',\n    new Map([['items', '{:<'.includes(expr[0]) ? expr : `{${expr}}`]]),\n    [new Node(\n      'ui:item',\n      new Map([['itemName', itemName]]),\n      [r]\n    )]))\n}\n\nexport function compileIf (r) {\n  const { tag, nodes } = r\n  const [expr, attrs] = filterMapKey(r.attrs, 'ui:if')\n  const iff = {}\n  const ifNode = new Node('ui:fragment')\n  if (expr[0] === '<' && expr[1] === '-') {\n    ifNode.addPropertyConnector(expr, condition => ({ condition }))\n  } else if ((expr.slice(0, 5) === 'slot(')) {\n    ifNode.addPropertyResolver((slotId => c => hasSlot(c, slotId))(expr.slice(5, -1)), 'condition')\n  } else {\n    ifNode.addPropertyResolver(compileExpression(expr[0] === '{' ? expr : `{${expr}}`), 'condition')\n  }\n  const $then = new Node(tag, attrs, nodes)\n  if (nodes && nodes.length) {\n    const ifElse = nodes.find(e => e.tag === 'ui:else')\n    const ifThen = nodes.find(e => e.tag === 'ui:then')\n    if (ifElse) {\n      iff.else = compiledNodeMap(ifElse.nodes)\n      $then.nodes = ifThen ? ifThen.nodes : nodes.filter(e => e !== ifElse)\n    } else if (ifThen) {\n      $then.nodes = ifThen.nodes\n    }\n  }\n  iff.then = compiledNodeMap([$then])\n  return Object.assign(ifNode, {\n    getNodes: ($) => $.state.condition ? iff.then : iff.else\n  })\n}\n\nexport function compileTag (r) {\n  const { uid: uid0, nodes } = r\n  const [expr, attrs] = filterMapKey(r.attrs, 'tag')\n  const node = compileRegularNode(new Node('', attrs, nodes))\n  if (expr[0] === '<' && expr[1] === '-') {\n    r.addPropertyConnector(expr, tag => ({ tag }))\n  } else {\n    r.addPropertyResolver(compileExpression(expr), 'tag')\n  }\n  return Object.assign(r, {\n    tag: 'ui:fragment',\n    getNodes: ($, tag = $.state.tag, uid = uid0 + ':' + tag) => wrapNode(Object.assign(node, { tag, uid }))\n  })\n}\n\nexport function compileRegularNode (r) {\n  r.attrs.forEach((v, k) => {\n    if (k === 'id') {\n      r.id = v\n      r.addInitialState({ [k]: v })\n    } else if (k === 'ui:ref') {\n      r.refId = v\n    } else if (k === 'ui:props') {\n      if (v[0] === '<' && v[1] === '-') {\n        r.addPropertyConnector(v, Function.ID)\n      } else {\n        r.addPropertyResolver(compileExpression(v))\n      }\n    } else {\n      if (typeof v !== 'string') {\n        r.addInitialState({ [k]: v })\n      } else {\n        if (v[0] === '<' && v[1] === '-') {\n          r.addPropertyConnector(v, rr => ({ [k]: rr }))\n        } else if (v[0] === '-' && v[1] === '>') {\n          r.addEmitter(v, k)\n        } else {\n          if (!v.includes('{') && v[0] !== ':') {\n            r.addInitialState({ [k]: v })\n          } else {\n            r.addPropertyResolver(compileExpression(v), k)\n          }\n        }\n      }\n    }\n  })\n  return Object.assign(r, {\n    nodeMap: compiledNodeMap(r.nodes)\n  })\n}\nexport function compileNode (node) {\n  if (node.attrs.has('ui:for')) { return compileFor(node) }\n  if (node.attrs.has('ui:if')) { return compileIf(node) }\n  if (node.tag === 'ui:tag') { return compileTag(node) }\n  return compileRegularNode(node)\n}\n\nexport function compileTemplate (text, name) {\n  try {\n    const T = compiledNodeMap(text ? parseXML(text, name).nodes : [])\n    return T\n  } catch (ex) {\n    // eslint-disable-next-line no-console\n    console.error('compile ' + name, ex)\n  }\n  return []\n}\n","/* eslint-disable no-console */\nimport { applyValue, nextId, propGetter, upAsync, res, pipes, methodName } from './component.utils'\nimport { getByTag } from './register.js'\nimport { Element } from './element'\nimport { setNodeMap, stringifyComponent, filterSlotNodes, appendElt } from './utils.js'\n\n/**\n * Component class.\n */\nexport class Component {\n  constructor (Ctor, node, parent, container) {\n    Object.assign(this, { node, uid: node.uid, tag: node.tag, id: node.id, state: {}, parent, container })\n    if (parent) {\n      this.parent = parent\n      this.app = parent.app\n      this.impl = new Ctor(this.getInitialState(), this)\n    } else {\n      this.impl = this.app = new Ctor(this.getInitialState(), this)\n    }\n    this.impl.$ = this\n\n    if (this.refId) {\n      const hidden = this.app[this.refId]\n      this.app[this.refId] = this\n      this.defer(() => { this.app[this.refId] = hidden })\n    }\n  }\n\n  get refId () {\n    return this.node.refId\n  }\n\n  getInitialState () {\n    return this.node.resolveProps(this, true)\n  }\n  // --- State\n\n  up (Î” = {}, force) {\n    if (this.isDone) { return null }\n    if (Î”.then && Î”.catch) { return upAsync(this, Î”) }\n\n    const changes = []\n    Object.entries(Î”).forEach(([k, v]) => {\n      if (v && v.then && v.catch) {\n        upAsync(this, v, k)\n      } else if (k && typeof v !== 'undefined' && v !== this.state[k]) {\n        changes.push([v, k])\n        this.state[k] = v\n      }\n    })\n\n    if (changes.length || force || !this.isInited) {\n      this.stateChanged(changes)\n      if (this.refId) { this.notify() }\n    }\n  }\n\n  stateChanged (changes) {\n    if (this.impl.stateChanged) {\n      this.impl.stateChanged(changes)\n    } else {\n      changes.forEach(([v, k]) => {\n        const setter = this.impl[methodName(k, 'set')]\n        if (setter) {\n          setter.call(this.impl, v)\n        } else {\n          this.impl[k] = v\n        }\n      })\n    }\n    this.recontent()\n  }\n\n  get (propId) {\n    return propGetter(this, propId)()\n  }\n\n  // --- Left Arrow.\n\n  notify () {\n    if (this.listeners && !this.notifying) {\n      this.notifying = true\n      this.listeners.forEach(e => e())\n      this.notifying = false\n    }\n  }\n\n  subscribe (target, fn) {\n    const uuid = nextId()\n    const listeners = (this.listeners || (this.listeners = new Map()))\n    listeners.set(uuid, () => {\n      try {\n        target.up(fn(this))\n      } catch (ex) {\n        console.error(this.tag + this.uid + ' notify ', ex)\n      }\n    })\n    return { payload: fn(this), cancel: () => listeners.delete(uuid) }\n  }\n\n  connect (key, applicator) {\n    const [refId, propId] = key.split('.')\n    const ref = refId === 'this' ? this.impl : this.app[refId]\n    if (!ref) { return console.error('connect: No such ref ' + refId, key) }\n\n    return ref.subscribe(this, c => applyValue(c.get(propId), applicator))\n  }\n\n  // --- Right Arrow.\n\n  emit (key, data) {\n    const $ = this\n\n    if (!key || !key.includes('.')) {\n      return $.up(key ? { [key]: data } : data)\n    }\n\n    const [type, target] = key.split('.')\n    const event = { data, ...data }\n\n    const ref = type === 'this' ? $ : $.app[type]\n    if (!ref) {\n      console.warn('emit: No such ref ' + type)\n      return\n    }\n\n    try {\n      const propId = methodName(target, 'on')\n      const impl = ref.impl\n      const method = impl[propId]\n\n      if (!method) Function.throw('emit ' + type + ': No such method ' + propId)\n\n      const result = method.call(impl, event, impl, ref)\n\n      this.log(type + ':' + propId, result, data, impl)\n      if (result) { ref.up(result) }\n    } catch (ex) {\n      console.error('emit ' + key + ':', ex)\n    }\n  }\n\n  // --- Life-cycle hooks.\n\n  init () {\n    if (this.isDone || this.isInited) { return }\n    this.isInited = true\n    const initializers = this.node.initializers\n    if (initializers && initializers.length) {\n      const initials = (this.impl.init ? this.impl.init(this) : null) || {}\n      const all = []\n      initializers.map(f => f(this)).forEach(r => {\n        if (!r) return\n        const { payload, cancel } = r\n        this.defer(cancel)\n        if (payload && payload.then) {\n          all.push(payload)\n        } else {\n          Object.assign(initials, payload)\n        }\n      })\n      if (all.length) {\n        Promise.all(all).then((args) => this.up(args.reduce((r, e) => Object.assign(r, e), initials)))\n      } else {\n        this.up(initials)\n      }\n    } else {\n      if (this.impl.init) {\n        const d = this.impl.init(this)\n        if (d) { this.up(d) }\n      }\n    }\n    return this\n  }\n\n  done () {\n    if (this.isDone) { return }\n    this.isDone = true\n    if (this.impl.done) {\n      this.impl.done(this)\n    }\n    if (this.children) {\n      this.children.forEach(c => { c.parent = null; c.done() })\n    }\n    if (this.parent) {\n      this.parent.children.delete(this.uid)\n    }\n    if (this.defered) {\n      this.defered.forEach(f => f(this))\n      delete this.defered\n    }\n    this.impl.$ = null;\n    ['parent', 'app', 'children', 'container', 'impl', 'state'].forEach(k => { delete this[k] })\n  }\n\n  // --- Routines.\n\n  raceCondition (key) {\n    const COUNTERS = this.$weak || (this.$weak = new Map())\n    let counter = 1 + (COUNTERS.get(key) || 0)\n    COUNTERS.set(key, counter)\n    return (fn) => { if (counter === COUNTERS.get(key)) { counter = 0; fn() } }\n  }\n\n  defer (fn) {\n    if (fn && typeof fn === 'function') { (this.defered || (this.defered = [])).push(fn) }\n  }\n\n  log (...args) {\n    console.log('' + this.tag + '@' + this.uid, ...args)\n  }\n\n  res (key) {\n    return res(this.app, key)\n  }\n\n  pipes (key) {\n    return pipes(this.app, key)\n  }\n\n  toString () {\n    return stringifyComponent(this)\n  }\n\n  // --- Content Reconciliation.\n\n  get content () {\n    return this.node.getNodes ? this.node.getNodes(this) : this.node.nodeMap\n  }\n\n  recontent () {\n    recontent(this, this.container, this.content)\n  }\n}\nfunction arrangeElements ($, cursor = { elt: null, parent: $ }) {\n  let p = $.first\n  while (p) {\n    // TODO track this case\n    const e = p.impl && p.impl.elt\n    if (e) {\n      appendElt(e, cursor.parent.impl.elt, cursor.elt)\n      cursor.elt = e\n      if (p.requireReflow) {\n        arrangeElements(p, { elt: null, parent: e })\n      }\n    } else {\n      if (p.requireReflow) {\n        arrangeElements(p, cursor)\n      }\n    }\n    p = p.next\n  }\n}\n\nfunction recontent (parent, container, content) {\n  (parent.children || Array.EMPTY).forEach(c => !content || !content.has(c.uid) ? c.done() : 0)\n  parent.last = parent.first = null\n  if (!content || !content.size) return\n  const children = parent.children || (parent.children = new Map())\n  let p = null\n  content.forEach((node, uid) => {\n    let c = null\n    if (node.tag === 'ui:slot') {\n      const snode = node.clone(node.uid)\n      snode.id = node.id\n      snode.nodeMap = filterSlotNodes(node.id, container)\n      c = (children.get(uid) || setNodeMap(children, new FragmentComponent(getByTag('ui:fragment'), snode, parent, container.container)))\n    } else {\n      const Registered = getByTag(node.tag)\n      const Ctor = Ctors[node.tag] || (Registered ? ContainerComponent : ElementComponent)\n      c = (children.get(uid) || setNodeMap(children, new Ctor(Registered || Element, node, parent, container)))\n    }\n    p = (p || parent)[p ? 'next' : 'first'] = c\n  })\n  children.forEach(c => c.up(c.node.resolveProps(c, !c.isInited), true))\n  children.forEach(c => !c.isInited && c.init())\n\n  const app = container.app\n  if (!app.reflow) {\n    app.reflow = setTimeout(() => {\n      arrangeElements(app.$)\n      app.reflow = null\n    }, 1)\n  }\n  p = parent\n  while (p && !p.requireReflow) {\n    p.requireReflow = true\n    p = p.parent\n  }\n}\n\nexport class ContainerComponent extends Component {\n  recontent () {\n    recontent(this, this, this.impl.constructor.getTemplate())\n  }\n}\n\nclass ElementComponent extends Component {\n}\n\nclass FragmentComponent extends Component {\n}\n\nclass ForComponent extends Component {\n  recontent () {\n    const nodes = new Map()\n    const { items } = this.state\n    if (items && items.length) {\n      if (!items.forEach) Function.throw('[ui:for] Items has no forEach() ' + items)\n      const itemNode = this.node.nodes[0]\n      const itemName = itemNode.get('itemName')\n      items.forEach((d, index) => {\n        setNodeMap(nodes, itemNode.clone(`${d.id || index}`).addInitialState({ [itemName]: d, [itemName + 'Index']: index }))\n      })\n    }\n    recontent(this, this.container, nodes)\n  }\n}\n\nclass ItemComponent extends Component {\n  recontent () {\n    recontent(this, this, this.content)\n  }\n\n  emit (data) {\n    return this.container.emit(data)\n  }\n\n  get (propId) {\n    const itemName = this.state.itemName\n    const pk = propId.slice(0, itemName.length)\n    return pk === itemName ? super.get(propId) : this.container.get(propId)\n  }\n}\n\nconst Ctors = {\n  'ui:fragment': FragmentComponent,\n  'ui:for': ForComponent,\n  'ui:item': ItemComponent\n}\n","let COUNTER = 1\nconst fnId = e => e\nexport const nextId = (p = '') => p + (COUNTER++)\nexport const applyValue = (value, fn = fnId) => value && value.then ? value.then(fn) : fn(value)\n\nexport const methodName = (x, pre = '') => {\n  if (!x) { return pre }\n  const s = `${x}`\n  return pre + s[0].toUpperCase() + s.slice(1)\n}\n\nexport const upAsync = ($, promise, key) => {\n  const racer = $.raceCondition('set:' + (key || 'up'))\n  const up = r => racer(() => $.up(r))\n  if (key && key !== '...') {\n    const akey = key.replace('Promise', '')\n    promise.then(val => up({ [akey + 'Error']: null, [akey]: val }), error => up({ [akey + 'Error']: error }))\n  } else {\n    promise.then(up, error => up({ error }))\n  }\n  return promise\n}\n\nexport const propGetter = ($, key) => {\n  const map = $.$propFnMap || ($.$propFnMap = {})\n  let fn = map[key]\n  if (fn) { return fn }\n\n  const impl = $.impl\n  const instant = impl[key]\n  if (instant && (typeof instant === 'function')) {\n    const bound = instant.bind(impl)\n    fn = () => bound\n  } else {\n    const [pk, ...path] = key.split('.')\n    const gettr = impl[methodName(pk, 'get')]\n\n    const fn0 = gettr\n      ? () => gettr.call(impl)\n      : () => impl[pk]\n\n    fn = !path.length\n      ? fn0\n      : () => path.reduce((r, p) => (r && (p in r) ? r[p] : undefined), fn0())\n  }\n\n  map[key] = fn\n\n  return fn\n}\n\nexport const res = (app, key) => {\n  const [id, ...deep] = key.split('.')\n  const target = id === 'app' ? app : app.resources[id]\n  if (!target || deep.length === 0) {\n    return target\n  }\n  if (deep.length === 1) {\n    return target[deep[0]]\n  }\n  return deep.reduce((r, k) => r ? r[k] : null, target)\n}\n\nexport const pipes = (app, key) => {\n  const [id, ...deep] = key.split('.')\n  const target = app.pipes && app.pipes[id]\n  if (!target || deep.length === 0) {\n    return target\n  }\n  if (deep.length === 1) {\n    return target[deep[0]]\n  }\n  return deep.reduce((r, k) => r ? r[k] : null, target)\n}\n","const camelize = (key, sep = '_', jn = ' ') => ('' + key).split(sep).map((s, i) => i ? s[0].toUpperCase() + s.slice(1) : s).join(jn)\n\n// DOM\nconst ATTR_SETTERS = {\n  '#text': (e, v) => (e.textContent = v == null ? '' : v),\n  disabled: (e, v) => (e.disabled = v ? true : null),\n  class: (e, v) => {\n    e.className = v\n  },\n  selected: (e, v) => (e.selected = v ? true : null),\n  value: (e, v) => (e.value = v == null ? '' : v),\n  checked: (e, v) => (e.checked = !!v),\n  init: function (e, v) {\n    this.init = () => v(e, this)\n  },\n  data: function (e, v) {\n    if (v && e.$dataset) {\n      Object.keys(e.$dataset).forEach(k => { if (v[k] == null) { e.dataset[camelize(k, '-', '')] = null } })\n      e.$dataset = { ...e.$dataset, ...v }\n    } else {\n      e.$dataset = v ? { ...v } : (e.$dataset || {})\n    }\n    if (v) {\n      Object.keys(v).forEach(k => { e.dataset[camelize(k, '-', '')] = v[k] })\n    }\n  },\n  click: function (e, v) {\n    setAttribute.call(this, 'click:click', !v ? null : (ev) => {\n      this.$attributes.click({ ...e.$dataset }, ev)\n      return false\n    })\n  },\n  'bubble-click': function (e, v) {\n    setAttribute.call(this, 'bubbled-click:click', !v ? null : (ev) => {\n      this.$attributes['bubble-click']({ ...e.$dataset }, ev)\n      return true\n    })\n  },\n  blur: function (e, v) {\n    setAttribute.call(this, 'blur:blur', !v ? null : (ev) => {\n      this.$attributes.blur({ ...e.$dataset }, ev)\n      return false\n    })\n  },\n  dblclick: function (e, v) {\n    setAttribute.call(this, 'dblclick:dblclick', !v ? null : (ev) => {\n      this.$attributes.dblclick({ ...e.$dataset }, ev)\n      return false\n    })\n  },\n  scroll: function (e, v) {\n    setAttribute.call(this, 'scroll:scroll', !v ? null : (ev) => {\n      this.$attributes.scroll({ ...e.$dataset }, ev)\n      return false\n    })\n  },\n  touchstart: function (e, v) {\n    const h = !v ? null : (ev) => {\n      this.$attributes.touchstart({\n        ...e.$dataset,\n        x: ev.pageX || ev.changedTouches[0].screenX,\n        y: ev.pageY || ev.changedTouches[0].screenY\n      }, ev)\n      return false\n    }\n    setAttribute.call(this, 'touchstart:touchstart', h)\n    setAttribute.call(this, 'touchstart:mousedown', h)\n  },\n  touch: function (e, v) {\n    const data = { ...e.$dataset }\n    const hs = !v ? null : (ev) => {\n      data.active = true\n      data.x = ev.pageX || ev.changedTouches[0].screenX\n      data.y = ev.pageY || ev.changedTouches[0].screenY\n      return false\n    }\n    setAttribute.call(this, 'touch:touchstart', hs)\n    setAttribute.call(this, 'touch:mousedown', hs)\n    const h = !v ? () => null : stop => (ev) => {\n      if (data.active) {\n        data.active = !stop\n\n        data.xx = ev.pageX || ev.changedTouches[0].screenX\n        data.yy = ev.pageY || ev.changedTouches[0].screenY\n        data.dx = data.xx - data.x\n        data.dy = data.yy - data.y\n        this.$attributes.touch(data, ev)\n      }\n\n      return false\n    }\n    setAttribute.call(this, 'touch:touchcancel', h(true))\n    setAttribute.call(this, 'touch:touchend', h(true))\n    setAttribute.call(this, 'touch:mouseup', h(true))\n    setAttribute.call(this, 'touch:touchmove', h(false))\n    setAttribute.call(this, 'touch:mousemove', h(false))\n  },\n  error: function (e, v) {\n    setAttribute.call(this, 'error:error', !v ? null : (ev) => {\n      const fn = this.getAttribute('error')\n      fn && fn({ ...e.$dataset }, ev)\n      return false\n    })\n  },\n  keypress: function (e, v) {\n    setAttribute.call(this, 'keypress:keyup', !v ? null : (ev) => {\n      if (ev.keyCode !== 13 && ev.keyCode !== 27) {\n        const fn = this.$attributes.keypress\n        fn && fn({ value: e.value, ...e.$dataset }, ev)\n        setTimeout(() => e.focus(), 0)\n      }\n      return false\n    })\n  },\n  enter: function (e, v) {\n    setAttribute.call(this, 'enter:keyup', !v ? null : (ev) => {\n      if (ev.keyCode === 13) {\n        this.$attributes.enter({ value: e.value, ...e.$dataset }, ev)\n      }\n      if (ev.keyCode === 13 || ev.keyCode === 27) {\n        e.blur()\n      }\n      return false\n    })\n  },\n  change: function (e, v) {\n    setAttribute.call(this, 'change:change', !v ? null : (ev) => {\n      this.$attributes.change({ value: e.value, ...e.$dataset }, ev)\n      return false\n    })\n  },\n  toggle: function (e, v) {\n    setAttribute.call(this, 'toggle:change', !v ? null : (ev) => {\n      this.$attributes.toggle({ value: e.checked, ...e.$dataset }, ev)\n      return false\n    })\n  }\n}\n\nexport function applyAttributes (changes, attrs = this.$attributes || (this.$attributes = {})) {\n  const e = this.elt\n  changes.forEach(([value, key]) => {\n    if (value !== attrs[key]) {\n      const setter = ATTR_SETTERS[key]\n      if (setter) {\n        setter.call(this, e, value)\n      } else {\n        setAttribute.call(this, key, value)\n      }\n    }\n    attrs[key] = value\n  })\n}\n\nexport function cleanupAttributes () {\n  this.$attributes = null\n}\n\nfunction setAttribute (key, value) {\n  if (value != null) {\n    if (typeof value === 'function') {\n      const fnValue = (...args) => { if (!this.isDone) { value(...args) } }\n      if (!this.listeners) {\n        this.listeners = new Map()\n      }\n      if (!this.listeners.has(key)) {\n        const [akey, ekey = akey] = key.split(':')\n        this.elt.addEventListener(ekey, fnValue, false)\n        this.listeners.set(key, fnValue)\n      }\n    } else {\n      this.elt.setAttribute(key, value)\n    }\n  } else {\n    if (this.listeners && this.listeners.has(key)) {\n      const [akey, ekey = akey] = key.split(':')\n      this.elt.removeEventListener(ekey, this.listeners.get(key))\n      this.listeners.delete(key)\n    } else {\n      this.elt.removeAttribute(key)\n    }\n  }\n}\n","import { applyAttributes, cleanupAttributes } from './dom.attrs'\n\nexport class Element {\n  constructor (attrs, $, elt) {\n    this.$ = $\n    this.elt = elt || ($.tag === '#text' ? document.createTextNode('') : document.createElement($.tag))\n    this.elt.impl = this\n  }\n\n  done () {\n    this.elt.parentElement && this.elt.parentElement.removeChild(this.elt)\n    cleanupAttributes.call(this)\n    this.elt = null\n  }\n\n  stateChanged (attrs) {\n    applyAttributes.call(this, attrs)\n  }\n}\n","import { ContainerComponent } from './component.js'\nimport { registerTypes } from './register.js'\nimport { Node } from './node'\n\nexport function launch ({ types, template = '<App/>', rootElement = document.body, ...props } = {}) {\n  class $AppContext {\n    constructor () {\n      this.elt = rootElement\n      this.app = this\n    }\n  }\n  registerTypes([Object.assign($AppContext, { template }), ...types])\n  const top = new ContainerComponent($AppContext, new Node('#top'))\n  top.up(props)\n  top.log('' + top)\n  return top.impl\n}\n\nif (typeof window === 'object') {\n  window.launch = launch\n}\n","import { withPipes } from './compile.expr'\nimport { decodeXmlEntities, stringifyNode } from './xml.utils'\nimport { setKeyVal } from './utils'\n\nlet UID = 1\n\nexport class Node {\n  constructor (tag, attrs = new Map(), nodes = []) {\n    this.uid = '' + UID++\n    this.tag = tag || ''\n    this.attrs = attrs\n    this.nodes = nodes\n  }\n\n  // --- attrs\n\n  updateAttrs (attrs) {\n    attrs.forEach((v, k) => this.attrs.set(k, v))\n    return this\n  }\n\n  updateAttrsFormObject (obj) {\n    Object.entries(obj).forEach(([k, v]) => this.attrs.set(k, v))\n    return this\n  }\n\n  setAttrs (attrs = []) {\n    this.attrs = attrs\n    return this\n  }\n\n  get (key) {\n    const val = this.attrs.get(key)\n    return val\n  }\n\n  extractAttr (key) {\n    const val = this.get(key)\n    this.attrs.delete(key)\n    return val\n  }\n\n  // --- Nodes\n\n  setNodes (nodes = []) {\n    this.nodes = nodes\n    return this\n  }\n\n  get firstChild () {\n    return this.nodes.values().next\n  }\n\n  addChild (tag, attrs) {\n    const e = new Node(tag, attrs)\n    this.nodes.push(e)\n    return e\n  }\n\n  // ---  text\n\n  setText (text) {\n    this.attrs.set('#text', decodeXmlEntities(text))\n  }\n\n  // --- compiled\n\n  addPropertyResolver (getter, propKey) {\n    (this.$propertyResolvers || (this.$propertyResolvers = [])).push(\n      propKey\n        ? (c, acc) => setKeyVal(acc, propKey, getter(c))\n        : (c, acc) => Object.entries(getter(c) || {}).forEach(([key, val]) => setKeyVal(acc, key, val))\n    )\n  }\n\n  addInitialState (values) {\n    const obj = this.initialState || (this.initialState = {})\n    Object.entries(values).forEach(([key, val]) => setKeyVal(obj, key, val))\n    return this\n  }\n\n  get initializers () {\n    return this.$initializers || (this.$initializers = [])\n  }\n\n  addPropertyConnector (v, getter) {\n    const [key, ...pipes] = v.slice(2).split('|').map(s => s.trim())\n    const pipec = withPipes(pipes)\n    this.initializers.push(c => c.connect(key, rr => (getter(pipec(c, rr)))))\n  }\n\n  addEmitter (v, k) {\n    const [key, ...pipes] = v.slice(2).split('|').map(s => s.trim())\n    const pipec = withPipes(pipes)\n    this.initializers.push(c => ({ payload: { [k]: data => c.container.emit(key, pipec(c, data)) } }))\n  }\n\n  resolveProps (c, isInitial) {\n    let props = this.$propertyResolvers ? this.$propertyResolvers.reduce((r, fn) => { fn(c, r); return r }, {}) : {}\n    const initialState = this.initialState\n    if (isInitial && initialState) {\n      props = { ...initialState, ...props }\n    }\n    if (props.data && initialState && initialState.data) {\n      props.data = { ...initialState.data, ...props.data }\n    }\n    return props\n  }\n\n  // --- utils\n\n  clone (uid, tag = this.tag) {\n    return Object.assign(new Node(this.tag), {\n      uid,\n      tag,\n      attrs: this.attrs,\n      nodes: this.nodes,\n      nodeMap: this.nodeMap,\n      getNodes: this.getNodes,\n      $propertyResolvers: this.$propertyResolvers ? [...this.$propertyResolvers] : null,\n      initialState: this.initialState ? { ...this.initialState } : null,\n      $initializers: this.$initializers ? [...this.$initializers] : null\n    })\n  }\n\n  toString () {\n    return stringifyNode(this)\n  }\n}\n","import { compileTemplate } from './compile.js'\n\nlet COUNTER = 1\n\nconst nextId = (p = '') => p + (COUNTER++)\n\nconst fnName = ctor => (/^function\\s+([\\w$]+)\\s*\\(/.exec(ctor.toString()) || [])[1] || nextId('$C')\n\nclass Fragment {}\n\nconst REGISTRY = new Map([\n  ['ui:fragment', Fragment],\n  ['ui:for', Fragment],\n  ['ui:item', Fragment],\n  ['ui:slot', Fragment]\n])\n\nconst reg = ctr => {\n  if (typeof ctr === 'string') {\n    ctr.replace(/<component\\sid=\"(.+)\">([\\s\\S]*?)<\\/component>/gm, (_, NAME, TEMPLATE) => reg({ NAME, TEMPLATE }))\n    return\n  }\n  const ctor = typeof ctr === 'function' ? ctr : Object.assign(function () { }, ctr)\n  const name = ctor.NAME || ctor.name || fnName(ctor)\n  const text = ctor.TEMPLATE || ctor.template || ctor.prototype.TEMPLATE\n  ctor.getTemplate = () => (ctor.$template || (ctor.$template = compileTemplate(text, name)))\n  REGISTRY.set(name, ctor)\n}\n\nexport const registerTypes = types => types.forEach(reg)\n\nexport const getByTag = tag => REGISTRY.get(tag)\n","Array.EMPTY = []\nObject.assign(Function, {\n  ID: x => x,\n  next: (COUNTER => (p = '') => p + (COUNTER++))(1),\n  // system\n  throw: (error, ErrorType = Error) => { throw typeof error === 'string' ? new ErrorType(error) : error }\n})\n\nexport const setNodeMap = (map = new Map(), node) => {\n  if (node) {\n    map.set(node.uid, node)\n  }\n  return node\n}\n\nexport const wrapNode = n => new Map([[n.uid, n]])\n\nexport function appendElt (e, p, cursor) {\n  const before = cursor ? cursor.nextSibling : p.firstChild\n  if (!before) {\n    if (p !== e.parentElement) {\n      p.appendChild(e)\n    }\n  } else if (e !== before) {\n    p.insertBefore(e, before)\n  }\n  return e\n}\nexport const hasSlot = (c, id) => {\n  let r = false\n  const { tag, content } = c.container\n  if (!content) return r\n  if (id && id !== 'default') {\n    content.forEach((e) => { r = r || (e.tag === tag + ':' + id) })\n  } else {\n    content.forEach((e) => { r = r || (e.tag.slice(0, tag.length + 1) !== tag + ':') })\n  }\n  return r\n}\n\nexport const filterMapKey = (src, key) => {\n  const r = new Map()\n  src.forEach((v, k) => { if (k !== key) { r.set(k, v) } })\n  return [src.get(key), r]\n}\n\nexport const setKeyVal = (acc, k, val) => {\n  if (k.slice(0, 5) === 'data-') {\n    acc.data = acc.data ? { ...acc.data, [k.slice(5)]: val } : { [k.slice(5)]: val }\n  } else {\n    acc[k] = val\n  }\n}\n\nconst stringifyAttrs = (attrs) => {\n  if (!attrs) {\n    return ''\n  }\n  const r = []\n  Object.entries(attrs).forEach(([k, v]) => {\n    if (v && k !== '#text') {\n      r.push(' ' + k + '=\"' + (v) + '\"')\n    }\n  })\n  return r.join('')\n}\n\nexport function stringifyComponent ({ uid, tag, state, container, children = new Map() }, tab = '') {\n  const sattrs = stringifyAttrs(state)\n  const ssubs = [...children.values()].map(c => stringifyComponent(c, `  ${tab}`)).join('\\n')\n  const text = state && state['#text']\n  const stext = text ? `  ${tab}${text}` : ''\n  if (tag === '#text') {\n    return stext.trim()\n  }\n  return `${tab}<${tag}#${uid} ${container ? container.uid : '-'}${sattrs}` + (!ssubs && !stext ? '/>' : `>\\n${ssubs}${stext}\\n${tab}</${tag}#${uid}>`)\n}\n\nexport function filterSlotNodes (slotId, container) {\n  const { content, tag } = container\n  if (!content) return null\n  const r = new Map()\n  content.forEach((v) => {\n    if (slotId) {\n      if ((v.tag === tag + ':' + slotId)) {\n        v.nodeMap.forEach(vv => setNodeMap(r, vv))\n      }\n    } else if (v.tag.slice(0, tag.length + 1) !== tag + ':') {\n      setNodeMap(r, v)\n    }\n  })\n  return r\n}\n","import { Node } from './node'\nimport { parseAttrs } from './xml.utils'\n\n// XML Parse for templates. XML -> NodeTree\n\nconst RE_EMPTY = /^\\s*$/\nconst RE_XML_COMMENT = /<!--((?!-->)[\\s\\S])*-->/g\nconst RE_XML_TAG = /(<)(\\/?)([a-zA-Z][a-zA-Z0-9-:]*)((?:\\s+[a-z][a-zA-Z0-9-:]+(?:=\"[^\"]*\"|={[^}]*})?)*)\\s*(\\/?)>/g\nconst SINGLE_TAGS = 'img input br col'.split(' ').reduce((r, e) => { r[e] = 1; return r }, {})\n\nexport const parseXML = (_s, key) => {\n  const s = ('' + _s).trim().replace(RE_XML_COMMENT, '')\n  const ctx = [new Node()]\n  let lastIndex = 0\n  // head text omitted\n  for (let e = RE_XML_TAG.exec(s); e; e = RE_XML_TAG.exec(s)) {\n    // preceding text\n    const text = e.index && s.slice(lastIndex, e.index)\n    if (text && !text.match(RE_EMPTY)) {\n      ctx[0].addChild('#text').setText(text)\n    }\n    // closing tag\n    if (e[2]) {\n      if (ctx[0].tag !== e[3]) {\n        throw new Error(\n          (key || '') + ' XML Parse closing tag does not match at: ' + e.index +\n                    ' near ' +\n                    e.input.slice(Math.max(e.index - 150, 0), e.index) +\n                    '^^^^' +\n                    e.input.slice(e.index, Math.min(e.index + 150, e.input.length))\n        )\n      }\n      ctx.shift()\n    } else {\n      const sAttrs = e[4].trim()\n      const elt = ctx[0].addChild(e[3], sAttrs ? parseAttrs(sAttrs) : undefined)\n      // not single tag\n      if (!(e[5] || (e[3] in SINGLE_TAGS))) {\n        ctx.unshift(elt)\n        if (ctx.length === 1) {\n          throw new Error('Parse error at: ' + e[0])\n        }\n      }\n    }\n    // up past index\n    lastIndex = RE_XML_TAG.lastIndex\n  }\n  // tail text omitted\n  return ctx[0]\n}\n","const RE_ESCAPE_XML_ENTITY = /[\"'&<>]/g\nconst ESCAPE_XML_ENTITY = {\n  34: '&quot;',\n  38: '&amp;',\n  39: '&#39;',\n  60: '&lt;',\n  62: '&gt;'\n}\nconst FN_ESCAPE_XML_ENTITY = m => ESCAPE_XML_ENTITY[m.charCodeAt(0)]\nconst RE_XML_ENTITY = /&#?[0-9a-z]{3,5};/g\n\nconst RE_ATTRS = /([a-z][a-zA-Z0-9-:]+)(=\"[^\"]*\"|={[^}]*})?/g\n\nconst SUBST_XML_ENTITY = {\n  amp: '&',\n  gt: '>',\n  lt: '<',\n  quot: '\"',\n  nbsp: ' '\n}\n\nconst FN_XML_ENTITY = function (_) {\n  const s = _.substring(1, _.length - 1)\n  return s[0] === '#' ? String.fromCharCode(+s.slice(1)) : (SUBST_XML_ENTITY[s] || ' ')\n}\nexport const escapeXml = (s) => !s ? '' : ('' + s).replace(RE_ESCAPE_XML_ENTITY, FN_ESCAPE_XML_ENTITY)\nexport const skipQoutes = (s) => s[0] === '\"' && s[s.length - 1] === '\"' ? s.slice(1, -1) : s\nexport const decodeXmlEntities = (s = '') => s.replace(RE_XML_ENTITY, FN_XML_ENTITY)\n\nconst parseValue = (map => value => {\n  if (value && '1234567890+-'.includes(value[0]) && value.length <= 17) {\n    const num = +value\n    return isNaN(num) ? value : num\n  }\n  return value in map ? map[value] : value\n})({\n  true: true,\n  false: false,\n  null: null,\n  undefined\n})\n\nexport const parseAttrs = (s, r = new Map()) => {\n  for (let e = RE_ATTRS.exec(s); e; e = RE_ATTRS.exec(s)) {\n    r.set(e[1], !e[2] ? true : parseValue(decodeXmlEntities(skipQoutes(e[2].slice(1)))))\n  }\n  return r\n}\n\nconst stringifyAttrs = (attrs) => {\n  if (!attrs || !attrs.size) {\n    return ''\n  }\n  const r = []\n  attrs.forEach((v, k) => {\n    if (v && k !== '#text') {\n      r.push(' ' + k + '=\"' + escapeXml(v) + '\"')\n    }\n  })\n  return r.join('')\n}\n\nexport function stringifyNode ({ tag, attrs, nodes = [] }, tab = '') {\n  const sattrs = stringifyAttrs(attrs)\n  const ssubs = nodes.map(c => stringifyNode(c, `  ${tab}`)).join('\\n')\n  const text = attrs && attrs.get('#text')\n  const stext = text ? `  ${tab}${escapeXml(text)}` : ''\n  if (tag === '#text') {\n    return stext.trim()\n  }\n  return `${tab}<${tag}${sattrs}` + (!ssubs && !stext ? '/>' : `>\\n${ssubs}${stext}\\n${tab}</${tag}>`)\n}\n","(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse {\n\t\tvar a = factory();\n\t\tfor(var i in a) (typeof exports === 'object' ? exports : root)[i] = a[i];\n\t}\n})(this, function() {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n","/** ***********************\n * Arrays.\n */\n\nArray.EMPTY = Object.freeze([]);\nArray.slice = (x, b = 0, e) => x ? x.slice(b, e) : [];\n\n/**\n * Builds histogram on given field for given list.\n *\n * @param {*} list source\n * @param {*} field to be used as group key\n */\nArray.groupBy = function (list, field = 'type') {\n    const result = {};\n    const fieldFn = typeof field === 'string' ? e => e[field] : field;\n    const iter = (v, entry) => {\n        const slot = result[v] || (result[v] = { id: v, count: 0, subs: [] });\n        slot.count++;\n        (slot.items || (slot.items = slot.subs)).push(entry);\n    };\n    (list || []).forEach((e) => {\n        const value = fieldFn(e);\n        if (Array.isArray(value)) {\n            value.forEach(v => iter(v, e));\n        } else {\n            iter(value, e);\n        }\n    });\n    return result;\n}\n\n/**\n * Sorts array by element property.\n *\n * @param {*} arr source\n * @param {*} property element property to sort by\n * @param {*} order\n */\nArray.sortBy = function sortBy(arr, property = 'name', order = 1) {\n    let fn = property;\n    if (typeof property === 'string') {\n        if (property[0] === '-') {\n            /* eslint-disable */\n            order = -1;\n            property = property.substr(1);\n        }\n        fn = e => e[property];\n    }\n\n    function compare(a, b) {\n        const aa = fn(a);\n        const bb = fn(b);\n        /* eslint-disable */\n        return (aa < bb) ? -order : (aa > bb) ? order : 0;\n    }\n    return (arr || []).slice(0).sort(compare);\n}\n\n/**\n * Produces key/value index on given array.\n * \n * @param {*} arr source array\n * @param {*} idKey id key\n * @param {*} valKey value key\n */\nArray.index = Array.toHash = (arr, idKey = 'id', valKey) => {\n    const r = {};\n    if (arr) {\n        const isKeyFn = typeof idKey === 'string' ? e => e[idKey] : idKey\n        arr.forEach((e) => { r[isKeyFn(e)] = valKey ? e[valKey] : e; });\n    }\n    return r;\n};","\nconst R = {\n    ru: {\n        monthNames: ['', 'Ð¯Ð½Ð²Ð°Ñ€ÑŒ', 'Ð¤ÐµÐ²Ñ€Ð°Ð»ÑŒ', 'ÐœÐ°Ñ€Ñ‚', 'ÐÐ¿Ñ€ÐµÐ»ÑŒ', 'ÐœÐ°Ð¹', 'Ð˜ÑŽÐ½ÑŒ', 'Ð˜ÑŽÐ»ÑŒ', 'ÐÐ²Ð³ÑƒÑÑ‚', 'Ð¡ÐµÐ½Ñ‚ÑÐ±Ñ€ÑŒ', 'ÐžÐºÑ‚ÑÐ±Ñ€ÑŒ', 'ÐÐ¾ÑÐ±Ñ€ÑŒ', 'Ð”ÐµÐºÐ°Ð±Ñ€ÑŒ'],\n        monthNamesShort: ['', 'Ð¯Ð½Ð²', 'Ð¤ÐµÐ²', 'ÐœÐ°Ñ€', 'ÐÐ¿Ñ€', 'ÐœÐ°Ð¹', 'Ð˜ÑŽÐ½', 'Ð˜ÑŽÐ»', 'ÐÐ²Ð³', 'Ð¡ÐµÐ½', 'ÐžÐºÑ‚', 'ÐÐ¾Ñ', 'Ð”ÐµÐº'],\n        dayNames: ['Ð’Ð¾ÑÐºÑ€ÐµÑÐµÐ½ÑŒÐµ', 'ÐŸÐ¾Ð½ÐµÐ´ÐµÐ»ÑŒÐ½Ð¸Ðº', 'Ð’Ñ‚Ð¾Ñ€Ð½Ð¸Ðº', 'Ð¡Ñ€ÐµÐ´Ð°', 'Ð§ÐµÑ‚Ð²ÐµÑ€Ð³', 'ÐŸÑÑ‚Ð½Ð¸Ñ†Ð°', 'Ð¡ÑƒÐ±Ð±Ð¾Ñ‚Ð°'],\n        dayNamesShort: ['Ð’Ñ', 'ÐŸÐ½', 'Ð’Ñ‚', 'Ð¡Ñ€', 'Ð§Ñ‚', 'ÐŸÑ‚', 'Ð¡Ð±'],\n    },\n    en: {\n        monthNames: ['', 'January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December'],\n        monthNamesShort: ['', 'Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'],\n        dayNames: ['Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday'],\n        dayNamesShort: ['Su', 'Mo', 'Tu', 'We', 'Th', 'Fr', 'Sa'],\n    }\n};\n\nDate.orNow = x => x ? Date.narrow(x) : (new Date())\n\nDate.l18n = (key) => Object.dig(R[Date.LOCALE||'ru'], key)\n\nDate.daysInMonth = (month, year) => new Date(year, month + 1, 0).getDate();\n\nDate.firstOfWeek = (d, x = Date.narrow(d)) => (new Date(x.getFullYear(), x.getMonth(), x.getDate() - x.getDay()));\n\nDate.monthName = (m, mode = '') => Date.l18n(`monthNames${mode}.${m}`);\n\nDate.fractions = (x = new Date()) => [x.getFullYear(), x.getMonth(), x.getDate(), x.getHours(), x.getMinutes(), x.getSeconds(), x.getMilliseconds()];\n\nDate.parseISO8601 = function (x) {\n    Function.assert(typeof x === 'string', `Date.parseISO8601: not a string: ${x}`);\n\n    if (x.length === 10) {\n        x += 'T12:00';\n    }\n    const timebits = /^([0-9]{4})-([0-9]{2})-([0-9]{2})[ T]([0-9]{2}):([0-9]{2})(?::([0-9]*)(\\.[0-9]*)?)?(Z?)(([+-])([0-9]{2})([0-9]{2}))?/;\n    const m = timebits.exec(x);\n    if (!m) {\n        return null;\n    }\n    const tz = m[8]\n        ? !m[9] ? 0 : (m[10] === '+' ? -1 : +1) * ((parseInt(m[11]) * 60) + parseInt(m[12]))\n        : (new Date().getTimezoneOffset());\n    // utcdate is milliseconds since the epoch\n    const utcdate = Date.UTC(\n        parseInt(m[1]),\n        parseInt(m[2]) - 1, // months are zero-offset (!)\n        parseInt(m[3]),\n        parseInt(m[4]), parseInt(m[5]), // hh:mm\n        ((m[6] && parseInt(m[6])) || 0), // optional seconds\n        ((m[7] && parseFloat(m[7]))) || 0\n    );\n\n    return new Date(utcdate + tz * 60000);\n}\n/**\n * Universal all-weather converter to Date.\n *\n * @param {*} x any value to be converted to date\n * @returns Date instance or null\n */\nDate.narrow = (x) => {\n    const type = typeof x;\n    if (x == null) { return null; }\n    if (type === 'number' || +x == x) { return new Date(+x); }\n    if (type === 'object') {\n        // Date already\n        if (x.getTime) { return x; }\n        // having a date re-presentation method\n        if (x.toDate) { return x.toDate(); }\n        // firestore timestamp for web\n        if (x.seconds && x.nanoseconds != null) { return new Date((x.seconds * 1000) + x.nanoseconds); }\n    }\n    return Date.parseISO8601(x);\n};\n\nDate.formatTimezone = (tzOffset) => {\n    const toNumber = Number(tzOffset);\n    return toNumber ?\n        toNumber >= 0 ?\n            `+${String.pad(toNumber / 60)}:${String.pad(toNumber % 60)}` :\n            `-${String.pad(-toNumber / 60)}:${String.pad(-toNumber % 60)}` :\n        '';\n}\nconst DATE_FORMATTERS = {\n    hh: (date) => (String.pad(date.getHours())),\n    ii: (date) => (String.pad(date.getMinutes())),\n    hi: (date) => (String.pad(date.getHours()) + ':' + String.pad(date.getMinutes())),\n    dd: (date) => (String.pad(date.getDate())),\n    w: (date) => ('' + Date.l18n(`dayNames.${date.getDay()}`)),\n    ww: (date) => ('' + Date.l18n(`dayNamesShort.${date.getDay()}`)),\n    d: (date) => ('' + date.getDate()),\n    mmmm: (date) => (Date.monthName(date.getMonth() + 1, '')),\n    mmm: (date) => (Date.monthName(date.getMonth() + 1, 'Short')),\n    mm: (date) => (String.pad(date.getMonth() + 1)),\n    yyyy: (date) => (`${date.getFullYear()}`),\n    ll: (date) => (`${date.getTime()}`),\n    z: (date) => (`Z${Date.formatTimezone(date.getTimezoneOffset())}`),\n};\n\nDate.format = (x, format = 'yyyy-mm-dd') => {\n    if (!x) {\n        return '';\n    }\n    const date = Date.narrow(x);\n    return !date ? '' : format\n        .replace(/[_]/g, '\\n')\n        .replace(/[hidwmylz]+/g, (key) => {\n            const fn = DATE_FORMATTERS[key];\n            return fn ? fn(date) : key;\n        });\n};\n\nDate.dateKey = d => { const ms = Date.narrow(d).getTime(); return Date.format(ms - ms % (24 * 3600000) + 12*3600000,'yyyy-mm-dd')}\n","/**\n * Functions\n */\nObject.assign(Function, {\n    ID: x => x,\n    next: (COUNTER => (p = '') => p + (COUNTER++))(1),\n    \n    // system\n    throw: (error, ErrorType = Error) => { throw typeof error === 'string' ? new ErrorType(error) : error },\n    assert: (b, error, ErrorType = Error) => { if (!b) {throw typeof error === 'string' ? new ErrorType(error) : error }},\n    log: (x, pre) => { console.log(pre || 'pipe', x); return x },\n    track: (fn, x, y) => (...args) => { console.log('track', x || y); return (fn || Function.ID)(...args) },\n    // eslint-disable-next-line no-debugger\n    debugger: () => { debugger },\n\n    // data structures\n    dot: (x, k) => x ? x[k] : null,\n    includes: (x, p) => x.includes && x.includes(p),\n\n    // logical\n    then: (x, p = '', n = '') => x ? p : n,\n    not: x => !x,\n    isUndefined: x => typeof x === 'undefined',\n    isTrue: x => x === true,\n    isFalse: x => x === false,\n    or: (x, s) => x || s,\n    and: (x, s) => x && s,\n\n    // math\n    // eslint-disable-next-line eqeqeq\n    equals: (x, p) => x == p,\n    greater: (x, p) => x > p,\n    less: (x, p) => x < p,\n    plus: (x, alt) => (+x) + (+alt),\n    minus: (x, alt) => (+x) - (+alt),\n    multiply: (x, alt) => (+x) * (+alt),\n    compose: (...ff) => x0 => ff.reduceRight((x, f) => f(x), x0),\n    swap: f => (a, b) => f(b, a),\n    curry: (() => {\n        const _curry = (fn, args0, lengthLimit) => {\n            const fx = (args) => args.length >= lengthLimit ?\n                fn(...args) :\n                _curry(fn, args, lengthLimit - args.length);\n\n            return (...args) => fx([...args0, ...args]);\n        };\n        return (f, ...args) => _curry(f, args, f.length);\n    })(),\n    /* Simple GUID generator. */\n    guid: (s4 => () => `${s4()}${s4()}-${s4()}-${s4()}-${s4()}-${s4()}${s4()}${s4()}`)\n        (() => Math.floor((1 + Math.random()) * 0x10000).toString(16).substring(1)),\n    /* Simple hash function. */\n    hash: function (s) {\n        let a = 1, c = 0, h, o;\n        if (s) {\n            a = 0;\n            /* jshint plusplus:false bitwise:false */\n            for (h = s.length - 1; h >= 0; h--) {\n                o = s.charCodeAt(h);\n                a = (a << 6 & 268435455) + o + (o << 14);\n                c = a & 266338304;\n                a = c !== 0 ? a ^ c >> 21 : a;\n            }\n        }\n        return String(a);\n    }\n})","import './obj.js'\nimport './str.js'\nimport './arr.js'\nimport './fn.js'\nimport './date.js'\n\n// useful pipes\nexport const pipes = {\n  ...Function,\n  str: String,\n  arr: Array,\n  obj: Object,\n  date: Object.assign((s, format) => Date.format(s, format), Date)\n}","Object.EMPTY = Object.freeze({});\n\n/**\n * Checks if argument is empty .\n */\nObject.isEmpty = (x) => {\n    if (!x) {\n        return true;\n    }\n    if (x instanceof Object) {\n        // (zero-length array)\n        if (Array.isArray(x)) {\n            return x.length === 0;\n        }\n        // (zero-size map)\n        if (x instanceof Map) {\n            return x.size === 0;\n        }\n        // (has no props)\n        return Object.keys(x).length === 0;\n    }\n    return false;\n};\n\n/**\n * Digs value in a given object structure by a given path.\n *\n * @param {*} o source object\n * @param {*} steps path\n * @param {*} def default value\n */\nObject.dig = (o, steps) => steps.split('.').reduce((r, e) => r ? r[e] : undefined, o);\n\nObject.dot = (x, k) => x ? x[k] : null\n\nconst VALUE_MAP = {\n  true: true,\n  false: false,\n  undefined\n};\n\nObject.decode = (val) => {\n  const value = decodeURIComponent(val);\n  if ('{['.indexOf(value[0]) > -1) {\n    return JSON.parse(value);\n  }\n  const num = +value;\n  if (value.length <= 17 && !isNaN(num)) {\n    return num;\n  }\n  return VALUE_MAP[value] || value;\n}\n\nObject.encode = (value) => {\n  return encodeURIComponent((typeof value === 'object') ? JSON.stringify(value) : `${value}`);\n}\n\n/**\n * Parses string into URL object like `{type, target, path, params, data }`.\n *\n * @param {string} s string in format: `type:target/path?params#data`\n * @param {object} r optional target object\n * @returns URL object \n */\nObject.urlParse = function (s, r = {}) {\n  if (!s) {\n    return { path: [], params: {}, target: '', ...r };\n  }\n  if (typeof s === 'object') {\n    return { path: [], params: {}, target: '', ...r, ...s };\n  }\n  let p;\n  // extract type:\n  p = s.indexOf(':');\n  if (p > -1) {\n    r.type = s.slice(0, p);\n    s = s.slice(p + 1);\n  }\n  // extract data:\n  p = s.indexOf('#');\n  if (p > -1) {\n    r.data = Object.decode(s.slice(p + 1));\n    s = s.slice(0, p);\n  }\n  // extract query params:\n  p = s.indexOf('?');\n  r.params = r.params || {};\n  if (p > -1) {\n    for (let param of s.slice(p + 1).split('&')) {\n      let [key, value] = param.split('=');\n      if (value) {\n        r.params[key] = Object.decode(value);\n      }\n    }\n    s = s.slice(0, p);\n  }\n  // target and path:\n  let path = r.path = s.split('/').map(decodeURIComponent);\n  while (path.length && !r.target) {\n    r.target = path.shift();\n  }\n  return r;\n}\n\n/**\n*  Represents an URL object as a string\n*\n* @param {object} r URL object like `{type, target, path, params, data }`\n* @returns string in format `type://target/path?params#data`\n*/\nObject.urlStringify = function (r) {\n  let result = '';\n  if (!r) {\n    return result;\n  }\n  if (typeof r === 'string') {\n    return r;\n  }\n  if (r.target) {\n    if (r.type) {\n      result += `${r.type}://`;\n    }\n    result += r.target;\n  }\n  if (r.path) {\n    result += `/${Array.isArray(r.path) ? r.path.map(encodeURIComponent).join('/') : r.path}`;\n  }\n  const params = r.params;\n  if (params) {\n    const keys = Object.keys(params).filter(key => (params[key] != null));\n    if (keys.length) {\n      result += `?${keys.map(key => (`${key}=${Object.encode(params[key])}`)).join('&')}`;\n    }\n  }\n  if (r.data) {\n    result += `#${Object.encode(r.data)}`;\n  }\n  return result;\n}\n\n","\nfunction capitalize(x) {\n    if (!x) {\n        return x;\n    }\n    const s = `${x}`;\n\n    return s[0].toUpperCase() + s.slice(1);\n}\nfunction camelize(s, sep = '_') {\n    return ((s && s.length && s.split(sep).map((t, i) => (i ? capitalize(t) : t)).join('')) || ``)\n}\n\n/**\n * Formats given string template with params.\n *\n * Template should contain placeholders like `{someKey}`,\n * which will be replaced with value by key from params.\n *\n * @param {string} template string template\n * @param {object} params hash with parameters\n */\nString.format = (template, params) => {\n    return `${template || ''}`.replace(/\\{([\\S]+)\\}/i, (_, key) => ((params && params[key]) != null) ? params[key] : '');\n};\nString.wrap = (x, template) => {\n    return !x ? '' : `${template || '*'}`.replace('*', x);\n};\n\nString.tail = (x, sep = '.') => {\n    if (!x) {\n        return '';\n    }\n    const pos = x.lastIndexOf(sep);\n\n    return pos === -1 ? x : x.slice(pos + sep.length);\n};\n\nString.lastTail = (key, sep = '.') => ('' + key).split(sep).slice(-1)[0];\n\nString.head = (x, sep = '.') => {\n    if (!x) {\n        return '';\n    }\n    const pos = x.indexOf(sep);\n\n    return pos === -1 ? x : x.slice(0, pos);\n};\n\nString.pad = (x, size = 2, fill = '0') => {\n    let s = String(x);\n    while (s.length < (size)) { s = `${fill}${s}`; }\n    return s;\n};\nString.capitalize = capitalize;\nString.camelize = camelize;\nString.mirror = (x) => (x || '').split('').reduce((r, c) => (c + r), '');\nString.snakeCase = (x) => (x || '').replace(/([a-z])([A-Z])/g, '$1_$2');\nString.proper = (s) => capitalize(camelize(s));\nString.upper = s => ('' + s).toUpperCase();","module.exports = function(module) {\n\tif (!module.webpackPolyfill) {\n\t\tmodule.deprecate = function() {};\n\t\tmodule.paths = [];\n\t\t// module.parent = undefined by default\n\t\tif (!module.children) module.children = [];\n\t\tObject.defineProperty(module, \"loaded\", {\n\t\t\tenumerable: true,\n\t\t\tget: function() {\n\t\t\t\treturn module.l;\n\t\t\t}\n\t\t});\n\t\tObject.defineProperty(module, \"id\", {\n\t\t\tenumerable: true,\n\t\t\tget: function() {\n\t\t\t\treturn module.i;\n\t\t\t}\n\t\t});\n\t\tmodule.webpackPolyfill = 1;\n\t}\n\treturn module;\n};\n"],"sourceRoot":""}