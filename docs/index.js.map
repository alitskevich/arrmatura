{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap","webpack:///./lib/compile.js","webpack:///./lib/component.js","webpack:///./lib/dom.js","webpack:///./lib/fragment.js","webpack:///./lib/index.js","webpack:///./lib/register.js","webpack:///./lib/render.js","webpack:///./lib/resolve.js","webpack:///./lib/xml.js"],"names":["VALUES","RE_SINGLE_PLACEHOLDER","RE_PLACEHOLDER","res","key","split","id","deep","target","app","resources","length","reduce","r","k","pipe","value","args","fn","call","$","apply","impl","map","a","prop","slice","ex","console","error","expression","v","placeholder","includes","match","trim","stringInterpolation","fnx","pattern","replace","s","expr","push","c","idx","pipes","initGettr","pipec","withPipes","initialValue","pk","assignKeyValue","acc","val","makeApplicator","get","hasSlot","content","forEach","e","tag","filterMapKey","src","Map","set","compileFor","attrs","uid","nodes","itemId","$spec","inits","connect","rr","$data","owner","updates","$nodes","emptyNode","find","compileNode","filter","loadingNode","itemNode","compileIf","aIf","iff","neg","applicator","gttr","$then","ifElse","ifThen","then","compileTag","compile","has","ref","aProps","getter","Object","assign","v2","ekey","emitter","data","cb","emit","initials","node","COUNTER","fnId","nextId","p","applyValue","methodName","x","pre","toUpperCase","bindFn","f","$boundFnMap","bound","bind","up","upAsync","promise","racer","raceCondition","akey","propGetter","$propFnMap","path","gettr","extractor1","$$","undefined","Component","Ctor","options","parent","props","ctx","elt","hidden","defer","isDone","cursor","prevElt","render","resolveTemplate","constructor","$TEMPLATE","isInited","init","all","hotValue","cancel","Promise","d","done","children","nextElt","defered","Î”","changed","notify","entries","their","setter","propId","listeners","notifying","uuid","refId","subscribe","type","event","warn","method","ReferenceError","result","log","COUNTERS","$weak","counter","camelize","sep","jn","i","join","DOM_SETTERS","textContent","disabled","cl","fl","eq","indexOf","className","selected","checked","$dataset","keys","dataset","click","setAttribute","ev","$attributes","blur","dblclick","scroll","getAttribute","keypress","keyCode","setTimeout","focus","enter","change","toggle","DOM_VALUE_COMPARATORS","_","mine","Element","document","createTextNode","createElement","applyAttributes","lstnrs","$listeners","removeEventListener","parentElement","removeChild","delta","before","nextSibling","firstChild","appendChild","insertBefore","theirs","mines","prototype","hasOwnProperty","def","fnValue","addEventListener","removeAttribute","WebClientApp","rootElement","body","launch","types","App","template","name","NAME","registerTypes","concat","window","requestAnimationFrame","Fragment","FragmentSlot","ocontent","otag","vv","FragmentFor","Error","index","$ownerImpl","create","$owner","FragmentIf","FragmentTag","ANY","fnName","ctor","exec","toString","REGISTRY","reg","ctr","text","TEMPLATE","T","parseXML","getByTag","$content","size","cc","ch","tmpl","m","t","RE_XML_ENTITY","RE_XML_COMMENT","RE_ATTRS","RE_ESCAPE_XML_ENTITY","RE_XML_TAG","SINGLE_TAGS","SUBST_XML_ENTITY","amp","gt","lt","quot","nbsp","ESCAPE_XML_ENTITY","RE_EMPTY","FN_ESCAPE_XML_ENTITY","charCodeAt","FN_XML_ENTITY","substring","String","fromCharCode","decodeXmlEntities","escapeXml","skipQoutes","UID","parseAttrs","stringifyAttrs","Node","stringify","tab","sattrs","ssubs","stext","_s","lastIndex","addChild","setText","input","Math","max","min","shift","unshift","getChild"],"mappings":"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","file":"index.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse {\n\t\tvar a = factory();\n\t\tfor(var i in a) (typeof exports === 'object' ? exports : root)[i] = a[i];\n\t}\n})(this, function() {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./lib/index.js\");\n","\nconst VALUES = { true: true, false: false, null: null };\nconst RE_SINGLE_PLACEHOLDER = /^\\{([^}]+)\\}$/;\nconst RE_PLACEHOLDER = /\\{([^}]+)\\}/g;\n\nfunction res(key) {\n  const [id, ...deep] = key.split('.');\n  const target = id === 'app' ? this.app : this.app.resources[id];\n  if (deep.length === 0) {\n    return target;\n  }\n  if (deep.length === 1) {\n    return target[deep[0]];\n  }\n  return deep.reduce((r, k) => r ? r[k] : null, target)\n}\n\nfunction pipe(value, key) {\n  const [id, ...args] = key.split(':')\n  try {\n    const fn = res.call(this, id);\n    let $ = this;\n    return fn.apply($.impl, [value, ...args.map(a => a[0] === '@' ? $.prop(a.slice(1)) : a)]);\n  } catch (ex) {\n    console.error('ERROR: Object.pipes.' + id, ex)\n    return value;\n  }\n}\n\n// Compilation\nexport function expression(v) {\n  if (v[0] === ':') { return placeholder(v); }\n  if (!v.includes('{')) { const r = v in VALUES ? VALUES[v] : v; return () => r; }\n  if (v.match(RE_SINGLE_PLACEHOLDER)) { return placeholder(v.slice(1, -1).trim()); }\n  return stringInterpolation(v);\n}\n\nexport function stringInterpolation(v, fnx = []) {\n  const pattern = v.replace(RE_PLACEHOLDER, (s, expr) => { fnx.push(placeholder(expr)); return '{{' + (fnx.length - 1) + '}}'; });\n  return c => !fnx.length ? pattern : pattern.replace(/\\{\\{(\\d+)\\}\\}/g, (s, idx) => {\n    const r = fnx[idx](c);\n    return !r && r !== 0 ? '' : r;\n  });\n}\n\nexport function placeholder(expr) {\n  const [key, ...pipes] = expr.split('|').map(s => s.trim());\n  const initGettr = (key[0] === ':')\n    ? (fn => c => res.call(c, fn(c)))(stringInterpolation(key.slice(1).trim()))\n    : c => c.prop(key)\n  const pipec = withPipes(pipes)\n  return c => pipec(c, initGettr(c))\n}\n\nexport function withPipes(pipes) {\n  return !pipes.length ? (c, v) => v : (c, initialValue) => pipes.reduce((r, pk) => pipe.call(c, r, pk), initialValue);\n}\n\nconst assignKeyValue = (acc, val, k) => {\n  if (k.slice(0, 5) === 'data-') {\n    acc['data'] = { ...acc['data'], [k.slice(5)]: val in VALUES ? VALUES[val] : val };\n  } else {\n    acc[k] = val;\n  }\n}\n\nconst makeApplicator = (get, k = '_') => (c, acc) => assignKeyValue(acc, get(c), k);\nconst hasSlot = (c, id) => {\n  let r = false;\n  if (id && id != 'default') {\n    c.content && c.content.forEach((e) => { r = r || (e.tag === c.tag + ':' + id) });\n  } else {\n    c.content && c.content.forEach((e) => { r = r || (e.tag.slice(0, c.tag.length + 1) !== c.tag + ':') });\n  }\n  return r\n}\n\nexport const filterMapKey = (src, key) => {\n  const r = new Map();\n  src.forEach((v, k) => { if (k !== key) { r.set(k, v); } });\n  return r;\n};\n\nexport function compileFor({ tag, attrs, uid, nodes }) {\n  const [itemId, , expr] = attrs.get('ui:for').split(' ');\n  const $spec = { itemId };\n  const r = { tag: 'ui:for', uid: 'for:' + expr + uid, $spec, key: attrs.get('key') };\n  if ((expr.slice(0, 2) === '<-')) {\n    const [key, ...pipes] = expr.slice(2).split('|').map(s => s.trim());\n    const pipec = withPipes(pipes);\n    (r.inits || (r.inits = [])).push(c => c.connect(key, rr => ({ $data: pipec(c.owner, rr) })));\n  } else {\n    (r.updates || (r.updates = [])).push(makeApplicator(expression('{:'.includes(expr[0]) ? expr : '{' + expr + '}'), '$data'));\n  }\n  let $nodes = nodes;\n  if (nodes && nodes.length) {\n    const emptyNode = $nodes.find(e => e.tag === 'ui:empty');\n    if (emptyNode) {\n      $spec.emptyNode = emptyNode.nodes.map(compileNode);\n      $nodes = $nodes.filter(e => e !== emptyNode);\n    }\n    const loadingNode = $nodes.find(e => e.tag === 'ui:loading');\n    if (loadingNode) {\n      $spec.loadingNode = loadingNode.nodes.map(compileNode);\n      $nodes = $nodes.filter(e => e !== loadingNode);\n    }\n  }\n  $spec.itemNode = compileNode({ tag, attrs: filterMapKey(attrs, 'ui:for'), uid, nodes: $nodes });\n  return r;\n}\n\nexport function compileIf({ tag, attrs, uid, nodes }) {\n  const aIf = attrs.get('ui:if')\n  const iff = {};\n  const r = { tag: 'ui:if', uid: 'if:' + aIf + uid, key: attrs.get('key'), $spec: iff, };\n  const neg = aIf[0] === '!';\n  const expr = neg ? aIf.slice(1) : aIf;\n\n  if ((expr.slice(0, 2) === '<-')) {\n    const [key, ...pipes] = expr.slice(2).split('|').map(s => s.trim());\n    const pipec = withPipes(pipes);\n    const applicator = neg ? (c => rr => ({ $data: !pipec(c, rr) })) : (c => rr => ({ $data: (!!pipec(c.owner, rr)) }));\n    (r.inits || (r.inits = [])).push(c => c.connect(key, applicator(c)));\n  } else if ((expr.slice(0, 5) === 'slot(')) {\n    const gttr = c => hasSlot(c, expr.slice(5, -1));\n    (r.updates || (r.updates = [])).push((c, acc) => { acc['$data'] = neg ? !gttr(c) : gttr(c); });\n  } else {\n    const gttr = expression(expr.includes('{') ? expr : '{' + expr + '}');\n    (r.updates || (r.updates = [])).push((c, acc) => { acc['$data'] = neg ? !gttr(c) : gttr(c); });\n  }\n  let $then = { tag, attrs: filterMapKey(attrs, 'ui:if'), uid, nodes };\n  if (nodes && nodes.length) {\n    const ifElse = nodes.find(e => e.tag === 'ui:else');\n    const ifThen = nodes.find(e => e.tag === 'ui:then');\n    if (ifElse) {\n      iff.else = ifElse.nodes.map(compileNode);\n      $then.nodes = ifThen ? ifThen.nodes : nodes.filter(e => e !== ifElse);\n    } else if (ifThen) {\n      $then.nodes = ifThen.nodes;\n    }\n  }\n  iff.then = [$then].map(compileNode);\n  return r;\n}\n\nexport function compileTag({ attrs, uid, nodes }) {\n  const expr = attrs.get('tag')\n  const r = {\n    tag: 'ui:tag',\n    uid: 'tag:' + expr + uid,\n    $spec: compile({ attrs: filterMapKey(attrs, 'tag'), nodes }),\n  };\n  if ((expr.slice(0, 2) === '<-')) {\n    (r.inits || (r.inits = [])).push(c => c.connect(expr.slice(2).trim(), (rr => ({ $data: rr }))));\n  } else {\n    const gttr = expression(expr);\n    (r.updates || (r.updates = [])).push((c, acc) => { acc['$data'] = gttr(c); });\n  }\n  return r;\n}\nexport function compile(r) {\n  const { attrs, nodes } = r;\n  if (attrs.has('id')) { r.id = attrs.get('id') }\n  if (attrs.has('ui:ref')) { r.ref = attrs.get('ui:ref') }\n  // ui:props\n  if (attrs.has('ui:props')) {\n    const aProps = attrs.get('ui:props');\n    if ((aProps.slice(0, 2) === '<-')) {\n      const [key, ...pipes] = aProps.slice(2).split('|').map(s => s.trim());\n      const pipec = withPipes(pipes);\n      (r.inits || (r.inits = [])).push(c => c.connect(key, rr => pipec(c.owner, rr)));\n    } else {\n      const getter = expression(aProps);\n      (r.updates || (r.updates = [])).push((c, acc) => Object.assign(acc, getter(c)));\n    }\n  }\n  // attrs\n  attrs.forEach((v, k) => {\n    if (k.slice(0, 3) !== 'ui:') {\n      const v2 = v.slice(0, 2)\n      if (v2 === '<-') {\n        const [key, ...pipes] = v.slice(2).split('|').map(s => s.trim());\n        const pipec = withPipes(pipes);\n        (r.inits || (r.inits = [])).push(c => c.connect(key, rr => ({ [k]: pipec(c.owner, rr) })));\n      } else if (v2 === '->') {\n        const [key, ...pipes] = v.slice(2).split('|').map(s => s.trim());\n        const expr = expression(key);\n        const pipec = withPipes(pipes);\n        const ekey = '$' + v + ':' + r.uid;\n        const emitter = c => c[ekey] || (c[ekey] = (data, cb) => c.emit(expr(c), pipec(c.owner, data), cb));\n        (r.updates || (r.updates = [])).push((c, acc) => assignKeyValue(acc, emitter(c), k));\n      } else {\n        if (!v.includes('{') && v[0] !== ':' && k.slice(0, 5) !== 'data-') {\n          assignKeyValue((r.initials || (r.initials = {})), v, k);\n        } else {\n          (r.updates || (r.updates = [])).push(makeApplicator(expression(v), k));\n        }\n      }\n    }\n  });\n\n  r.nodes = nodes.map(compileNode)\n\n  return r;\n}\n\nexport function compileNode(node) {\n  if (node.attrs.has('ui:for')) { return compileFor(node); }\n  if (node.attrs.has('ui:if')) { return compileIf(node); }\n  if (node.tag === 'ui:tag') { return compileTag(node); }\n  return compile(node);\n}\n\n","/* eslint-disable no-console */\nimport { render } from './render.js';\nimport { resolveTemplate } from './resolve.js';\n\nlet COUNTER = 1;\nconst fnId = e => e\nconst nextId = (p = '') => p + (COUNTER++);\nconst applyValue = (value, fn = fnId) => value && value.then ? value.then(fn) : fn(value);\n\nconst methodName = (x, pre = '') => {\n  if (!x) { return pre; }\n  const s = `${x}`;\n  return pre + s[0].toUpperCase() + s.slice(1);\n};\n\nfunction bindFn(f) {\n  const $ = this;\n  const map = $.$boundFnMap || ($.$boundFnMap = new Map());\n  let fn = map.get(f);\n  if (!fn) {\n    const bound = f.bind($.impl);\n    fn = (...args) => {\n      const r = bound(...args);\n      if (r) {\n        $.up(r)\n      }\n    }\n    map.set(f, fn);\n  }\n  return fn;\n}\n\nconst upAsync = ($, promise, key) => {\n  const racer = $.raceCondition('set:' + (key || 'up'));\n  const up = r => racer(() => $.up(r))\n  if (key && key !== '...') {\n    const akey = key.replace('Promise', '')\n    promise.then(val => up({ [akey + 'Error']: null, [akey]: val }), error => up({ [akey + 'Error']: error }));\n  } else {\n    promise.then(up, error => up({ error }));\n  }\n  return promise;\n}\nconst propGetter = ($, key) => {\n  const map = $.$propFnMap || ($.$propFnMap = {});\n  let fn = map[key];\n  if (fn) { return fn; }\n\n  const impl = $.impl\n  const [pk, ...path] = key.split('.')\n  const gettr = impl[methodName(pk, 'get')];\n\n  const extractor1 = gettr\n    ? () => gettr.call(impl)\n    : ($$ = impl.get ? impl.get(impl) : impl) =>\n      ((pk in $$) ? $$[pk] : undefined);\n\n  fn = !path.length\n    ? extractor1\n    : () => path.reduce((r, p) => (r ? r[p] : r), extractor1())\n\n  return map[key] = fn;\n}\n\n\nexport class Component {\n\n  constructor(Ctor, options) {\n    Object.assign(this, options);\n    const { ref, parent, props } = this;\n    if (parent) {\n      this.app = parent.app;\n      this.ctx = this.elt = parent.elt;\n      this.impl = new Ctor(props, this);\n      this.impl.$ = this;\n      this.impl.app = this.app;\n      if (ref) {\n        const hidden = this.app[ref];\n        this.app[ref] = this.impl;\n        this.defer(() => { this.app[ref] = hidden })\n      }\n    } else {\n      this.app = this.impl = new Ctor(props, this);\n      this.impl.$ = this;\n    }\n  }\n\n  /**\n   * Rendering.\n   */\n\n  render() {\n    if (this.isDone) { return; }\n    this.ctx.cursor = this.prevElt;\n    return this.impl.render ? this.impl.render(this, render) : render(this);\n  }\n\n  resolveTemplate() {\n    return this.impl.resolveTemplate\n      ? this.impl.resolveTemplate(this)\n      : resolveTemplate(this, this.impl.constructor.$TEMPLATE())\n  }\n\n  /**\n   * Life-cycle hooks.\n   */\n  init() {\n    if (this.isDone || this.isInited) { return; }\n    this.isInited = true;\n    if (this.inits) {\n      const initials = this.impl.init && this.impl.init(this) || {}\n      const all = []\n      this.inits.map(f => f(this)).forEach(r => {\n        if (!r) return;\n        const { hotValue, cancel } = r\n        this.defer(cancel);\n        // this.up(hotValue)\n        if (hotValue && hotValue.then) {\n          all.push(hotValue)\n        } else {\n          Object.assign(initials, hotValue)\n        }\n      });\n      delete this.inits;\n      this.up(initials);\n      if (all.length) {\n        Promise.all(all).then((args) => this.up(args.reduce(Object.assign, {})));\n      }\n    } else {\n      if (this.impl.init) {\n        const d = this.impl.init(this)\n        if (d) { this.up(d); }\n      }\n    }\n  }\n\n  done() {\n    if (this.isDone) { return; }\n    this.isDone = true;\n    if (this.impl.done) {\n      this.impl.done(this);\n    }\n    if (this.children) {\n      this.children.forEach(c => { c.parent = null; c.done(); })\n    }\n    if (this.parent) {\n      this.parent.children.delete(this.uid);\n    }\n    if (this.prevElt) {\n      this.prevElt.nextElt = this.nextElt;\n    }\n    if (this.defered) {\n      this.defered.forEach(f => f(this));\n      delete this.defered;\n    }\n    ['parent', 'children', 'owner', 'impl', 'app', 'ctx'].forEach(k => { delete this[k]; });\n  }\n\n  /**\n   * State.\n   */\n  up(Î”) {\n    if (this.isDone) { return; }\n    let changed = this.set(Î”);\n    this.render();\n    if (this.ref && changed) { this.notify(); }\n  }\n\n  set(Î”) {\n    const $ = this;\n    const impl = $.impl;\n    let changed = false;\n    if (impl.set) {\n      changed = impl.set(Î”);\n    } else if (Î”) {\n      if (Î”.then) {\n        upAsync($, Î”);\n      } else {\n        Object.entries(Î”).forEach(([k, their]) => {\n          if (their && their.then) {\n            upAsync($, their, k);\n          } else if (k && typeof their !== 'undefined' && their !== impl[k]) {\n            const setter = impl['set' + k[0].toUpperCase() + k.slice(1)];\n            if (setter) { setter.call(impl, their); } else { impl[k] = their; }\n            changed = true;\n          }\n        });\n      }\n    }\n    return changed;\n  }\n\n  prop(propId) {\n    const value = propGetter(this, propId)();\n    return (typeof value === 'function') ? bindFn.call(this, value) : value;\n  }\n\n  /**\n   *  Left Arrow.\n   */\n  notify() {\n    if (this.listeners && !this.notifying) {\n      this.notifying = true\n      this.listeners.forEach(e => e())\n      this.notifying = false\n    }\n  }\n\n  subscribe(target, fn) {\n    const uuid = nextId();\n    const listeners = (this.listeners || (this.listeners = new Map()))\n    listeners.set(uuid, () => {\n      try {\n        target.up(fn(this))\n      } catch (ex) {\n        console.error(this.tag + this.uid + ' notify ', ex)\n      }\n    });\n    return { hotValue: fn(this), cancel: () => listeners.delete(uuid) };\n  }\n\n  connect(key, applicator) {\n    const [refId, propId] = key.split('.');\n    const ref = refId === 'this' ? this.impl : this.app[refId];\n    if (!ref) { console.error('connect: No such ref ' + refId, key) }\n    return ref.$.subscribe(this, ($) => applyValue($.prop(propId), applicator));\n  }\n\n  /**\n   *  Right Arrow.\n   */\n  emit(key, data) {\n    const $ = this;\n\n    if (!key || !key.includes('.')) {\n      return $.up(key ? { [key]: data } : data)\n    }\n\n    const [type, target] = key.split('.');\n    const event = { data, ...data };\n\n    const ref = type === 'this' ? $.impl : $.app[type];\n    if (!ref) {\n      console.warn('emit: No such ref ' + type);\n      return;\n    }\n    try {\n\n      const method = ref[methodName(target, 'on')];\n      if (!method) { throw new ReferenceError('emit ' + type + ': No such method ' + methodName(target, 'on')) }\n\n      const result = method.call(ref, event, ref, ref.$);\n      this.log(type + ':' + methodName(target, 'on'), result, event, ref)\n      if (result) { ref.$.up(result) }\n\n    } catch (ex) {\n      console.error('emit ' + key + ':', ex)\n    }\n  }\n\n  /**\n   * Routines.\n   */\n\n  raceCondition(key) {\n    const COUNTERS = this.$weak || (this.$weak = new Map())\n    let counter = 1 + (COUNTERS.get(key) || 0);\n    COUNTERS.set(key, counter)\n    return (fn) => {\n      if (counter === COUNTERS.get(key)) {\n        counter = 0;\n        fn()\n      }\n    }\n  }\n\n  defer(fn) { if (fn && typeof fn === 'function') { (this.defered || (this.defered = [])).push(fn); } }\n\n  log(...args) {\n    console.log(this.tag + this.uid, ...args)\n  }\n}\n","import { render } from './render.js';\nimport { Component } from './component.js';\nimport { registerTypes } from './register.js';\n\nconst camelize = (key, sep = '_', jn = ' ') => ('' + key).split(sep).map((s, i) => i ? s[0].toUpperCase() + s.slice(1) : s).join(jn);\n\n// DOM\nconst DOM_SETTERS = {\n  '#text': (e, v) => (e.textContent = v == null ? '' : v),\n  disabled: (e, v) => (e.disabled = v ? true : null),\n  class: (e, v) => {\n    if (v.includes(':')) {\n      v = ('' + v).split(' ').map(s => {\n        const [cl, expr] = s.split(':')\n        if (expr === undefined) return cl;\n        const [fl, eq] = expr.split('==');\n        const disabled = eq ? fl !== eq : ['', '0', 'false', null].indexOf(fl) > -1;\n        return disabled ? '' : cl;\n      }).join(' ')\n    }\n    e.className = v;\n  },\n  selected: (e, v) => (e.selected = v ? true : null),\n  value: (e, v) => (e.value = v == null ? '' : v),\n  checked: (e, v) => (e.checked = !!v),\n  init: function (e, v) {\n    this.init = () => v(e, this)\n  },\n  data: function (e, v) {\n    if (v && e.$dataset) {\n      Object.keys(e.$dataset).forEach(k => { if (!v[k]) { e.dataset[camelize(k, '-', '')] = null } });\n    }\n    e.$dataset = { ...v };\n    if (v) {\n      Object.keys(v).forEach(k => { e.dataset[camelize(k, '-', '')] = v[k]; });\n    }\n  },\n  click: function (e, v) {\n    this.setAttribute('click:click', !v ? null : (ev) => {\n      this.$attributes.click({ ...e.$dataset }, ev);\n      return false;\n    });\n  },\n  'bubble-click': function (e, v) {\n    this.setAttribute('bubbled-click:click', !v ? null : (ev) => {\n      this.$attributes['bubble-click']({ ...e.$dataset }, ev);\n      return true;\n    });\n  },\n  blur: function (e, v) {\n    this.setAttribute('blur:blur', !v ? null : (ev) => {\n      this.$attributes.blur({ ...e.$dataset }, ev);\n      return false;\n    });\n  },\n  dblclick: function (e, v) {\n    this.setAttribute('dblclick:dblclick', !v ? null : (ev) => {\n      this.$attributes.dblclick({ ...e.$dataset }, ev);\n      return false;\n    });\n  },\n  scroll: function (e, v) {\n    this.setAttribute('scroll:scroll', !v ? null : (ev) => {\n      this.$attributes.scroll({ ...e.$dataset }, ev);\n      return false;\n    });\n  },\n  error: function (e, v) {\n    this.setAttribute('error:error', !v ? null : (ev) => {\n      const fn = this.getAttribute('error');\n      fn && fn({ ...e.$dataset }, ev);\n      return false;\n    });\n  },\n  keypress: function (e, v) {\n    this.setAttribute('keypress:keyup', !v ? null : (ev) => {\n      if (ev.keyCode !== 13 && ev.keyCode !== 27) {\n        const fn = this.$attributes.keypress;\n        fn && fn({ value: e.value, ...e.$dataset }, ev);\n        setTimeout(() => e.focus(), 0)\n      }\n      return false;\n    });\n  },\n  enter: function (e, v) {\n    this.setAttribute('enter:keyup', !v ? null : (ev) => {\n      if (ev.keyCode === 13) {\n        this.$attributes.enter({ value: e.value, ...e.$dataset }, ev);\n      }\n      if (ev.keyCode === 13 || ev.keyCode === 27) {\n        e.blur();\n      }\n      return false;\n    });\n  },\n  change: function (e, v) {\n    this.setAttribute('change:change', !v ? null : (ev) => {\n      this.$attributes.change({ value: e.value, ...e.$dataset }, ev);\n      return false;\n    });\n  },\n  toggle: function (e, v) {\n    this.setAttribute('toggle:change', !v ? null : (ev) => {\n      this.$attributes.toggle({ value: e.checked, ...e.$dataset }, ev);\n      return false;\n    });\n  }\n};\n\nconst DOM_VALUE_COMPARATORS = {\n  value: (e, their) => (e.value === their),\n  _: (_, their, mine) => their === mine\n};\n\nclass Element {\n\n  constructor(attrs = {}, $) {\n    this.elt = $.elt = $.tag === '#text' ? document.createTextNode('') : document.createElement($.tag);\n    this.$attributes = {}\n    this.$ = this.elt.$ = $;\n    this.applyAttributes(attrs);\n  }\n  done() {\n    const e = this.elt;\n    const lstnrs = this.$listeners;\n    if (lstnrs) {\n      Object.keys(lstnrs).forEach(k => e.removeEventListener(k, lstnrs[k]));\n      this.$listeners = null;\n    }\n    const p = e.parentElement;\n    if (p) {\n      p.removeChild(e);\n    }\n    this.elt = this.$attributes = null;\n  }\n  set(delta) {\n    this.delta = this.delta ? Object.assign(this.delta, delta) : delta;\n    return this.$.nodes || delta && Object.keys(delta).length;\n  }\n  render($) {\n    const e = this.elt;\n    const p = $.ctx;\n    if ($.content) {\n      e.cursor = null;\n      render($, $.content);\n      e.cursor = null;\n    }\n    if (this.delta) {\n      this.applyAttributes(this.delta);\n      this.delta = null;\n    }\n    const before = p.cursor ? p.cursor.nextSibling : p.firstChild;\n    if (!before) {\n      if (p !== e.parentElement) {\n        p.appendChild(e);\n      }\n    } else if (e !== before) {\n      p.insertBefore(e, before);\n    }\n    p.cursor = e;\n  }\n  applyAttributes(theirs) {\n    const e = this.elt;\n    const mines = this.$attributes;\n    for (let key in theirs) {\n      if (Object.prototype.hasOwnProperty.call(theirs, key) && !(DOM_VALUE_COMPARATORS[key] || DOM_VALUE_COMPARATORS._)(e, theirs[key], mines[key])) {\n        const value = theirs[key];\n        const setter = DOM_SETTERS[key];\n        // console.log('setAttribute' + this.$.tag, key, value)\n        if (setter) {\n          setter.call(this, e, value);\n        } else {\n          this.setAttribute(key, value);\n        }\n      }\n    }\n    this.$attributes = theirs;\n  }\n  getAttribute(key, def) {\n    return (this.$attributes && this.$attributes[key]) || def\n  }\n  setAttribute(key, value) {\n    if (value != null) {\n      if (typeof value === 'function') {\n        const fnValue = (...args) => { if (!this.isDone) { value(...args) } }\n        if (!this.listeners) {\n          this.listeners = new Map();\n        }\n        if (!this.listeners.has(key)) {\n          const [akey, ekey = akey] = key.split(':')\n          this.elt.addEventListener(ekey, fnValue, false);\n          this.listeners.set(key, fnValue);\n        }\n      } else {\n        this.elt.setAttribute(key, value);\n      }\n    } else {\n      if (this.listeners && this.listeners.has(key)) {\n        const [akey, ekey = akey] = key.split(':')\n        this.elt.removeEventListener(ekey, this.listeners.get(key));\n        this.listeners.delete(key);\n      } else {\n        this.elt.removeAttribute(key);\n      }\n    }\n  }\n}\n\nclass WebClientApp {\n  constructor(props, $) {\n    Object.assign(this, props);\n    $.elt = $.ctx = props.rootElement || document.body;\n  }\n}\nWebClientApp.Element = Element;\n\nexport function launch({ types, App = WebClientApp, ...props } = {}) {\n  App.template = App.template || `<${types[0].name || types[0].NAME}/>`;\n  registerTypes([App, App.Element].concat(types))\n  const a = new Component(App, { props });\n\n  const fn = () => { render(a); a.init(); }\n  if (typeof window === 'object') {\n    window.requestAnimationFrame(fn);\n  } else {\n    fn()\n  }\n\n  return a.impl;\n}\n\nif (typeof window === 'object') {\n  window.launch = launch;\n}","import { resolveTemplate } from './resolve.js';\n\nexport class Fragment {\n    resolveTemplate($) {\n        return $.content;\n    }\n}\n\nexport class FragmentSlot {\n    resolveTemplate($) {\n        const ocontent = $.owner.content;\n        if (!ocontent) return null;\n        const otag = $.owner.tag;\n        const acc = new Map();\n        ocontent.forEach((v) => {\n            if ($.id) {\n                if ((v.tag === otag + ':' + $.id) && v.content) {\n                    v.content.forEach(vv => acc.set(vv.uid, vv));\n                }\n            } else if (v.tag.slice(0, otag.length + 1) !== otag + ':') {\n                acc.set(v.uid, v);\n            }\n        });\n        return acc;\n    }\n}\n\nexport class FragmentFor {\n    resolveTemplate($) {\n        const acc = new Map();\n        const { $data: data } = $.impl;\n        const { itemId, itemNode, emptyNode, loadingNode } = $.$spec;\n        const { tag, updates, initials = {}, nodes, uid } = itemNode;\n        if (data && data.length) {\n            if (!data.forEach) {\n                throw new Error('wrong ui:for data', data)\n            }\n            data.forEach((d, index) => {\n                const id = `${uid}-$${d.id || index}`;\n                const $ownerImpl = Object.assign(Object.create($.owner.impl), { [itemId]: d, [itemId + 'Index']: index })\n                const up = Î” => $.owner.up(Î”)\n                const $owner = Object.assign(Object.create($.owner), { impl: $ownerImpl, $propFnMap: {}, up })\n                resolveTemplate($owner, { tag, initials, updates, nodes, uid: id }, acc);\n            });\n        } else if (!data) {\n            if (loadingNode) { resolveTemplate($.owner, loadingNode, acc); }\n        } else if (!data.length) {\n            if (emptyNode) { resolveTemplate($.owner, emptyNode, acc); }\n        }\n        return acc;\n    }\n}\n\nexport class FragmentIf {\n\n    resolveTemplate($) {\n        const { $data } = $.impl;\n        const node = $data ? $.$spec.then : $.$spec.else;\n        return resolveTemplate($.owner, node);\n    }\n}\n\nexport class FragmentTag {\n    resolveTemplate($) {\n        const acc = new Map();\n        const tag = $.impl.$data;\n        if (tag) {\n            resolveTemplate($.owner, { ...$.$spec, tag, uid: tag + ':' + $.uid }, acc);\n        }\n        return acc;\n    }\n}\n\n","export { launch } from './dom.js';\n","import { parseXML } from './xml.js';\nimport { compileNode } from './compile.js';\nimport { Fragment, FragmentFor, FragmentIf, FragmentTag, FragmentSlot } from './fragment.js';\n\nlet COUNTER = 1;\n\nlet ANY;\n\nconst nextId = (p = '') => p + (COUNTER++);\n\nconst fnName = ctor => (/^function\\s+([\\w$]+)\\s*\\(/.exec(ctor.toString()) || [])[1] || nextId('$C');\n\nconst REGISTRY = new Map([\n    ['ui:fragment', Fragment],\n    ['ui:for', FragmentFor],\n    ['ui:if', FragmentIf],\n    ['ui:tag', FragmentTag],\n    ['ui:slot', FragmentSlot],\n]);\n\nconst reg = ctr => {\n    const ctor = typeof ctr === 'function' ? ctr : Object.assign(function () { }, ctr);\n    const name = ctor.NAME || ctor.name || fnName(ctor);\n    const text = ctor.TEMPLATE || ctor.template || ctor.prototype.TEMPLATE;\n    ctor.$TEMPLATE = () => {\n        try {\n            const T = text ? compileNode(parseXML(typeof text === 'function' ? text() : text, name)) : [];\n            ctor.$TEMPLATE = () => T;\n            return T;\n        } catch (ex) {\n            // eslint-disable-next-line no-console\n            console.error('compile ' + name, ex)\n        }\n        return []\n    }\n    if (name === 'Element') {\n        ANY = ctor\n    } else {\n        REGISTRY.set(name, ctor);\n    }\n};\n\nexport const registerTypes = types => types.forEach(reg);\n\nexport const getByTag = tag => REGISTRY.get(tag) || ANY;","import { getByTag } from './register.js';\nimport { Component } from './component.js';\n\nexport const render = (c, $content = c.resolveTemplate()) => {\n    if (!$content || !$content.size) {\n        if (c.children) { c.children.forEach(cc => cc.done()); }\n        return;\n    }\n    if (c.children) { c.children.forEach(cc => !$content.has(cc.uid) ? cc.done() : 0); }\n    const ch = c.children || (c.children = new Map());\n    $content.forEach(({ tag, content, owner, props, inits, initials, ref, $spec, id }, uid) => {\n        let cc = ch.get(uid);\n        if (!cc) {\n            if (initials) {\n                props = props && props.data && initials.data\n                    ? { ...props, ...initials, data: { ...initials.data, ...props.data } }\n                    : { ...props, ...initials }\n            }\n            cc = new Component(\n                getByTag(tag),\n                { props, tag, ref, $spec, id, uid, owner, inits, parent: c }\n            );\n            ch.set(uid, cc);\n        }\n        cc.owner = owner;\n        cc.content = content;\n        cc.prevElt = c.elt.cursor;\n        cc.up(props);\n    });\n    if (c.children) { c.children.forEach(cc => !cc.isInited ? cc.init() : 0); }\n};\n","\nexport function resolveTemplate(owner, tmpl, acc = new Map()) {\n    if (!tmpl) { return acc; }\n    if (tmpl.reduce) { return tmpl.length ? tmpl.reduce((m, t) => resolveTemplate(owner, t, m), acc) : acc; }\n    const { tag, updates, initials, inits, nodes, uid, id, ref, $spec } = tmpl;\n    return acc.set(uid, {\n        tag, id, uid, ref,\n        owner, initials, inits,\n        $spec,\n        props: updates && updates.length ? updates.reduce((acc, fn) => { fn(owner, acc); return acc; }, {}) : null,\n        content: nodes && nodes.length ? nodes.reduce((m, t) => resolveTemplate(owner, t, m), new Map()) : null\n    });\n}\n","// ==========\n// XML Parse for templates. XML -> NodeTree\n// ----------\nconst RE_XML_ENTITY = /&#?[0-9a-z]{3,5};/g;\nconst RE_XML_COMMENT = /<!--((?!-->)[\\s\\S])*-->/g;\nconst RE_ATTRS = /([a-z][a-zA-Z0-9-:]+)(=\"[^\"]*\"|={[^}]*})?/g;\nconst RE_ESCAPE_XML_ENTITY = /[\"'&<>]/g;\nconst RE_XML_TAG = /(<)(\\/?)([a-zA-Z][a-zA-Z0-9-:]*)((?:\\s+[a-z][a-zA-Z0-9-:]+(?:=\"[^\"]*\"|={[^}]*})?)*)\\s*(\\/?)>/g;\nconst SINGLE_TAGS = 'img input br col'.split(' ').reduce((r, e) => { r[e] = 1; return r; }, {});\nconst SUBST_XML_ENTITY = {\n    amp: '&',\n    gt: '>',\n    lt: '<',\n    quot: `\"`,\n    nbsp: ' '\n};\nconst ESCAPE_XML_ENTITY = {\n    34: '&quot;',\n    38: '&amp;',\n    39: '&#39;',\n    60: '&lt;',\n    62: '&gt;'\n};\nconst RE_EMPTY = /^\\s*$/\nconst FN_ESCAPE_XML_ENTITY = m => ESCAPE_XML_ENTITY[m.charCodeAt(0)];\nconst FN_XML_ENTITY = function (_) {\n    const s = _.substring(1, _.length - 1);\n    return s[0] === '#' ? String.fromCharCode(+s.slice(1)) : (SUBST_XML_ENTITY[s] || ' ');\n};\nconst decodeXmlEntities = (s = '') => s.replace(RE_XML_ENTITY, FN_XML_ENTITY);\nconst escapeXml = (s) => !s ? '' : ('' + s).replace(RE_ESCAPE_XML_ENTITY, FN_ESCAPE_XML_ENTITY);\nconst skipQoutes = (s) => s[0] === '\"' && s[s.length - 1] === '\"' ? s.slice(1, -1) : s;\n\nlet UID = 1;\n\nconst parseAttrs = (s) => {\n    const r = new Map();\n    if (!s) { return r; }\n    for (let e = RE_ATTRS.exec(s); e; e = RE_ATTRS.exec(s)) {\n        if (!e[2]) {\n            r.set(e[1], \"true\");\n        } else {\n            r.set(e[1], decodeXmlEntities(skipQoutes(e[2].slice(1))));\n        }\n    }\n    return r;\n};\nconst stringifyAttrs = (attrs) => {\n    if (!attrs || !attrs.size) {\n        return '';\n    }\n    const r = [];\n    attrs.forEach((v, k) => {\n        if (v && k !== '#text') {\n            r.push(' ' + k + '=\"' + escapeXml(v) + '\"');\n        }\n    });\n    return r.join('');\n};\n\nclass Node {\n    constructor(tag, attrs = new Map()) {\n        this.uid = UID++;\n        this.tag = tag || '';\n        this.attrs = attrs;\n        this.nodes = [];\n    }\n    getChild(index) {\n        return this.nodes[index];\n    }\n    setText(text) {\n        this.attrs.set('#text', decodeXmlEntities(text));\n    }\n    addChild(tag, attrs) {\n        const e = new Node(tag, attrs);\n        this.nodes.push(e);\n        return e;\n    }\n    toString() {\n        return stringify(this);\n    }\n}\n\nexport function stringify({ tag, attrs, nodes = [] }, tab = '') {\n    const sattrs = stringifyAttrs(attrs);\n    const ssubs = nodes.map(c => stringify(c, `  ${tab}`)).join('\\n');\n    const text = attrs && attrs.get('#text');\n    const stext = text ? `  ${tab}${escapeXml(text)}` : '';\n    if (tag === '#text') {\n        return stext.trim()\n    }\n    return `${tab}<${tag}${sattrs}` + (!ssubs && !stext ? '/>' : `>\\n${ssubs}${stext}\\n${tab}</${tag}>`);\n}\n\nexport const parseXML = (_s, key) => {\n    const s = ('' + _s).trim().replace(RE_XML_COMMENT, '');\n    const ctx = [new Node()];\n    let lastIndex = 0;\n    // head text omitted\n    for (let e = RE_XML_TAG.exec(s); e; e = RE_XML_TAG.exec(s)) {\n        // preceding text\n        const text = e.index && s.slice(lastIndex, e.index);\n        if (text && !text.match(RE_EMPTY)) {\n            ctx[0].addChild('#text').setText(text);\n        }\n        // closing tag\n        if (e[2]) {\n            if (ctx[0].tag !== e[3]) {\n                throw new Error(\n                    (key || '') + ' XML Parse closing tag does not match at: ' + e.index +\n                    ' near ' +\n                    e.input.slice(Math.max(e.index - 150, 0), e.index) +\n                    '^^^^' +\n                    e.input.slice(e.index, Math.min(e.index + 150, e.input.length))\n                );\n            }\n            ctx.shift();\n        } else {\n            const elt = ctx[0].addChild(e[3], parseAttrs(e[4]));\n            // not single tag\n            if (!(e[5] || (e[3] in SINGLE_TAGS))) {\n                ctx.unshift(elt);\n                if (ctx.length === 1) {\n                    throw new Error('Parse error at: ' + e[0]);\n                }\n            }\n        }\n        // up past index\n        lastIndex = RE_XML_TAG.lastIndex;\n    }\n    // tail text omitted\n    return ctx[0].getChild(0);\n};\n"],"sourceRoot":""}